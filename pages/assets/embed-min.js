var channelname=null;var clipid="";var time="";var parameters="";var width,height,playerWidth,playerHeight,playerWidth,playerHeight,chatWidth,chatHeight,libraryWidth,libraryHeight,windowWidth,windowHeight;var layout=0,tabWidth=239;var minPlayerWidth=304;var minPlayerHeight=175;var minLibraryWidth=200;var minLibraryHeight=150;var minChatWidth=240;var minChatHeight=140;var aspectWidth=16;var aspectHeight=9;var enableTab=true;var result;var tryCount=0;var isHttps=false;var browseMode=true;var mode="&mode=idname";window.onload=function(){parseQueryString();initHttpsSettings();result=LSVideo.attemptHtmlEmbed();updateDimension();if(!result){if(BrowserDetect.browser=="Safari"){setTimeout(setUpParams,300)}else{if(BrowserDetect.browser=="Chrome"){setTimeout(setUpParams,10)}else{setUpParams()}}}};function initHttpsSettings(){isHttps=(window.document.location.protocol.toLowerCase()=="https:");if(!isHttps){document.getElementById("thumbnail").setAttribute("src","http://thumbnail.api.livestream.com/thumbnail?name=error")}}function setUpParams(){tryCount++;windowWidth=f_clientWidth();windowHeight=f_clientHeight();width=windowWidth;height=windowHeight;log("setUpParams : width = "+width);log("setUpParams : height = "+height);params=(window.location.href).split("?")[1];if(typeof(params)!="undefined"){aspectWidth=(params.search("aspectWidth")>0)?parseInt(params.match(/aspectWidth=([0-9])/)[1],10):16;aspectHeight=(params.search("aspectHeight")>0)?parseInt(params.match(/aspectHeight=([0-9])/)[1],10):9}if(windowWidth==0||windowHeight==0){if(tryCount<3){setTimeout(setUpParams,20);return}else{embedCodeSet()}}else{embedCodeSet()}}function f_clientWidth(){return f_filterResults(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)}function f_clientHeight(){return f_filterResults(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)}function f_filterResults(d,b,a){var c=d?d:0;if(b&&(!c||(c>b))){c=b}return a&&(!c||(c>a))?a:c}function clearVideo(){var a=document.getElementsByTagName("video");if(a.length==0){return}if(a[0].paused!=true){a[0].pause()}var b=document.getElementById("player");var c=document.getElementById("error_message");var d=document.getElementById("error-html5player");b.style.display="none";c.style.display="none";d.style.display="none"}function switchChannel(b){channelname=b;if(result){clearVideo();result=LSVideo.attemptHtmlEmbed()}else{var a=document.lsplayer;a.playChannel(channelname)}}function switchClip(c,b){if(typeof b!="undefined"){channelname=b}clipid=c;if(result){clearVideo();result=LSVideo.attemptHtmlEmbed()}else{var a=document.lsplayer;a.playClip(clipid,channelname)}}function setPlay(){if(!result){var a=document.lsplayer;a.setPlay()}}function getPlaybackTime(){if(!result){var a=document.lsplayer;return a.getTime()}}function setPause(){if(!result){var a=document.lsplayer;return a.setPause()}}function updateThumb(){thumbnail=document.getElementById("thumbnail");thumbnail.src="http://thumbnail.api.livestream.com/thumbnail?name="+channelname+"&t="+new Date().valueOf()}function updateDimension(){if(result){updateThumb();setInterval("updateThumb()",10000);if(self.innerHeight){browserWidth=self.innerWidth;browserHeight=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight}else{if(document.body){browserWidth=document.body.clientWidth;browserHeight=document.body.clientHeight}}}document.getElementById("error-html5player").style.width=browserWidth+"px";document.getElementById("error-html5player").style.height=browserHeight+"px";document.getElementById("thumbnail").setAttribute("width",browserWidth);document.getElementById("thumbnail").setAttribute("height",browserHeight)}}var LSVideo=new function(){var s,c,g,n,k,h;var j=true;this.attemptHtmlEmbed=function(){if(typeof h!=undefined){clearInterval(h)}if(/(iphone)|(ipad)|(ipod)/i.exec(navigator.userAgent)||/iphone=1/i.exec(window.location.search)){n=true}else{if(/android/i.exec(navigator.userAgent)||/android=1/i.exec(window.location.search)){n=false}else{if(isBlackBerryOS(navigator.userAgent)&&isRTSPSupportedBlackBerryOS(navigator.userAgent)){n=false}else{return false}}}s=channelname;c=clipid;g=document.getElementById("player");k=document.getElementById("error_message");errorDiv=document.getElementById("error-html5player");if(c){e()}else{o(s)}return true};function e(){d(s,function(t){if(!t.isMobileCompatible){if(c){k.innerHTML="This video clip is not mobile compatible."}else{k.innerHTML="This channel is live but not mobile compatible."}k.style.display="block";errorDiv.style.display="block";return}k.style.display="none";errorDiv.style.display="none";if(n){a(t)}else{p(t.androidUrl)}})}function a(u){var t,v="";if(j&&u.progressiveUrl&&c){t=u.progressiveUrl}else{if(c){t=u.httpUrl}else{t=r();v=' poster="'+f(s)+'"'}}g.innerHTML='<video style="width: 100%; height:100%" controls="controls" src="'+t+'"'+v+'" x-webkit-airplay="allow"></video>';g.style.display=""}function p(t){g.innerHTML='<a href="'+t+'"><img src="'+f(s)+'" style="width: 100%; height:100%"><span id="playbutton" class="mask"></span></a>';g.style.display="block"}function m(){g.innerHTML="";k.innerHTML="This channel is not live. Only live streams and mobile compatible video clips appear on mobile devices.";g.style.display="none";k.style.display="block";errorDiv.style.display="block"}function o(u){var v;var t=function(){q(u,function(w){if(typeof v!=="undefined"&&v==w.isLive){return}if(w.isLive){e()}else{m()}v=w.isLive})};t();h=setInterval(t,5000)}function r(){return b(s)+"/3.0/playlist.m3u8"}function l(v,t){var w=new RegExp(v+"=([^&]*)","i");var u=w.exec(window.location.search);return u?u[1]:t}function b(t){return"http://x"+t.replace("_","-")+"x.api.channel.livestream.com"}function f(t){return"http://thumbnail.api.livestream.com/thumbnail?name="+t+"&r="+Math.random()}function d(u,w){var t=b(u)+"/3.0/getstream.json";var v=c?{id:c}:null;i.get(t,v,w)}function q(u,v){var t=b(u)+"/3.0/livestatus.json";i.get(t,{},v)}var i=(function(){var t=0,v,y,u,w=this;function x(C){var B=document.createElement("script"),A=false;B.src=C;B.async=true;B.onload=B.onreadystatechange=function(){if(!A&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){A=true;B.onload=B.onreadystatechange=null;if(B&&B.parentNode){B.parentNode.removeChild(B)}}};if(!v){v=document.getElementsByTagName("head")[0]}v.appendChild(B)}function z(A,C,D){y="?";C=C||{};for(u in C){if(C.hasOwnProperty(u)){y+=u+"="+C[u]+"&"}}var B="json"+(++t);w[B]=function(E){D(E);w[B]=null;try{delete w[B]}catch(F){}};x(A+y+"callback="+B+"&r="+Math.random());return B}return{get:z}}())};function displayCompanionBanners(b){try{parent.displayCompanionBanners(b)}catch(a){}}function LSShowVastCompanion(b){try{parent.LSShowVastCompanion(b)}catch(a){}}function lrDisplayCompanion(c,d,e,b,f){try{parent.lrDisplayCompanion(c,d,e,b,f)}catch(a){}}function embedCodeSet(){switch(layout){case -1:displayError("No Channel Name","The Channel Name is Required");break;case 0:minWidth=minPlayerWidth+minChatWidth;width=(width<minWidth)?minWidth:width;minHeight=minPlayerHeight+minLibraryHeight;height=(height<minHeight)?minHeight:height;chatWidth=minChatWidth;libraryWidth=width-minChatWidth;playerWidth=libraryWidth;playerHeight=(getPlayerHeight()+minLibraryHeight>height)?height-minLibraryHeight:getPlayerHeight();libraryHeight=height-playerHeight;chatHeight=height;document.getElementById("layout0-player").style.width=playerWidth+"px";document.getElementById("layout0-player").style.height=playerHeight+"px";document.getElementById("layout0-chat").style.width=chatWidth+"px";document.getElementById("layout0-chat").style.height=chatHeight+"px";document.getElementById("layout0-library").style.width=libraryWidth+"px";document.getElementById("layout0-library").style.height=libraryHeight+"px";document.getElementById("layout0-player").innerHTML=createPlayer();document.getElementById("layout0-chat").innerHTML=createChat();document.getElementById("layout0-library").innerHTML=createLibrary();break;case 1:width=(width<minPlayerWidth)?minPlayerWidth:width;minHeight=minPlayerHeight+minLibraryHeight;height=(height<minHeight)?minHeight:height;playerWidth=width;libraryWidth=width;playerHeight=(getPlayerHeight()+minLibraryHeight>height)?height-minLibraryHeight:getPlayerHeight();libraryHeight=height-playerHeight;document.getElementById("layout1-player").style.width=playerWidth+"px";document.getElementById("layout1-player").style.height=playerHeight+"px";document.getElementById("layout1-library").style.width=libraryWidth+"px";document.getElementById("layout1-library").style.height=libraryHeight+"px";document.getElementById("layout1-player").innerHTML=createPlayer();document.getElementById("layout1-library").innerHTML=createLibrary();break;case 2:width=(width<minPlayerWidth)?minPlayerWidth:width;minHeight=minPlayerHeight+minChatHeight;height=(height<minHeight)?minHeight:height;playerWidth=width;chatWidth=width;playerHeight=(getPlayerHeight()+minChatHeight>height)?height-minChatHeight:getPlayerHeight();chatHeight=height-playerHeight;document.getElementById("layout2-player").style.width=playerWidth+"px";document.getElementById("layout2-player").style.height=playerHeight+"px";document.getElementById("layout2-chat").style.width=chatWidth+"px";document.getElementById("layout2-chat").style.height=chatHeight+"px";document.getElementById("layout2-player").innerHTML=createPlayer();document.getElementById("layout2-chat").innerHTML=createChat();break;case 3:width=(width<minPlayerWidth+tabWidth)?minPlayerWidth+tabWidth:width;height=(height<minPlayerHeight)?minPlayerHeight:height;playerWidth=width-tabWidth;playerHeight=(height<minPlayerHeight)?minPlayerHeight:height;document.getElementById("layout3-player").style.width=playerWidth+"px";document.getElementById("layout3-player").style.height=playerHeight+"px";document.getElementById("layout3-chat").style.width=(tabWidth+1)+"px";document.getElementById("layout3-chat").style.height=(playerHeight-25)+"px";document.getElementById("layout3-library").style.width=tabWidth+"px";document.getElementById("layout3-library").style.height=(playerHeight-26)+"px";document.getElementById("sidebar").style.width=tabWidth+"px";document.getElementById("nav").style.width=(BrowserDetect.browser!="Explorer")?(tabWidth-1)+"px":tabWidth+"px";document.getElementById("layout3-player").innerHTML=createPlayer();document.getElementById("layout3-chat").innerHTML=createChat();document.getElementById("layout3-library").innerHTML=createLibrary();break;case 4:playerWidth=width;playerHeight=height;document.getElementById("layout4-lsplayer").style.width=playerWidth+"px";document.getElementById("layout4-lsplayer").style.height=playerHeight+"px";document.getElementById("layout4-lsplayer").innerHTML=createLsPlayer();break;case 5:playerWidth=width;playerHeight=height;document.getElementById("layout5-lslibrary").style.width=playerWidth+"px";document.getElementById("layout5-lslibrary").style.height=playerHeight+"px";document.getElementById("layout5-lslibrary").innerHTML=createLsLibrary();break;case 6:playerWidth=width;playerHeight=height;document.getElementById("layout6-lschat").style.width=playerWidth+"px";document.getElementById("layout6-lschat").style.height=playerHeight+"px";document.getElementById("layout6-lschat").innerHTML=createLsChat();break;default:displayError("Incorrect Layout","The layout value is incorrect and must be changed to 0, 1, 2, or 3.");break}log("embedCodeSet : playerWidth = "+playerWidth);log("embedCodeSet : playerHeight = "+playerHeight);var a=getFlashVersion().split(",").shift();if(a==0){document.getElementById("layout"+layout).innerHTML='<div class="flasherror"><h2><a href="http://www.adobe.com/go/getflashplayer" target="_blank">Get Adobe Flash Player</a></h2><p>Flash must be installed for you to view this video.</p></div>'}else{if(a<10){document.getElementById("layout"+layout).innerHTML='<div class="flasherror"><h2><a href="http://www.adobe.com/go/getflashplayer" target="_blank">Get Adobe Flash Player</a></h2><p>Flash Player v 10 or above is required for you to view this video.</p></div>'}}if(BrowserDetect.browser=="Chrome"){document.body.style.overflowY="scroll";document.body.scrollTop=1;document.body.scrollTop=0;document.body.style.overflowY="hidden"}checkErrors();displayWidgets();initPostMessage()}function displayWidgets(){if(layout!=-1){document.getElementById("layout"+layout).style.display="block";document.getElementById("layout"+layout).style.width=width+"px";document.getElementById("layout"+layout).style.height=height+"px"}}function checkErrors(){if(BrowserDetect.browser=="Chrome"){return}if(windowWidth<width||windowHeight<height&&document.getElementById("error").style.display=="none"){displayError("Widget Size is Too Small",'Please try more appropriate dimensions or copy the embed code from the channel&rsquo;s <a href="http://livestream.com/'+channelname+'/share" target="_blank">share page</a>.')}}function displayError(b,a){document.getElementById("error").style.display="block";document.getElementById("error-title").innerHTML=b;document.getElementById("error-message").innerHTML=a}function getPlayerHeight(){return Math.round(playerWidth*aspectHeight/aspectWidth)+25}function getDomain(){if(/beta.livestream.com/.test(window.location.href)){return"http://staging.livestream.com/"}return(((isHttps)?"https":"http")+"://cdn.livestream.com/")}function createPlayer(){var a=(layout==1)?true:false;var b=(layout==2)?true:false;return'<object width="100%" height="100%" id="lsplayer" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"grid/LSPlayer.swf?channel="+channelname+"&clip="+clipid+"&time="+time+parameters+'" /><param name="flashvars" value="channel='+channelname+"&borderColor=0xCCCCCC&iconColor=0x555555&showBorderControlBar=false&allowChat="+a+"&showMoreVideos="+b+'" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true"/><param name="wmode" value="opaque"/><embed name="lsplayer" src="'+getDomain()+"grid/LSPlayer.swf?channel="+channelname+"&clip="+clipid+"&time="+time+'" flashvars="channel='+channelname+"&borderColor=0xCCCCCC&iconColor=0x555555&showBorderControlBar=false&allowChat="+a+"&showMoreVideos="+b+parameters+'" width="100%" height="100%" wmode="opaque" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash"/></object>'}function createLsPlayer(){return'<object width="100%" height="100%" id="lsplayer" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"grid/LSPlayer.swf?channel="+channelname+"&clip="+clipid+"&time="+time+parameters+'" /><param name="allowScriptAccess" value="always"></param><param name="allowFullScreen" value="true"></param><param name="wmode" value="opaque"/><param name="bgcolor" value="#000000"/><embed name="lsplayer" wmode="opaque" bgcolor="#000000" src="'+getDomain()+"grid/LSPlayer.swf?channel="+channelname+"&clip="+clipid+"&time="+time+parameters+'" width="100%" height="100%" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash"></embed></object>'}function createLibrary(){showBorderLeft=(layout==3)?false:true;showBorderTop=false;return'<object width="100%" height="100%" id="lslibrary" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"grid/LSLibrary.swf?channel="+channelname+"&browseMode="+browseMode+"&borderColor=0xCCCCCC&showBorderTop="+showBorderTop+"&showBorderLeft="+showBorderLeft+mode+"&player=lsplayer&showGrabWidget=false"+parameters+'" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true"/><param name="wmode" value="opaque"/><embed name="lslibrary" src="'+getDomain()+"grid/LSLibrary.swf?channel="+channelname+"&browseMode="+browseMode+"&borderColor=0xCCCCCC&showBorderTop="+showBorderTop+"&showBorderLeft="+showBorderLeft+mode+"&player=lsplayer&showGrabWidget=false"+parameters+'" width="100%" height="100%" wmode="opaque" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash"/></object>'}function createLsLibrary(){return'<object width="100%" height="100%" id="lslibrary" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"grid/LSLibrary.swf?channel="+channelname+parameters+'" ></param><param name="allowScriptAccess" value="always" ></param><param name="allowFullScreen" value="true"></param><embed name="lslibrary" src="'+getDomain()+"grid/LSLibrary.swf?channel="+channelname+parameters+'" width="100%" height="100%" allowscriptaccess="always" allowfullscreen="true" type="application/x-shockwave-flash"></embed></object>'}function createChat(){showBorderLeft=(layout==0||layout==3)?false:true;showBorderTop=(layout==0)?true:false;return'<object width="100%" height="100%" id="lschat" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"chat/LivestreamChat.swf?&showTimestamp=true&channel="+channelname+"&showBorderTop="+showBorderTop+"&showBorderLeft="+showBorderLeft+parameters+'"></param><param name="allowScriptAccess" value="always"></param><param name="allowFullScreen" value="true"></param><embed src="'+getDomain()+"chat/LivestreamChat.swf?&showTimestamp=true&channel="+channelname+"&showBorderTop="+showBorderTop+"&showBorderLeft="+showBorderLeft+parameters+'" name="lschat" width="100%" height="100%" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" bgcolor="#ffffff"/></object>'}function createLsChat(){return'<object width="100%" height="100%" id="lschat" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+getDomain()+"chat/LivestreamChat.swf?&showTimestamp=true&channel="+channelname+'"></param><param name="allowScriptAccess" value="always"></param><param name="allowFullScreen" value="true"></param><embed src="'+getDomain()+"chat/LivestreamChat.swf?&showTimestamp=true&channel="+channelname+'" name="lschat" width="100%" height="100%" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" bgcolor="#ffffff"/></object>'}function showChat(){document.getElementById("nav-chat").className="highlight";document.getElementById("nav-players").className="";document.getElementById("layout3-chat").style.left="0px";document.getElementById("layout3-library").style.left="-9999px";if(enableTab==false){document.getElementById("layout3-library").style.display="none";document.getElementById("layout3-chat").style.display="block";enableTab=true}return false}function showLibrary(){document.getElementById("nav-chat").className="";document.getElementById("nav-players").className="highlight";document.getElementById("layout3-chat").style.left="-9999px";document.getElementById("layout3-library").style.left="0px";if(enableTab==true){document.getElementById("layout3-chat").style.display="none";document.getElementById("layout3-library").style.display="block";enableTab=false}}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var mogulusWidget={embed:function(){if(channelname==null||channelname==""){layout=-1}}};function parseQueryString(){var a,c,e;var g=0;var b=window.location.href;var h="/embed/";var g=b.indexOf(h);if(g>-1){var f=b.substring(g+h.length).split("?");var i=f[0].split("/");channelname=(i.length>0?i[0]:null);if(f.length>1){c=f[1].split("&");for(var d=0;d<c.length;d++){e=c[d].split("=");if(e[0]=="layout"){layout=parseInt(e[1],10)}else{if(e[0]=="clip"){clipid=e[1]}else{if(e[0]=="time"){time=e[1]}else{if(e[0]!="channel"){parameters=parameters==""?("&"+[e[0]+"="+e[1]]):(parameters+"&"+e[0]+"="+e[1])}if(e[0]=="browseMode"){browseMode=e[1]=="true"}else{if(e[0]=="mode"){mode="&mode="+e[1]}else{if(e[0]=="channel"){channelname=e[1]}}}}}}}}}if(mogulusWidget){mogulusWidget.embed()}}function getBlackBerryOSVersion(b){var a=/(Blackberry).+(Version\/(\d.)+\d)/i.exec(b);if(a){return a[2].split("/")[1]}a=/Blackberry.*?((\d\.)+(\d+))/i.exec(b);if(a){return a[1]}return null}var RTSP_SUPPORTED_OS_MAJOR_VERSION=4;var RTSP_SUPPORTED_OS_MINOR_VERSION=3;function isRTSPSupportedBlackBerryOS(d){if(isBlackBerryPlayBook(d)){return true}var b=getBlackBerryOSVersion(d);if(!b){return false}var c=b.split(".")[0];var a=b.split(".")[1];if(c>RTSP_SUPPORTED_OS_MAJOR_VERSION){return true}if(c==RTSP_SUPPORTED_OS_MAJOR_VERSION&&a>=RTSP_SUPPORTED_OS_MINOR_VERSION){return true}return false}function isBlackBerryOS(b){var a=/Blackberry/i.exec(b);return a||isBlackBerryPlayBook(b)}function isBlackBerryPlayBook(a){return/RIM Tablet OS/i.exec(a)}var LIVESTREAM_PREFIX="Livestream.";var CONTENT_TITLE="getContentTitle";var PLAYER_EMBED_ID="lsplayer";var IS_LIVE_EVENT="isLiveEvent";var originDomain;var playerID="";function livestreamPlayerCallback(a,c){var b=a;log(b);postMessageToTop(b,c)}function postMessageToTop(c,b){log("Posting message | message = "+c+" | value = "+b);var a={};if(c.indexOf(LIVESTREAM_PREFIX)==-1){c=LIVESTREAM_PREFIX+c}a.event=c;a.playerID=playerID;a.value=b;window.parent.postMessage(JSON.stringify(a),originDomain)}function addPostMessageListener(){if(window.addEventListener){addEventListener("message",postMessageListener,false)}else{attachEvent("onmessage",postMessageListener)}}function postMessageListener(b){if(b.origin!==originDomain){return}log("Received Message | "+b.data);var b=b.data;if(b==(LIVESTREAM_PREFIX+CONTENT_TITLE)){var a=getContentTitle();log("Content Title = "+a);postMessageToTop(CONTENT_TITLE,a)}}function getContentTitle(){var c=null;var a=getPlayer();if(a){try{c=a.getCurrentContentTitle()}catch(b){log(b)}}else{log("lsPlayerObj is null")}log("title = "+c);return c}function initPostMessage(){log("init postMessage");originDomain=getDomainFromUrl(decodeURIComponent(document.referrer));log("originDomain | "+originDomain);addPostMessageListener();playerID=""}function getPlayer(){return thisMovie(PLAYER_EMBED_ID)}function thisMovie(a){return document[a]}function getDomainFromUrl(b){var e=b.split("/"),a="";for(var c=0,d=e.length;c<d;c++){if(c<3){a+=e[c]}else{break}if(c<2){a+="/"}}return a}function getFlashVersion(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return"6,0,0"}}catch(b){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(b){}}return"0,0,0"}function log(a){if(!/log=1/.test(document.referrer)){return}if(window.console!=undefined){console.log("embed :: "+a)}};