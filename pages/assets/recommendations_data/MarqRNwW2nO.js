/*1344463458,169776318*/

if (window.CavalryLogger) { CavalryLogger.start_js(["ghcdO"]); }




window.__DEV__=window.__DEV__||0;



if(!JSON.stringify.__fb)JSON.stringify=function(a){function b(){var c=a.apply(this,arguments);if(!c)return c;return c.replace(/[%\u2028\u2029]/g,function(d){var e=d.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-e.length)+e;});}b.__fb=true;return b;}(JSON.stringify);






(function(a){if(a.require)return;var b=Object.prototype.toString,c={},d={},e={},f=0,g=1,h=2,i=Object.prototype.hasOwnProperty;function j(u){var v=c[u],w,x,y;if(!c[u]){y='Requiring unknown module "'+u+'"';throw new Error(y);}if(v.waiting&&v.special&h)m();if(v.waiting){y='Requiring module "'+u+'" with unresolved dependencies';throw new Error(y);}if(!v.exports){var z=v.exports={},aa=v.factory;if(typeof aa==='string'){var ba='('+aa+')';aa=(eval)(ba);}if(b.call(aa)==='[object Function]'){var ca=[],da=v.dependencies,ea=da.length;if(v.special&h)ea=Math.min(ea,aa.length);for(x=0;x<ea;x++){w=da[x];ca.push(w==='module'?v:(w==='exports'?z:j(w)));}var fa=aa.apply(v.context||a,ca);if(fa)v.exports=fa;}else v.exports=aa;}if(v.refcount--===1)delete c[u];return v.exports;}function k(u,v,w,x,y,z){if(v===undefined){v=[];w=u;u=o();}else if(w===undefined){w=v;if(b.call(u)==='[object Array]'){v=u;u=o();}else v=[];}var aa=c[u];if(aa){if(z)aa.refcount+=z;return;}else if(!v&&!w&&z){e[u]=(e[u]||0)+z;return;}else{aa={id:u};aa.refcount=(e[u]||0)+(z||0);delete e[u];}aa.factory=w;aa.dependencies=v;aa.context=y;aa.special=x;c[u]=aa;p(u);}function l(u,v,w){k(u,v,undefined,g,w,1);}function m(){var u={},v;for(v in d)if(i.call(d,v))if(c[v]&&!u[v]&&c[v].special&h)n({},v,u);}function n(u,v,w){w[v]=1;var x=d[v],y;if(!x)return;u[v]=1;for(y in x)if(i.call(x,y)){if(!c[y].special&h)continue;if(u[y]){delete x[y];c[y].waiting--;if(!c[y].waiting)q(y);}else n(u,y,w);}u[v]=0;}function o(){return '__mod__'+f++;}function p(u){var v=c[u],w=0;for(var x=0;x<v.dependencies.length;x++){var y=v.dependencies[x];if(!c[y]||c[y].waiting){d[y]||(d[y]={});if(!d[y][u])w++;d[y][u]=1;}}v.waiting=w;if(!w)q(u);}function q(u){var v=c[u];if(v.special&g)j(u);var w=d[u],x=[];if(w){delete d[u];for(var y in w)if(i.call(w,y))if(!--c[y].waiting)x.push(y);}for(var z=0;z<x.length;z++)q(x[z]);}function r(u,v){c[u]={id:u};c[u].exports=v;}r('module',0);r('exports',0);r('define',k);r('global',a);r('require',j);r('requireDynamic',j);r('requireLazy',l);k.amd={};a.define=k;a.require=j;a.requireDynamic=j;a.requireLazy=l;j.__debug={modules:c,deps:d};var s=false,t=function(u,v,w,x){k(u,v,w,x||h);if(c[u].waiting&&!s)s=setTimeout(function(){m();s=false;},9);};a.__d=function(u,v,w,x){v=['global','require','requireDynamic','requireLazy','module','exports'].concat(v);t(u,v,w,x);};a.__e=a.__d;})(this);
function bagofholding(){}function bagof(a){return function(){return a;};}Array.prototype.reduce=null;Array.prototype.reduceRight=null;document.documentElement.className=document.documentElement.className.replace('no_js','');
__d("copyProperties",[],function(a,b,c,d,e,f){function g(h,i,j,k,l,m,n){h=h||{};var o=[i,j,k,l,m],p=0,q;while(o[p]){q=o[p++];for(var r in q)h[r]=q[r];if(q.hasOwnProperty&&q.hasOwnProperty('toString')&&(typeof q.toString!='undefined')&&(h.toString!==q.toString))h.toString=q.toString;}return h;}e.exports=g;});
__d("Env",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h={start:Date.now()};if(a.Env){g(h,a.Env);a.Env=undefined;}e.exports=h;});
__d("ErrorUtils",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h=[],i=[],j=10,k=window.chrome&&'type' in new Error();function l(q){if(!q){return {};}else if(q._originalError)return q;var r={line:q.lineNumber||q.line,message:q.message,name:q.name,script:q.fileName||q.sourceURL||q.script,stack:q.stackTrace||q.stack};r._originalError=q;if(k&&/(\w{3,5}:\/\/[^:]+):(\d+)/.test(q.stack)){r.script=RegExp.$1;r.line=parseInt(RegExp.$2,10);}for(var s in r)(r[s]==null&&delete r[s]);return r;}function m(q,r){q=l(q);!r;if(i.length<j)i.push(q);for(var s=0;s<h.length;s++)try{h[s](q);}catch(t){}}function n(q,r,s,t){if(g.nocatch||(/nocatch/).test(location.search))return q.apply(r,s||[]);try{return q.apply(r,s||[]);}catch(u){var v=l(u);if(t)t(v);if(q)v.callee=q.toString().substring(0,100);if(s)v.args=String(s).substring(0,100);m(v);}}function o(q,r,s){m({message:q,script:r,line:s},true);}window.onerror=o;function p(q,r){h.push(q);if(!r)i.forEach(q);}e.exports={history:i,onerror:o,reportError:m,normalizeError:l,applyWithGuard:n,addListener:p};});
__d("hasArrayNature",[],function(a,b,c,d,e,f){function g(h){return (!!h&&(typeof h=='object'||typeof h=='function')&&('length' in h)&&!('setInterval' in h)&&(Object.prototype.toString.call(h)==="[object Array]"||('callee' in h)||('item' in h)));}e.exports=g;});
__d("createArrayFrom",["hasArrayNature"],function(a,b,c,d,e,f){var g=b('hasArrayNature');function h(i){if(!g(i))return [i];if(i.item){var j=i.length,k=new Array(j);while(j--)k[j]=i[j];return k;}return Array.prototype.slice.call(i);}e.exports=h;});
__d("Arbiter",["ErrorUtils","copyProperties","createArrayFrom","hasArrayNature"],function(a,b,c,d,e,f){var g=b('ErrorUtils'),h=b('copyProperties'),i=b('createArrayFrom'),j=b('hasArrayNature');if(!window.async_callback)window.async_callback=function(m,n){return m;};function k(){h(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});h(this,k);}h(k,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',subscribe:function(m,n,o){m=i(m);var p=m.some(function(x){return !x||typeof(x)!='string';});if(p)return null;o=o||k.SUBSCRIBE_ALL;var q=k._getInstance(this);q._listeners.push({callback:n,types:m});var r=q._listeners.length-1;for(var s=0;s<m.length;s++){var t=m[s];if(!q._index[t])q._index[t]=[];q._index[t].push(r);if(o==k.SUBSCRIBE_ALL)if(t in q._events)for(var u=0;u<q._events[t].length;u++){var v=q._events[t][u],w=g.applyWithGuard(n,null,[t,v]);if(w===false){q._events[t].splice(u,1);u--;}}}return new l(q,r);},unsubscribe:function(m){m.unsubscribe();},inform:function(m,n,o){var p=j(m);m=i(m);var q=k._getInstance(this),r={};o=o||k.BEHAVIOR_EVENT;for(var s=0;s<m.length;s++){var t=m[s],u=null;if(o==k.BEHAVIOR_PERSISTENT){u=q._events.length;if(!(t in q._events))q._events[t]=[];q._events[t].push(n);q._events[t]._stateful=false;}else if(o==k.BEHAVIOR_STATE){u=0;q._events[t]=[n];q._events[t]._stateful=true;}else if(t in q._events)q._events[t]._stateful=false;a.ArbiterMonitor&&a.ArbiterMonitor.record('event',t,n,q);var v;if(q._index[t]){var w=i(q._index[t]);for(var x=0;x<w.length;x++){var y=q._listeners[w[x]];if(y){v=g.applyWithGuard(y.callback,null,[t,n]);if(v===false){if(u!==null)q._events[t].splice(u,1);break;}}}}q._updateCallbacks(t,n);a.ArbiterMonitor&&a.ArbiterMonitor.record('done',t,n,q);r[t]=v;}return p?r:r[m[0]];},query:function(m){var n=k._getInstance(this);if(!(m in n._events))return null;if(n._events[m].length)return n._events[m][0];return null;},_instance:null,_getInstance:function(m){if(m instanceof k)return m;if(!k._instance)k._instance=new k();return k._instance;},registerCallback:function(m,n){var o,p=0,q=k._getInstance(this),r=false;if(typeof m=='function'){o=q._last_id;q._last_id++;r=true;}else{if(!q._callbacks[m])return null;o=m;}if(j(n)){var s={};for(var t=0;t<n.length;t++)s[n[t]]=1;n=s;}for(var u in n){try{if(q.query(u))continue;}catch(v){}p+=n[u];if(q._listen[u]===undefined)q._listen[u]={};q._listen[u][o]=(q._listen[u][o]||0)+n[u];}if(p===0&&r){g.applyWithGuard(m);return null;}if(!r){q._callbacks[o].depnum+=p;}else q._callbacks[o]={callback:window.async_callback(m,'arbiter'),depnum:p};return o;},_updateCallbacks:function(m,n){if(n===null||!this._listen[m])return;for(var o in this._listen[m]){this._listen[m][o]--;if(this._listen[m][o]<=0)delete this._listen[m][o];this._callbacks[o].depnum--;if(this._callbacks[o].depnum<=0){var p=this._callbacks[o].callback;delete this._callbacks[o];g.applyWithGuard(p);}}}});function l(m,n){this._instance=m;this._id=n;}h(l.prototype,{unsubscribe:function(){var m=this._instance._listeners,n=m[this._id];if(!n)return;for(var o=0;o<n.types.length;o++){var p=n.types[o],q=this._instance._index[p];if(q)for(var r=0;r<q.length;r++)if(q[r]==this._id){q.splice(r,1);if(q.length===0)delete q[p];break;}}delete m[this._id];}});e.exports=k;});
__d("ArbiterMixin",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h={_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new g());},inform:function(i,j,k){return this._getArbiterInstance().inform(i,j,k);},subscribe:function(i,j,k){return this._getArbiterInstance().subscribe(i,j,k);},unsubscribe:function(i){this._getArbiterInstance().unsubscribe(i);},registerCallback:function(i,j){this._getArbiterInstance().registerCallback(i,j);}};e.exports=h;});
__d("legacy:ArbiterMixin",["ArbiterMixin"],function(a,b,c,d){a.ArbiterMixin=b('ArbiterMixin');},3);
__d("function-extensions",["createArrayFrom"],function(a,b,c,d,e,f){var g=b('createArrayFrom');Function.prototype.curry=function(){var h=g(arguments);return this.bind.apply(this,[null].concat(h));};Function.prototype.shield=function(h){if(typeof this!='function')throw new TypeError();var i=this.bind.apply(this,g(arguments));return function(){return i();};};Function.prototype.defer=function(h,i){if(typeof this!='function')throw new TypeError();h=h||0;return setTimeout(this,h,i);};},3);
__d("isEmpty",[],function(a,b,c,d,e,f){function g(h){if(h instanceof Array){return h.length===0;}else if(h instanceof Object){for(var i in h)return false;return true;}else return !h;}e.exports=g;});
__d("CSSLoader",["isEmpty"],function(a,b,c,d,e,f){var g=b('isEmpty'),h=20,i=5000,j,k,l={},m=[],n,o={};function p(u){var v=Array.prototype.slice(arguments,1);for(var w=0;w<u.length;w++)u[w].apply(null,v);}function q(u){if(k)return;k=true;var v=document.createElement('link');v.onload=function(){j=true;v.parentNode.removeChild(v);};v.rel='stylesheet';v.href='data:text/css;base64,';u.appendChild(v);}function r(){var u,v=[],w=[];if(Date.now()>=n){for(u in o){w.push(o[u].signal);v.push(o[u].error);}o={};}else for(u in o){var x=o[u].signal,y=window.getComputedStyle?getComputedStyle(x,null):x.currentStyle;if(y&&parseInt(y.height,10)>1){v.push(o[u].load);w.push(x);delete o[u];}}for(var z=0;z<w.length;z++)w[z].parentNode.removeChild(w[z]);if(!g(v)){p(v);n=Date.now()+i;}return g(o);}function s(u,v,w,x){var y=document.createElement('meta');y.id='bootloader_'+u.replace(/[^a-z0-9]/ig,'_');v.appendChild(y);var z=!g(o);n=Date.now()+i;o[u]={signal:y,load:w,error:x};if(!z)var aa=setInterval(function ba(){if(r())clearInterval(aa);},h,false);}var t={loadStyleSheet:function(u,v,w,x,y){if(l[u])throw new Error('CSS component '+u+' has already been requested.');if(document.createStyleSheet){var z;for(var aa=0;aa<m.length;aa++)if(m[aa].imports.length<31){z=aa;break;}if(z===undefined){m.push(document.createStyleSheet());z=m.length-1;}m[z].addImport(v);l[u]={styleSheet:m[z],uri:v};s(u,w,x,y);return;}var ba=document.createElement('link');ba.rel='stylesheet';ba.type='text/css';ba.href=v;l[u]={link:ba};if(j){ba.onload=function(){ba.onload=ba.onerror=null;x();};ba.onerror=function(){ba.onload=ba.onerror=null;y();};}else{s(u,w,x,y);if(j===undefined)q(w);}w.appendChild(ba);},registerLoadedStyleSheet:function(u,v){if(l[u])throw new Error('CSS component '+u+' has already been registered.');l[u]={link:v};},unloadStyleSheet:function(u){if(!u in l)return;var v=l[u],w=v.link;if(w){w.onload=w.onerror=null;w.parentNode.removeChild(w);}else{var x=v.styleSheet;for(var y=0;y<x.imports.length;y++)if(x.imports[y].href==v.uri){x.removeImport(y);break;}}delete o[u];delete l[u];}};e.exports=t;});
__d("Bootloader",["function-extensions","Arbiter","CSSLoader","Env","createArrayFrom","isEmpty"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('CSSLoader'),i=b('Env'),j=b('createArrayFrom'),k=b('isEmpty'),l={},m={},n={},o=null,p={},q={},r=false,s=[];function t(x,y,z,aa){var ba=w.done.curry([z],x=='css');if(x=='js'){var ca=document.createElement('script');ca.src=y;ca.async=true;var da=p[z];if(da&&da.crossOrigin&&i.crossorigin_attribute)ca.crossOrigin='anonymous';ca.onload=ca.onerror=ba;ca.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})ba();};aa.appendChild(ca);}else if(x=='css')h.loadStyleSheet(z,y,aa,ba,function(){ba();});}function u(x){if(!p[x])return;if(p[x].type=='css'){h.unloadStyleSheet(x);delete l[x];g.inform(g.BOOTLOAD+'/'+x,null,g.BEHAVIOR_STATE);}}function v(x,y){if(!r){s.push([x,y]);return;}x=j(x);var z=[];for(var aa=0;aa<x.length;++aa){if(!x[aa])continue;var ba=n[x[aa]];if(ba){var ca=ba.resources;for(var da=0;da<ca.length;++da)z.push(ca[da]);}}w.loadResources(z,y);}var w={configurePage:function(x){var y={},z=w.resolveResources(x),aa;for(aa=0;aa<z.length;aa++){y[z[aa].src]=z[aa];w.requested(z[aa].name);}var ba=document.getElementsByTagName('link');for(aa=0;aa<ba.length;++aa){if(ba[aa].rel!='stylesheet')continue;for(var ca in y)if(ba[aa].href.indexOf(ca)!==-1){var da=y[ca].name;if(y[ca].permanent)m[da]=true;delete y[ca];h.registerLoadedStyleSheet(da,ba[aa]);w.done([da],true);break;}}},loadComponents:function(x,y){x=j(x);var z=[],aa=[];for(var ba=0;ba<x.length;ba++){var ca=n[x[ba]];if(ca&&!ca.module)continue;var da='legacy:'+x[ba];if(n[da]){x[ba]=da;z.push(da);}else if(ca&&ca.module){z.push(x[ba]);if(!ca.runWhenReady)aa.push(x[ba]);}}v(x,z.length?d.curry(z,y):y);},loadModules:function(x,y){var z=[],aa=[];for(var ba=0;ba<x.length;ba++){var ca=n[x[ba]];if(!ca||ca.module)z.push(x[ba]);}v(x,d.curry(z,y));},loadResources:function(x,y,z,aa){var ba;x=w.resolveResources(j(x));if(z){var ca={};for(ba=0;ba<x.length;++ba)ca[x[ba].name]=true;for(var da in l)if(!(da in m)&&!(da in ca)&&!(da in q))u(da);q={};}var ea=[],fa=[];for(ba=0;ba<x.length;++ba){var ga=x[ba];if(ga.permanent)m[ga.name]=true;var ha=g.BOOTLOAD+'/'+ga.name;if(g.query(ha)!==null)continue;if(!ga.nonblocking)fa.push(ha);if(!l[ga.name]){w.requested(ga.name);ea.push(ga);window.CavalryLogger&&window.CavalryLogger.getInstance().measureResources(ga,aa);}}if(y)y=g.registerCallback(y,fa);var ia=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1],ja=w.getHardpoint(),ka=ia?ja:document.createDocumentFragment();for(ba=0;ba<ea.length;++ba)t(ea[ba].type,ea[ba].src,ea[ba].name,ka);if(ja!==ka)ja.appendChild(ka);return y;},requestResource:function(x,y,z){var aa=w.getHardpoint();t(x,y,z,aa);},done:function(x,y){w.requested(x);if(!y){var z={sender:this};g.inform(g.BOOTLOAD,z,g.BEHAVIOR_EVENT);}for(var aa=0;aa<x.length;++aa){var ba=x[aa];g.inform(g.BOOTLOAD+'/'+ba,true,g.BEHAVIOR_STATE);}},requested:function(x){x=j(x);for(var y=0;y<x.length;++y)l[x[y]]=true;},enableBootload:function(x){for(var y in x)if(!n[y])n[y]=x[y];if(!r){r=true;for(var z=0;z<s.length;z++)v.apply(null,s[z]);s=[];}},getHardpoint:function(){if(!o){var x=document.getElementsByTagName('head');o=x.length&&x[0]||document.body;}return o;},setResourceMap:function(x){if(!x)return;var y=[];for(var z in x)if(!p[z]){if(!x[z].name)x[z].name=z;p[z]=x[z];if(p[z].preloadable)y.push(p[z]);}w.loadResources(y);},resolveResources:function(x){if(!x)return [];var y=[];for(var z=0;z<x.length;++z)if(typeof x[z]=='string'){if(x[z] in p)y.push(p[x[z]]);}else y.push(x[z]);return y;},loadEarlyResources:function(x){var y;w.setResourceMap(x);var z=[];for(y in x)z.push(p[y]);w.loadResources(z);for(y in x){var aa=p[y];if(!aa.permanent)q[aa.name]=aa;}}};e.exports=w;});
__d("legacy:bootloader",["Bootloader"],function(a,b,c,d){a.Bootloader=b('Bootloader');},3);
__d("Class",["function-extensions","Arbiter","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Arbiter'),h=b('copyProperties'),i=b('createArrayFrom'),j={},k=null,l={extend:function(t,u){if(!k)k=g.subscribe(g.BOOTLOAD,n);if(typeof u=='string'){m(t,u);}else o(t,u);}};function m(t,u){t.__class_extending=true;var v=g.registerCallback(o.curry(t,u),[g.FUNCTION_EXTENSION+'/'+u,g.BOOTLOAD]);if(v!==null)j[u]=true;}function n(){for(var t in j)if(!!a[t]){delete j[t];if(!a[t].__class_extending){g.inform(g.FUNCTION_EXTENSION+'/'+t,true,g.BEHAVIOR_STATE);}else a[t].__class_name=t;}}function o(t,u){delete t.__class_extending;u=typeof u=='string'?a[u]:u;var v=p(u,0),w=p(t,v.prototype.__level+1);w.parent=v;if(!!t.__class_name)g.inform(g.FUNCTION_EXTENSION+'/'+t.__class_name,true,g.BEHAVIOR_STATE);}function p(t,u){if(t._metaprototype)return t._metaprototype;var v=new Function();v.construct=q;v.prototype.construct=s(t,u,true);v.prototype.__level=u;v.base=t;t.prototype.parent=v;t._metaprototype=v;return v;}function q(t){r(t.parent);var u=[],v=t;while(v.parent){var w=new v.parent();u.push(w);w.__instance=t;v=v.parent;}t.parent=u[1];u.reverse();u.pop();t.__parents=u;t.__instance=t;return t.parent.construct.apply(t.parent,arguments);}function r(t){if(t.initialized)return;var u=t.base.prototype;if(t.parent){r(t.parent);var v=t.parent.prototype;for(var w in v)if(w!='__level'&&w!='construct'&&u[w]===undefined)u[w]=t.prototype[w]=v[w];}t.initialized=true;var x=t.prototype.__level;for(var w in u)if(w!='parent')u[w]=t.prototype[w]=s(u[w],x);}function s(t,u,v){if(typeof t!='function'||t.__prototyped)return t;var w=function(){var x=this.__instance;if(x){var y=x.parent;x.parent=u?x.__parents[u-1]:null;var z=arguments;if(v){z=[];for(var aa=1;aa<arguments.length;aa++)z.push(arguments[aa]);}var ba=t.apply(x,z);x.parent=y;return ba;}else return t.apply(this,arguments);};w.__prototyped=true;return w;}e.exports=l;});
__d("legacy:Class",["Class"],function(a,b,c,d){a.Class=b('Class');},3);
__d("ge",[],function(a,b,c,d,e,f){function g(h){return typeof h=='string'?document.getElementById(h):h;}e.exports=g;});
__d("$",["ge"],function(a,b,c,d,e,f){var g=b('ge');function h(i){var j=g(i);return j;}e.exports=h;});
__d("CSS",["$"],function(a,b,c,d,e,f){var g=b('$'),h='hidden_elem',i={setClass:function(j,k){g(j).className=k||'';return j;},hasClass:function(j,k){j=g(j);return (' '+j.className+' ').indexOf(' '+k+' ')>-1;},addClass:function(j,k){j=g(j);if(k&&!i.hasClass(j,k))j.className=j.className+' '+k;return j;},removeClass:function(j,k){j=g(j);if(i.hasClass(j,k))j.className=j.className.replace(new RegExp('(^|\\s)'+k+'(?:\\s|$)','g'),'$1').replace(/\s+/g,' ').replace(/^\s*|\s*$/g,'');return j;},conditionClass:function(j,k,l){return (l?i.addClass:i.removeClass)(j,k);},toggleClass:function(j,k){return i.conditionClass(j,k,!i.hasClass(j,k));},shown:function(j){return !i.hasClass(j,h);},hide:function(j){return i.addClass(j,h);},show:function(j){return i.removeClass(j,h);},toggle:function(j){return i.toggleClass(j,h);},conditionShow:function(j,k){return i.conditionClass(j,h,!k);}};e.exports=i;});
__d("event-form-bubbling",[],function(a,b,c,d,e,f){a.Event=a.Event||function(){};a.Event.__inlineSubmit=function(g,event){var h=(a.Event.__getHandler&&a.Event.__getHandler(g,'submit'));return h?null:a.Event.__bubbleSubmit(g,event);};a.Event.__bubbleSubmit=function(g,event){if(document.documentElement.attachEvent){var h;while(h!==false&&(g=g.parentNode))h=g.onsubmit?g.onsubmit(event):a.Event.__fire&&a.Event.__fire(g,'submit',event);return h;}};},3);
__d("DataStore",[],function(a,b,c,d,e,f){var g={},h=1;function i(l){if(typeof l=='string'){return 'str_'+l;}else return 'elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[h++]))[0];}function j(l){var m=i(l);return g[m]||(g[m]={});}var k={set:function(l,m,n){if(!l)throw new TypeError('DataStore.set: namespace is required, got '+(typeof l));var o=j(l);o[m]=n;return l;},get:function(l,m,n){if(!l)throw new TypeError('DataStore.get: namespace is required, got '+(typeof l));var o=j(l),p=o[m];if(typeof p==='undefined'&&l.getAttribute){var q=l.getAttribute('data-'+m);p=(null===q)?undefined:q;}if((n!==undefined)&&(p===undefined))p=o[m]=n;return p;},remove:function(l,m){if(!l)throw new TypeError('DataStore.remove: namespace is required, got '+(typeof l));var n=j(l),o=n[m];delete n[m];return o;},purge:function(l){delete g[i(l)];}};e.exports=k;});
__d("UserAgent",[],function(a,b,c,d,e,f){var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u;function v(){if(g)return;g=true;var x=navigator.userAgent,y=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(x),z=/(Mac OS X)|(Windows)|(Linux)/.exec(x);r=/\b(iPhone|iP[ao]d)/.exec(x);s=/\b(iP[ao]d)/.exec(x);p=/Android/i.exec(x);t=/FBAN\/\w+;/i.exec(x);u=/Mobile/i.exec(x);q=!!(/Win64/.exec(x));if(y){h=y[1]?parseFloat(y[1]):NaN;if(h&&document.documentMode)h=document.documentMode;i=y[2]?parseFloat(y[2]):NaN;j=y[3]?parseFloat(y[3]):NaN;k=y[4]?parseFloat(y[4]):NaN;if(k){y=/(?:Chrome\/(\d+\.\d+))/.exec(x);l=y&&y[1]?parseFloat(y[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(z){if(z[1]){var aa=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(x);m=aa?parseFloat(aa[1].replace('_','.')):true;}else m=false;n=!!z[2];o=!!z[3];}else m=n=o=false;}var w={ie:function(){return v()||h;},ie64:function(){return w.ie()&&q;},firefox:function(){return v()||i;},opera:function(){return v()||j;},safari:function(){return v()||k;},chrome:function(){return v()||l;},windows:function(){return v()||n;},osx:function(){return v()||m;},linux:function(){return v()||o;},iphone:function(){return v()||r;},mobile:function(){return v()||(r||s||p||u);},nativeApp:function(){return v()||t;},android:function(){return v()||p;},ipad:function(){return v()||s;}};e.exports=w;});
__d("createObjectFrom",["hasArrayNature"],function(a,b,c,d,e,f){var g=b('hasArrayNature');function h(i,j){var k={},l=g(j);if(typeof j=='undefined')j=true;for(var m=i.length;m--;)k[i[m]]=l?j[m]:j;return k;}e.exports=h;});
__d("DOMQuery",["CSS","UserAgent","createArrayFrom","createObjectFrom","ge"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('UserAgent'),i=b('createArrayFrom'),j=b('createObjectFrom'),k=b('ge'),l=null,m={find:function(n,o){var p=m.scry(n,o);return p[0];},scry:function(n,o){if(!n||!n.getElementsByTagName)return [];var p=o.split(' '),q=[n];for(var r=0;r<p.length;r++){if(q.length===0)break;if(p[r]==='')continue;var s=p[r],t=p[r],u=[],v=false;if(s.charAt(0)=='^')if(r===0){v=true;s=s.slice(1);}else return [];s=s.replace(/\./g,' .');s=s.replace(/\#/g,' #');s=s.replace(/\[/g,' [');var w=s.split(' '),x=w[0]||'*',y=x=='*',z=w[1]&&w[1].charAt(0)=='#';if(z){var aa=k(w[1].slice(1),true);if(aa&&(y||aa.tagName.toLowerCase()==x))for(var ba=0;ba<q.length;ba++)if(v&&m.contains(aa,q[ba])){u=[aa];break;}else if(document==q[ba]||m.contains(q[ba],aa)){u=[aa];break;}}else{var ca=[],da=q.length,ea,fa=!v&&t.indexOf('[')<0&&document.querySelectorAll;for(var ga=0;ga<da;ga++){if(v){ea=[];var ha=q[ga].parentNode;while(m.isElementNode(ha)){if(y||ha.tagName.toLowerCase()==x)ea.push(ha);ha=ha.parentNode;}}else if(fa){ea=q[ga].querySelectorAll(t);}else ea=q[ga].getElementsByTagName(x);var ia=ea.length;for(var ja=0;ja<ia;ja++)ca.push(ea[ja]);}if(!fa)for(var ka=1;ka<w.length;ka++){var la=w[ka],ma=la.charAt(0)=='.',na=la.substring(1);for(ga=0;ga<ca.length;ga++){var oa=ca[ga];if(!oa)continue;if(ma){if(!g.hasClass(oa,na))delete ca[ga];continue;}else{var pa=la.slice(1,la.length-1);if(pa.indexOf('=')==-1){if(oa.getAttribute(pa)===null){delete ca[ga];continue;}}else{var qa=pa.split('='),ra=qa[0],sa=qa[1];sa=sa.slice(1,sa.length-1);if(oa.getAttribute(ra)!=sa){delete ca[ga];continue;}}}}}for(ga=0;ga<ca.length;ga++)if(ca[ga]){u.push(ca[ga]);if(v)break;}}q=u;}return q;},getText:function(n){if(m.isTextNode(n)){return n.data;}else if(m.isElementNode(n)){if(l===null){var o=document.createElement('div');l=o.textContent!=null?'textContent':'innerText';}return n[l];}else return '';},getSelection:function(){var n=window.getSelection,o=document.selection;if(n){return n()+'';}else if(o)return o.createRange().text;return null;},contains:function(n,o){n=k(n);o=k(o);if(!n||!o){return false;}else if(n===o){return true;}else if(m.isTextNode(n)){return false;}else if(m.isTextNode(o)){return m.contains(n,o.parentNode);}else if(n.contains){return n.contains(o);}else if(n.compareDocumentPosition){return !!(n.compareDocumentPosition(o)&16);}else return false;},getRootElement:function(){var n=null;if(window.Quickling&&Quickling.isActive())n=k('content');return n||document.body;},isNode:function(n){return !!(n&&(typeof Node=='object'?n instanceof Node:typeof n=="object"&&typeof n.nodeType=='number'&&typeof n.nodeName=='string'));},isNodeOfType:function(n,o){var p=i(o).join('|').toUpperCase().split('|'),q=j(p);return m.isNode(n)&&n.nodeName in q;},isElementNode:function(n){return m.isNode(n)&&n.nodeType==1;},isTextNode:function(n){return m.isNode(n)&&n.nodeType==3;},getDocumentScrollElement:function(n){n=n||document;var o=h.chrome()||h.safari();return !o&&n.compatMode==='CSS1Compat'?n.documentElement:n.body;}};e.exports=m;});
__d("DOMEvent",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this.event=i||window.event;this.target=this.event.target||this.event.srcElement;}g(h.prototype,{preventDefault:function(){var i=this.event;i.preventDefault?i.preventDefault():i.returnValue=false;return this;},stopPropagation:function(){var i=this.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=true;return this;},kill:function(){this.stopPropagation().preventDefault();return this;}});e.exports=h;});
__d("Parent",["CSS"],function(a,b,c,d,e,f){var g=b('CSS'),h={byTag:function(i,j){j=j.toUpperCase();while(i&&i.nodeName!=j)i=i.parentNode;return i;},byClass:function(i,j){while(i&&!g.hasClass(i,j))i=i.parentNode;return i;},byAttribute:function(i,j){while(i&&(!i.getAttribute||!i.getAttribute(j)))i=i.parentNode;return i;}};e.exports=h;});
__d("getObjectValues",["hasArrayNature"],function(a,b,c,d,e,f){var g=b('hasArrayNature');function h(i){var j=[];for(var k in i)j.push(i[k]);return j;}e.exports=h;});
__d("event-extensions",["event-form-bubbling","DataStore","DOMQuery","DOMEvent","ErrorUtils","Parent","UserAgent","$","copyProperties","getObjectValues"],function(a,b,c,d,e,f){b('event-form-bubbling');var g=b('DataStore'),h=b('DOMQuery'),i=b('DOMEvent'),j=b('ErrorUtils'),k=b('Parent'),l=b('UserAgent'),m=b('$'),n=b('copyProperties'),o=b('getObjectValues');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function p(y,z,aa){this.target=y;this.type=z;this.data=aa;}n(p.prototype,{getData:function(){this.data=this.data||{};return this.data;},stop:function(){new i(this).stopPropagation();return this;},prevent:function(){new i(this).preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){return new i(this).target||null;}});function q(y){if(y instanceof p)return y;y=y||window.event||{};if(!y._inherits_from_prototype)for(var z in Event.prototype)try{y[z]=Event.prototype[z];}catch(aa){}return y;}n(Event.prototype,{_inherits_from_prototype:true,getRelatedTarget:function(){var y=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return y?m(y):null;},getModifiers:function(){var y={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};y.access=l.osx()?y.control:y.alt;y.any=y.control||y.shift||y.alt||y.meta;return y;},isRightClick:function(){if(this.which)return this.which===3;return this.button&&this.button===2;},isMiddleClick:function(){if(this.which)return this.which===2;return this.button&&this.button===4;},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick();}});n(Event.prototype,p.prototype);n(Event,{listen:function(y,z,aa,ba){if(typeof y=='string')y=m(y);if(typeof ba=='undefined')ba=Event.Priority.NORMAL;if(typeof z=='object'){var ca={};for(var da in z)ca[da]=Event.listen(y,da,z[da],ba);return ca;}if(z.match(/^on/i))throw new TypeError("Bad event name `"+z+"': use `click', not `onclick'.");if(y.nodeName=='LABEL'&&z=='click'){var ea=y.getElementsByTagName('input');y=ea.length==1?ea[0]:y;}else if(y===window&&z==='scroll'){var fa=h.getDocumentScrollElement();if(fa!==document.documentElement&&fa!==document.body)y=fa;}var ga=g.get(y,s,{});if(u[z]){var ha=u[z];z=ha.base;aa=ha.wrap(aa);}v(y,z);var ia=ga[z];if(!(ba in ia))ia[ba]=[];var ja=ia[ba].length,ka=new x(aa,ia[ba],ja);ia[ba].push(ka);return ka;},stop:function(y){new i(y).stopPropagation();return y;},prevent:function(y){new i(y).preventDefault();return y;},kill:function(y){new i(y).kill();return false;},getKeyCode:function(event){event=new i(event).event;if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!r){var y=o(Event.Priority);y.sort(function(z,aa){return z-aa;});r=y;}return r;},fire:function(y,z,aa){var ba=new p(y,z,aa),ca;do{var da=Event.__getHandler(y,z);if(da)ca=da(ba);y=y.parentNode;}while(y&&ca!==false&&!ba.cancelBubble);return ca!==false;},__fire:function(y,z,event){var aa=Event.__getHandler(y,z);if(aa)return aa(q(event));},__getHandler:function(y,z){return g.get(y,Event.DATASTORE_KEY+z);},getPosition:function(y){y=new i(y).event;var z=h.getDocumentScrollElement(),aa=y.clientX+z.scrollLeft,ba=y.clientY+z.scrollTop;return {x:aa,y:ba};}});var r=null,s=Event.DATASTORE_KEY,t=function(y){return function(z){if(!h.contains(this,z.getRelatedTarget()))return y.call(this,z);};},u={mouseenter:{base:'mouseover',wrap:t},mouseleave:{base:'mouseout',wrap:t}},v=function(y,z){var aa='on'+z,ba=w.bind(y),ca=g.get(y,s);if(z in ca)return;ca[z]={};if(y.addEventListener){y.addEventListener(z,ba,false);}else if(y.attachEvent)y.attachEvent(aa,ba);g.set(y,s+z,ba);if(y[aa]){var da=y===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL,ea=y[aa];y[aa]=null;Event.listen(y,z,ea,da);}if(y.nodeName==='FORM'&&z==='submit')Event.listen(y,z,Event.__bubbleSubmit.curry(y),Event.Priority._BUBBLE);},w=function(event){event=q(event);var y=event.type;if(!g.get(this,s))throw new Error("Bad listenHandler context.");var z=g.get(this,s)[y];if(!z)throw new Error("No registered handlers for `"+y+"'.");if(y=='click'&&window.userAction){var aa=k.byTag(event.getTarget(),'a'),ba=window.userAction('click',aa,event).coalesce_namespace('evt_ext');if(window.ArbiterMonitor)window.ArbiterMonitor.initUA(ba,[aa]);}var ca=Event.getPriorities();for(var da=0;da<ca.length;da++){var ea=ca[da];if(ea in z){var fa=z[ea];for(var ga=0;ga<fa.length;ga++){if(!fa[ga])continue;var ha=fa[ga].fire(this,event);if(ha===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function x(y,z,aa){this._handler=y;this._container=z;this._index=aa;}n(x.prototype,{remove:function(){delete this._handler;delete this._container[this._index];},fire:function(y,event){return j.applyWithGuard(this._handler,y,[event],function(z){z.event_type=event.type;z.dom_element=y.name||y.id;z.category='eventhandler';});}});a.$E=f.$E=q;});
__d("evalGlobal",[],function(a,b,c,d,e,f){function g(h){if(typeof h!='string')throw new TypeError('JS sent to evalGlobal is not a string. Only strings are permitted.');if(!h)return;var i=document.createElement('script');try{i.appendChild(document.createTextNode(h));}catch(j){i.text=h;}var k=document.getElementsByTagName('head')[0]||document.documentElement;k.appendChild(i);k.removeChild(i);}e.exports=g;});
__d("HTML",["function-extensions","Bootloader","UserAgent","copyProperties","createArrayFrom","evalGlobal"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Bootloader'),h=b('UserAgent'),i=b('copyProperties'),j=b('createArrayFrom'),k=b('evalGlobal');function l(m){if(m&&m.__html)m=m.__html;if(!(this instanceof l)){if(m instanceof l)return m;return new l(m);}this._content=m;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._rootNode=null;return this;}l.isHTML=function(m){return m&&(m instanceof l||m.__html!==undefined);};l.replaceJSONWrapper=function(m){return m&&m.__html!==undefined?new l(m.__html):m;};i(l.prototype,{toString:function(){var m=this._content||'';if(this._extra_action)m+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return m;},setAction:function(m){this._extra_action=m;return this;},getAction:function(){this._fillCache();var m=function(){this._inline_js();k(this._extra_action);}.bind(this);if(this.getDeferred()){return m.defer.bind(m);}else return m;},setDeferred:function(m){this._defer=!!m;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){var m=this.getNodes();if(m.length===1){this._rootNode=m[0];}else{var n=document.createDocumentFragment();for(var o=0;o<m.length;o++)n.appendChild(m[o]);this._rootNode=n;}return this._rootNode;},_fillCache:function(){if(null!==this._nodes)return;var m=this._content;if(!m){this._nodes=[];return;}m=m.replace(/(<(\w+)[^>]*?)\/>/g,function(x,y,z){return z.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?x:y+'></'+z+'>';});var n=m.trim().toLowerCase(),o=document.createElement('div'),p=false,q=(!n.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!n.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(n.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!n.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!n.indexOf('<td')||!n.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!n.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===q){o.className='__WRAPPER';if(h.ie()){q=[0,'<span style="display:none">&nbsp;</span>',''];p=true;}else q=[0,'',''];}o.innerHTML=q[1]+m+q[2];while(q[0]--)o=o.lastChild;if(p)o.removeChild(o.firstChild);o.className!='__WRAPPER';if(h.ie()){var r;if(!n.indexOf('<table')&&-1==n.indexOf('<tbody')){r=o.firstChild&&o.firstChild.childNodes;}else if(q[1]=='<table>'&&-1==n.indexOf('<tbody')){r=o.childNodes;}else r=[];for(var s=r.length-1;s>=0;--s)if(r[s].nodeName&&r[s].nodeName.toLowerCase()=='tbody'&&r[s].childNodes.length==0)r[s].parentNode.removeChild(r[s]);}var t=o.getElementsByTagName('script'),u=[];for(var v=0;v<t.length;v++)if(t[v].src){u.push(g.requestResource.bind(g,'js',t[v].src));}else u.push(k.bind(null,t[v].innerHTML));for(var v=t.length-1;v>=0;v--)t[v].parentNode.removeChild(t[v]);var w=function(){for(var x=0;x<u.length;x++)u[x]();};this._nodes=j(o.childNodes);this._inline_js=w;}});e.exports=l;});
__d("isScalar",[],function(a,b,c,d,e,f){function g(h){return (/string|number|boolean/).test(typeof h);}e.exports=g;});
__d("Intl",[],function(a,b,c,d,e,f){function g(i){if(typeof i!='string')return false;return i.match(new RegExp(g.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}g.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function h(i){var j=window.intl_locale_rewrites;if(j){var k=[],l=[];for(var m in j.patterns){var n=j.patterns[m];for(var o in j.meta){var p=new RegExp(o.slice(1,-1),'g'),q=j.meta[o];m=m.replace(p,q);n=n.replace(p,q);}k.push(m);l.push(n);}for(var r=0;r<k.length;r++){var s=new RegExp(k[r].slice(1,-1),'g');if(l[r]=='javascript'){i.replace(s,function(t){return t.slice(1).toLowerCase();});}else i=i.replace(s,l[r]);}}return i.replace(/\x01/g,'');}e.exports={endsInPunct:g,phonologicalRules:h};});
__d("tx",["Intl"],function(a,b,c,d,e,f){var g=b('Intl');function h(j,k){if(!k)return j;var l='\\{([^}]+)\\}('+g.endsInPunct.punct_char_class+'*)',m=new RegExp(l,'g'),n=[],o=j.replace(m,function(r,s,t){var u=k[s];if(u&&typeof u==='object'){n.push(u);return '\x17'+t;}return u+(g.endsInPunct(u)?'':t);}).split('\x17').map(g.phonologicalRules);if(o.length===1)return o[0];var p=[o[0]];for(var q=0;q<n.length;q++)p.push(n[q],o[q+1]);return p;}function i(j,k){if(typeof _string_table=='undefined')return;j=_string_table[j];return h(j,k);}i._=h;e.exports=i;});
__d("DOM",["event-extensions","CSS","DOMQuery","HTML","UserAgent","$","copyProperties","createArrayFrom","isScalar","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DOMQuery'),i=b('HTML'),j=b('UserAgent'),k=b('$'),l=b('copyProperties'),m=b('createArrayFrom'),n=b('isScalar'),o=b('tx'),p='js_',q=0,r={};l(r,h);l(r,{create:function(u,v,w){var x=document.createElement(u);if(v)r.setAttributes(x,v);if(w!=null)r.setContent(x,w);return x;},setAttributes:function(u,v){if(v.type)u.type=v.type;for(var w in v){var x=v[w],y=(/^on/i).test(w);if(w=='type'){continue;}else if(w=='style'){if(typeof x=='string'){u.style.cssText=x;}else l(u.style,x);}else if(y){Event.listen(u,w.substr(2),x);}else if(w in u){u[w]=x;}else if(u.setAttribute)u.setAttribute(w,x);}},prependContent:function(u,v){return s(v,u,function(w){u.firstChild?u.insertBefore(w,u.firstChild):u.appendChild(w);});},insertAfter:function(u,v){var w=u.parentNode;return s(v,w,function(x){u.nextSibling?w.insertBefore(x,u.nextSibling):w.appendChild(x);});},insertBefore:function(u,v){var w=u.parentNode;return s(v,w,function(x){w.insertBefore(x,u);});},setContent:function(u,v){r.empty(u);return r.appendContent(u,v);},appendContent:function(u,v){return s(v,u,function(w){u.appendChild(w);});},replace:function(u,v){var w=u.parentNode;return s(v,w,function(x){w.replaceChild(x,u);});},remove:function(u){u=k(u);if(u.parentNode)u.parentNode.removeChild(u);},empty:function(u){u=k(u);while(u.firstChild)r.remove(u.firstChild);},getID:function(u){var v=u.id;if(!v){v=p+q++;u.id=v;}return v;}});function s(u,v,w){u=i.replaceJSONWrapper(u);if(u instanceof i&&''===v.innerHTML&&-1===u.toString().indexOf('<scr'+'ipt')){var x=j.ie();if(!x||(x>7&&!h.isNodeOfType(v,['table','tbody','thead','tfoot','tr','select','fieldset']))){var y=x?'<em style="display:none;">&nbsp;</em>':'';v.innerHTML=y+u;x&&v.removeChild(v.firstChild);return m(v.childNodes);}}else if(h.isTextNode(v)){v.data=u;return [u];}var z=document.createDocumentFragment(),aa,ba=[],ca=[];if(!Array.isArray(u))u=[u];for(var da=0;da<u.length;da++){aa=i.replaceJSONWrapper(u[da]);if(aa instanceof i){ca.push(aa.getAction());var ea=aa.getNodes();for(var fa=0;fa<ea.length;fa++){ba.push(ea[fa]);z.appendChild(ea[fa]);}}else if(n(aa)){var ga=document.createTextNode(aa);ba.push(ga);z.appendChild(ga);}else if(h.isNode(aa)){ba.push(aa);z.appendChild(aa);}}w(z);ca.forEach(function(ha){ha();});return ba;}function t(u){function v(w){return r.create('div',{},w).innerHTML;}return function(w,x){var y={};if(x)for(var z in x)y[z]=v(x[z]);return i(u(w,y));};}r.tx=t(o);r.tx._=r._tx=t(o._);e.exports=r;});
__d("Style",["DOMQuery","ErrorUtils","$"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('ErrorUtils'),i=b('$');function j(m){return m.replace(/([A-Z])/g,'-$1').toLowerCase();}function k(m,n){var o=l.get(m,n);return (o==='auto'||o==='scroll');}var l={set:function(m,n,o){switch(n){case 'opacity':m.style.opacity=o;m.style.filter=o!==''?'alpha(opacity='+o*100+')':'';break;case 'float':m.style.cssFloat=m.style.styleFloat=o;break;case 'width':case 'height':if(parseInt(o,10)<0)h.applyWithGuard(function(q,r){throw new Error('Style.set: "'+q+'" argument is invalid: "'+r+'"');},l,[n,o]);default:n=n.replace(/-(.)/g,function(q,r){return r.toUpperCase();});try{m.style[n]=o;}catch(p){throw new Error('Style.set: "'+n+'" argument is invalid: "'+o+'"');}}return m;},get:function(m,n){m=i(m);n=n.replace(/-(.)/g,function(p,q){return q.toUpperCase();});var o;if(window.getComputedStyle){o=window.getComputedStyle(m,null);if(o)return o.getPropertyValue(j(n));}if(document.defaultView&&document.defaultView.getComputedStyle){o=document.defaultView.getComputedStyle(m,null);if(o)return o.getPropertyValue(j(n));if(n=="display")return "none";}if(m.currentStyle)return m.currentStyle[n];return m.style&&m.style[n];},getFloat:function(m,n){return parseFloat(l.get(m,n),10);},getOpacity:function(m){m=i(m);var n=l.get(m,'filter'),o=null;if(n&&(o=/(\d+(?:\.\d+)?)/.exec(n))){return parseFloat(o.pop())/100;}else if(n=l.get(m,'opacity')){return parseFloat(n);}else return 1;},isFixed:function(m){while(m&&m!==document.documentElement){if(l.get(m,'position')==='fixed')return true;m=m.parentNode;}return false;},getScrollParent:function(m){if(!m)return null;while(m!==document.body){if(k(m,'overflow')||k(m,'overflowY')||k(m,'overflowX'))return m;m=m.parentNode;}return window;}};e.exports=l;});
__d("Animation",["CSS","DOM","Style","UserAgent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('UserAgent');function k(l){if(a==this){return new k(l);}else{this.obj=l;this._reset_state();this.queue=[];this.last_attr=null;}}k.resolution=20;k.offset=0;k.prototype._reset_state=function(){this.state={attrs:{},duration:500};};k.prototype.stop=function(){this._reset_state();this.queue=[];return this;};k.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var l=document.createElement('div');l.style.padding='0px';l.style.margin='0px';l.style.border='0px';l.__animation_refs=1;var m=this.obj.childNodes;while(m.length)l.appendChild(m[0]);this.obj.appendChild(l);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=l;this._refresh_container();};k.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};k.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var l=this.container_div.childNodes;while(l.length)this.obj.appendChild(l[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};k.ATTR_TO=1;k.ATTR_BY=2;k.ATTR_FROM=3;k.prototype._attr=function(l,m,n){l=l.replace(/-[a-z]/gi,function(p){return p.substring(1).toUpperCase();});var o=false;switch(l){case 'background':this._attr('backgroundColor',m,n);return this;case 'margin':m=k.parse_group(m);this._attr('marginBottom',m[0],n);this._attr('marginLeft',m[1],n);this._attr('marginRight',m[2],n);this._attr('marginTop',m[3],n);return this;case 'padding':m=k.parse_group(m);this._attr('paddingBottom',m[0],n);this._attr('paddingLeft',m[1],n);this._attr('paddingRight',m[2],n);this._attr('paddingTop',m[3],n);return this;case 'backgroundColor':case 'borderColor':case 'color':m=k.parse_color(m);break;case 'opacity':m=parseFloat(m,10);break;case 'height':case 'width':if(m=='auto'){o=true;}else m=parseInt(m,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':m=parseInt(m,10);break;default:throw new Error(l+' is not a supported attribute!');}if(this.state.attrs[l]===undefined)this.state.attrs[l]={};if(o)this.state.attrs[l].auto=true;switch(n){case k.ATTR_FROM:this.state.attrs[l].start=m;break;case k.ATTR_BY:this.state.attrs[l].by=true;case k.ATTR_TO:this.state.attrs[l].value=m;break;}};k._get_box_width=function(l){var m=parseInt(i.get(l,'paddingLeft'),10),n=parseInt(i.get(l,'paddingRight'),10),o=parseInt(i.get(l,'borderLeftWidth'),10),p=parseInt(i.get(l,'borderRightWidth'),10);return l.offsetWidth-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k._get_box_height=function(l){var m=parseInt(i.get(l,'paddingTop'),10),n=parseInt(i.get(l,'paddingBottom'),10),o=parseInt(i.get(l,'borderTopWidth'),10),p=parseInt(i.get(l,'borderBottomWidth'),10);return l.offsetHeight-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k.prototype.to=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_TO);}else{this._attr(l,m,k.ATTR_TO);this.last_attr=l;}return this;};k.prototype.by=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_BY);}else{this._attr(l,m,k.ATTR_BY);this.last_attr=l;}return this;};k.prototype.from=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_FROM);}else{this._attr(l,m,k.ATTR_FROM);this.last_attr=l;}return this;};k.prototype.duration=function(l){this.state.duration=l?l:0;return this;};k.prototype.checkpoint=function(l,m){if(l===undefined)l=1;this.state.checkpoint=l;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=m;return this;};k.prototype.blind=function(){this.state.blind=true;return this;};k.prototype.hide=function(){this.state.hide=true;return this;};k.prototype.show=function(){this.state.show=true;return this;};k.prototype.ease=function(l){this.state.ease=l;return this;};k.prototype.go=function(){var l=(new Date()).getTime();this.queue.push(this.state);for(var m=0;m<this.queue.length;m++){this.queue[m].start=l-k.offset;if(this.queue[m].checkpoint)l+=this.queue[m].checkpoint*this.queue[m].duration;}k.push(this);return this;};k.prototype._show=function(){g.show(this.obj);};k.prototype._hide=function(){g.hide(this.obj);};k.prototype._frame=function(l){var m=true,n=false,o=false,p;function q(aa){return document.documentElement[aa]||document.body[aa];}for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(s.start>l){m=false;continue;}if(s.checkpointcb){this._callback(s.checkpointcb,l-s.start);s.checkpointcb=null;}if(s.started===undefined){if(s.show)this._show();for(var t in s.attrs){if(s.attrs[t].start!==undefined)continue;switch(t){case 'backgroundColor':case 'borderColor':case 'color':p=k.parse_color(i.get(this.obj,t=='borderColor'?'borderLeftColor':t));if(s.attrs[t].by){s.attrs[t].value[0]=Math.min(255,Math.max(0,s.attrs[t].value[0]+p[0]));s.attrs[t].value[1]=Math.min(255,Math.max(0,s.attrs[t].value[1]+p[1]));s.attrs[t].value[2]=Math.min(255,Math.max(0,s.attrs[t].value[2]+p[2]));}break;case 'opacity':p=i.getOpacity(this.obj);if(s.attrs[t].by)s.attrs[t].value=Math.min(1,Math.max(0,s.attrs[t].value+p));break;case 'height':p=k._get_box_height(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'width':p=k._get_box_width(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'scrollLeft':case 'scrollTop':p=(this.obj===document.body)?q(t):this.obj[t];if(s.attrs[t].by)s.attrs[t].value+=p;s['last'+t]=p;break;default:p=parseInt(i.get(this.obj,t),10)||0;if(s.attrs[t].by)s.attrs[t].value+=p;break;}s.attrs[t].start=p;}if((s.attrs.height&&s.attrs.height.auto)||(s.attrs.width&&s.attrs.width.auto)){if(j.firefox()<3)o=true;this._destroy_container();for(var t in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(s.attrs[t])this.obj.style[t]=s.attrs[t].value+(typeof s.attrs[t].value=='number'?'px':'');if(s.attrs.height&&s.attrs.height.auto)s.attrs.height.value=k._get_box_height(this.obj);if(s.attrs.width&&s.attrs.width.auto)s.attrs.width.value=k._get_box_width(this.obj);}s.started=true;if(s.blind)this._build_container();}var u=(l-s.start)/s.duration;if(u>=1){u=1;if(s.hide)this._hide();}else m=false;var v=s.ease?s.ease(u):u;if(!n&&u!=1&&s.blind)n=true;if(o&&this.obj.parentNode){var w=this.obj.parentNode,x=this.obj.nextSibling;w.removeChild(this.obj);}for(var t in s.attrs)switch(t){case 'backgroundColor':case 'borderColor':case 'color':if(s.attrs[t].start[3]!=s.attrs[t].value[3]){this.obj.style[t]='rgba('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+','+k.calc_tween(v,s.attrs[t].start[3],s.attrs[t].value[3],false)+')';}else this.obj.style[t]='rgb('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+')';break;case 'opacity':i.set(this.obj,'opacity',k.calc_tween(v,s.attrs[t].start,s.attrs[t].value));break;case 'height':case 'width':this.obj.style[t]=v==1&&s.attrs[t].auto?'auto':k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var y=this.obj===document.body;p=y?q(t):this.obj[t];if(s['last'+t]!==p){delete s.attrs[t];}else{var z=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true);if(!y){z=this.obj[t]=z;}else{if(t=='scrollLeft'){a.scrollTo(z,q('scrollTop'));}else a.scrollTo(q('scrollLeft'),z);z=q(t);}s['last'+t]=z;}break;default:this.obj.style[t]=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;}if(u==1){this.queue.splice(r--,1);this._callback(s.ondone,l-s.start-s.duration);}}if(o)w[x?'insertBefore':'appendChild'](this.obj,x);if(!n&&this.container_div)this._destroy_container();return !m;};k.prototype.ondone=function(l){this.state.ondone=l;return this;};k.prototype._callback=function(l,m){if(l){k.offset=m;l.call(this);k.offset=0;}};k.calc_tween=function(l,m,n,o){return (o?parseInt:parseFloat)((n-m)*l+m,10);};k.parse_color=function(l){var m=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(l);if(m){return [parseInt(m[1].length==1?m[1]+m[1]:m[1],16),parseInt(m[2].length==1?m[2]+m[2]:m[2],16),parseInt(m[3].length==1?m[3]+m[3]:m[3],16),1];}else{var n=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(l);if(n){return [parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];}else if(l=='transparent'){return [255,255,255,0];}else throw 'Named color attributes are not supported.';}};k.parse_group=function(l){l=l.trim().split(/ +/);if(l.length==4){return l;}else if(l.length==3){return [l[0],l[1],l[2],l[1]];}else if(l.length==2){return [l[0],l[1],l[0],l[1]];}else return [l[0],l[0],l[0],l[0]];};k.push=function(l){if(!k.active)k.active=[];k.active.push(l);if(k.active.length===1){if(!k.requestAnimationFrame){var m=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(m)k.requestAnimationFrame=m.bind(a);}if(k.requestAnimationFrame){k.requestAnimationFrame(k._animate);}else k.timeout=setInterval(k._animate,k.resolution,false);}if(k.requestAnimationFrame)k._updateEndingTimer();k._animate(Date.now(),true);};k._updateEndingTimer=function(){if(!k.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var m=0;m<k.active.length;m++){var n=k.active[m];for(var o=0;o<n.queue.length;o++){var p=n.queue[o].start+n.queue[o].duration;if(p>l)l=p;}}if(k.timeout){clearTimeout(k.timeout);delete k.timeout;}var q=Date.now();if(l>q)k.timeout=setTimeout(k._animate.shield(),l-q,false);};k._animate=function(l,m){l=l||Date.now();for(var n=(m===true)?k.active.length-1:0;n<k.active.length;n++)try{if(!k.active[n]._frame(l))k.active.splice(n--,1);}catch(o){k.active.splice(n--,1);}if(k.active.length===0){if(k.timeout){if(k.requestAnimationFrame){clearTimeout(k.timeout);}else clearInterval(k.timeout);delete k.timeout;}}else if(k.requestAnimationFrame)k.requestAnimationFrame(k._animate);};k.ease={};k.ease.begin=function(l){return Math.sin(Math.PI/2*(l-1))+1;};k.ease.end=function(l){return Math.sin(.5*Math.PI*l);};k.ease.both=function(l){return .5*Math.sin(Math.PI*(l-.5))+.5;};k.prependInsert=function(l,m){k.insert(l,m,h.prependContent);};k.appendInsert=function(l,m){k.insert(l,m,h.appendContent);};k.insert=function(l,m,n){i.set(m,'opacity',0);n(l,m);new k(m).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=k;});
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("legacy:arbiter",["Arbiter"],function(a,b,c,d){a.Arbiter=b('Arbiter');},3);
__d("legacy:array-utils",["createArrayFrom","hasArrayNature"],function(a,b,c,d){a.$A=b('createArrayFrom');a.hasArrayNature=b('hasArrayNature');},3);
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;});
__d("AsyncResponse",["Bootloader","Env","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Env'),i=b('copyProperties'),j=b('tx');function k(l,m){i(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:m||null,request:l||null,silentError:false,is_last:true});return this;}i(k,{defaultErrorHandler:function(l){try{if(!l.silentError){k.verboseErrorHandler(l);}else l.logErrorByGroup('silent',10);}catch(m){alert(l);}},verboseErrorHandler:function(l){try{var n=l.getErrorSummary(),o=l.getErrorDescription();l.logErrorByGroup('popup',10);if(l.silentError&&o=='')o="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";g.loadModules(['Dialog'],function(p){new p().setTitle(n).setBody(o).setButtons([p.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(m){alert(l);}}});i(k.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(l){l=(l===undefined?null:l);this.errorSummary=l;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(l,m){if(window.send_error_signal){var n={err_code:this.error,vip:(h.vip||'-')};if(m){n.duration=m.duration;n.xfb_ip=m.xfb_ip;}var o=this.request.getURI();n.path=o||'-';n.aid=this.request.userActionID;if(o&&o.indexOf('scribe_endpoint.php')!=-1)l='async_error_double';send_error_signal(l,JSON.stringify(n));}},logErrorByGroup:function(l,m){if(Math.floor(Math.random()*m)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+l);}else this.logError('async_error_logic_'+l);}});e.exports=k;});
__d("HTTPErrors",[],function(a,b,c,d,e,f){var g={get:bagofholding,getAll:bagofholding};e.exports=g;});
__d("JSCC",["isEmpty"],function(a,b,c,d,e,f){var g=b('isEmpty'),h={},i={};function j(m){var n,o=false;return function(){if(!o){n=m();o=true;}return n;};}function k(m,n){if(g(m))return;for(var o in m){h[o]=j(m[o]);if(n){if(!i[n])i[n]=[];i[n].push(o);}}}var l={get:function(m){if(!h[m])throw new Error('JSCC entry is missing');return h[m]();},init:function(m){k(m);},initForPagelet:function(m,n){k(n,m);},clearForPagelet:function(m){if(i[m]){for(var n=0;n<i[m].length;n++){var o=i[m][n];delete h[o];}delete i[m];}}};e.exports=l;});
__d("OnloadEvent",[],function(a,b,c,d,e,f){var g={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};e.exports=g;});
__d("Run",["Arbiter","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('OnloadEvent'),i=g.BEHAVIOR_STATE;function j(x){var y=a.CavalryLogger;y&&y.getInstance().setTimeStamp(x);}function k(){return !window.loading_page_chrome;}function l(x){var y=a.OnloadHooks;if(window.loaded&&y){y.runHook(x,'onlateloadhooks');}else q('onloadhooks',x);}function m(x){var y=a.OnloadHooks;if(window.afterloaded&&y){setTimeout(function(){y.runHook(x,'onlateafterloadhooks');},0);}else q('onafterloadhooks',x);}function n(x,y){if(y===undefined)y=k();y?q('onbeforeleavehooks',x):q('onbeforeunloadhooks',x);}function o(x){if(!window.onunload)window.onunload=function(){g.inform(h.ONUNLOAD,true,i);};q('onunloadhooks',x);}function p(x){q('onleavehooks',x);}function q(x,y){window[x]=(window[x]||[]).concat(y);}function r(x){window[x]=[];}function s(){g.inform(h.ONLOAD_DOMCONTENT,true,i);}a._domcontentready=s;function t(){var x=document,y=window;if(x.addEventListener){var z=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(z&&z[1]<525){var aa=setInterval(function(){if(/loaded|complete/.test(x.readyState)){s();clearInterval(aa);}},10);}else x.addEventListener("DOMContentLoaded",s,true);}else{var ba='javascript:void(0)';if(y.location.protocol=='https:')ba='//:';x.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+ba+'"><\/script\>');}var ca=y.onload;y.onload=function(){j('t_layout');ca&&ca();g.inform(h.ONLOAD,true,i);};y.onbeforeunload=function(){var da={};g.inform(h.ONBEFOREUNLOAD,da,i);if(!da.warn)g.inform('onload/exit',true);return da.warn;};}var u=g.registerCallback(function(){j('t_onload');g.inform(h.ONLOAD_CALLBACK,true,i);},[h.ONLOAD]),v=g.registerCallback(function(){j('t_domcontent');g.inform(h.ONLOAD_DOMCONTENT_CALLBACK,true,i);},[h.ONLOAD_DOMCONTENT]);t();var w={onLoad:l,onAfterLoad:m,onLeave:p,onBeforeUnload:n,onUnload:o,__domContentCallback:v,__onloadCallback:u,__removeHook:r};e.exports=w;});
__d("ServerJS",["function-extensions","ErrorUtils","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('ErrorUtils'),h=b('copyProperties');function i(){this._moduleMap={};this._relativeTo=null;}h(i.prototype,{handle:function(n){g.applyWithGuard(function(o){if(o.__guard)throw new Error('ServerJS.handle called on data that has already been handled');o.__guard=true;k(o.define||[],this._handleDefine,this);k(o.markup||[],this._handleMarkup,this);k(o.elements||[],this._handleElement,this);k(o.instances||[],this._handleInstance,this);k(o.require||[],this._handleRequire,this);},this,[].concat(n));},handlePartial:function(n){(n.instances||[]).forEach(l.curry(this._moduleMap,3));(n.markup||[]).forEach(l.curry(this._moduleMap,2));this.handle(n);},cleanup:function(){var n=[];for(var o in this._moduleMap)n.push(o);d.call(null,n,m);this._moduleMap={};},setRelativeTo:function(n){this._relativeTo=n;return this;},_handleDefine:function(n,o,p){define(n,o,function(){this._replaceTransportMarkers(p);return p;}.bind(this));},_handleRequire:function(n,o,p,q){var r=[n].concat(p||[]);d(r,function(s){q&&this._replaceTransportMarkers(q);if(o){if(!s[o])throw new TypeError('Module '+n+' has no method '+o);s[o].apply(s,q||[]);}}.bind(this));},_handleInstance:function(n,o,p,q){var r=null;if(o)r=function(s){this._replaceTransportMarkers(p);var t=Object.create(s.prototype);s.apply(t,p);return t;}.bind(this);define(n,o,r,0,null,q);},_handleMarkup:function(n,o,p){define(n,['HTML'],function(q){return q.replaceJSONWrapper(o).getRootNode();},0,null,p);},_handleElement:function(n,o,p,q){var r=q?[q]:[];define(n,r,function(s){var t=j(o,s);return t;},0,null,p);},_replaceTransportMarkers:function(n,o){var p=(typeof o!=='undefined')?n[o]:n,q;if(Array.isArray(p)){for(q=0;q<p.length;q++)this._replaceTransportMarkers(p,q);}else if(p&&typeof p=='object')if(p.__m){n[o]=b(p.__m);}else if(p.__e){n[o]=j(p.__e);}else if(p.__rel){n[o]=this._relativeTo;}else for(var r in p)this._replaceTransportMarkers(p,r);}});function j(n,o){var p,q,r;if(o){if(o.id==n){p=o;}else if(o.getElementsByTagName){q=o.getElementsByTagName('*');for(r=0;r<q.length;r++)if(q[r].id==n){p=q[r];break;}}else{q=o.childNodes;for(r=0;r<q.length;r++){p=j(n,q[r]);if(p)break;}}}else p=document.getElementById(n);return p;}function k(n,o,p){for(var q=0;q<n.length;q++)o.apply(p,[].concat(n[q]));}function l(n,o,p){var q=p[0];if(!(q in n))p[o]=(p[o]||0)+1;n[q]=true;}function m(){return {};}e.exports=i;});
__d("goURI",[],function(a,b,c,d,e,f){function g(h,i){h=h.toString();if(!i&&a.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(h);}else if(window.location.href==h){window.location.reload();}else window.location.href=h;}e.exports=g;});
__d("URI",["copyProperties","goURI"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('goURI');function i(j){if(!(this instanceof i))return new i(j||window.location.href);this.parse(j||'');}g(i,{getRequestURI:function(j,k){j=j===undefined||j;var l=a.PageTransitions;if(j&&l&&l.isInitialized()){return l.getCurrentURI(!!k).getQualifiedURI();}else return new i(window.location.href);},getMostRecentURI:function(){var j=a.PageTransitions;if(j&&j.isInitialized()){return j.getMostRecentURI().getQualifiedURI();}else return new i(window.location.href);},getNextURI:function(){var j=a.PageTransitions;if(j&&j.isInitialized()){return j.getNextURI().getQualifiedURI();}else return new i(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(j){if(!j)return {};var k={};j=j.replace(/%5B/ig,'[').replace(/%5D/ig,']');j=j.split('&');var l=Object.prototype.hasOwnProperty;for(var m=0,n=j.length;m<n;m++){var o=j[m].match(i.arrayQueryExpression);if(!o){var p=j[m].split('=');k[i.decodeComponent(p[0])]=p[1]===undefined?null:i.decodeComponent(p[1]);}else{var q=o[2].split(/\]\[|\[|\]/).slice(0,-1),r=o[1],s=i.decodeComponent(o[3]||'');q[0]=r;var t=k;for(var u=0;u<q.length-1;u++)if(q[u]){if(!l.call(t,q[u])){var v=q[u+1]&&!q[u+1].match(/^\d+$/)?{}:[];t[q[u]]=v;if(t[q[u]]!==v)return k;}t=t[q[u]];}else{if(q[u+1]&&!q[u+1].match(/^\d+$/)){t.push({});}else t.push([]);t=t[t.length-1];}if(t instanceof Array&&q[q.length-1]===''){t.push(s);}else t[q[q.length-1]]=s;}}return k;},implodeQuery:function(j,k,l){k=k||'';if(l===undefined)l=true;var m=[];if(j===null||j===undefined){m.push(l?i.encodeComponent(k):k);}else if(j instanceof Array){for(var n=0;n<j.length;++n)try{if(j[n]!==undefined)m.push(i.implodeQuery(j[n],k?(k+'['+n+']'):n,l));}catch(o){}}else if(typeof(j)=='object'){if(('nodeName' in j)&&('nodeType' in j)){m.push('{node}');}else for(var p in j)try{if(j[p]!==undefined)m.push(i.implodeQuery(j[p],k?(k+'['+p+']'):p,l));}catch(o){}}else if(l){m.push(i.encodeComponent(k)+'='+i.encodeComponent(j));}else m.push(k+'='+j);return m.join('&');},encodeComponent:function(j){return encodeURIComponent(j).replace(/%5D/g,"]").replace(/%5B/g,"[");},decodeComponent:function(j){return decodeURIComponent(j.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(j){var k=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(k.test(j)){return i.INVALID_DOMAIN;}else return j;}});g(i.prototype,{parse:function(j){var k=j.toString().match(i.expression);g(this,{protocol:k[3]||'',domain:i.sanitizeDomain(k[4]||''),port:k[6]||'',path:k[7]||'',query_s:k[9]||'',fragment:k[11]||''});return this;},setProtocol:function(j){this.protocol=j;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(j){this.query_s=i.implodeQuery(j);return this;},addQueryData:function(j){return this.setQueryData(g(this.getQueryData(),j));},removeQueryData:function(j){if(!Array.isArray(j))j=[j];var k=this.getQueryData();for(var l=0,m=j.length;l<m;++l)delete k[j[l]];return this.setQueryData(k);},getQueryData:function(){return i.explodeQuery(this.query_s);},setFragment:function(j){this.fragment=j;return this;},getFragment:function(){return this.fragment;},setDomain:function(j){this.domain=i.sanitizeDomain(j);return this;},getDomain:function(){return this.domain;},setPort:function(j){this.port=j;return this;},getPort:function(){return this.port;},setPath:function(j){this.path=j;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var j='';this.protocol&&(j+=this.protocol+'://');this.domain&&(j+=this.domain);this.port&&(j+=':'+this.port);if(this.domain&&!this.path)j+='/';this.path&&(j+=this.path);this.query_s&&(j+='?'+this.query_s);this.fragment&&(j+='#'+this.fragment);return j;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!i._facebookURIRegex)i._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||i._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){var j=a.Quickling;return j&&j.isActive()&&j.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var j=this.domain.split('.'),k=j.indexOf('facebook');return j.slice(k).join('.');},getUnqualifiedURI:function(){return new i(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var j=new i(this);if(!j.getDomain()){var k=i();j.setProtocol(k.getProtocol()).setDomain(k.getDomain()).setPort(k.getPort());}return j;},isSameOrigin:function(j){var k=j||window.location.href;if(!(k instanceof i))k=new i(k.toString());if(this.getProtocol()&&this.getProtocol()!=k.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=k.getDomain())return false;if(this.getPort()&&this.getPort()!=k.getPort())return false;return true;},go:function(j){h(this,j);},setSubdomain:function(j){var k=new i(this).getQualifiedURI(),l=k.getDomain().split('.');if(l.length<=2){l.unshift(j);}else l[0]=j;return k.setDomain(l.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var j=this.getDomain().split('.');if(j.length<=2){return '';}else return j[0];},setSecure:function(j){return this.setProtocol(j?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.exports=i;});
__d("XHR",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h={create:function(){try{return a.XMLHttpRequest?new a.XMLHttpRequest():new ActiveXObject("MSXML2.XMLHTTP.3.0");}catch(i){}},getAsyncParams:function(i){var j={__user:g.user,__a:1};if(i=='POST'&&g.fb_dtsg)j.fb_dtsg=g.fb_dtsg;if(g.fb_isb)j.fb_isb=g.fb_isb;return j;}};e.exports=h;});
__d("bind",[],function(a,b,c,d,e,f){function g(h,i){var j=Array.prototype.slice.call(arguments,2);if(typeof i!='string')return Function.prototype.bind.apply(i,[h].concat(j));function k(){var l=j.concat(Array.prototype.slice.call(arguments));if(h[i])return h[i].apply(h,l);}k.toString=function(){return 'bound lazily: '+h[i];};return k;}e.exports=g;});
__d("AsyncRequest",["event-extensions","Arbiter","AsyncDOM","AsyncResponse","Bootloader","CSS","Env","HTTPErrors","JSCC","Parent","Run","ServerJS","URI","UserAgent","XHR","bind","copyProperties","evalGlobal","ge","goURI","isEmpty","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncDOM'),i=b('AsyncResponse'),j=b('Bootloader'),k=b('CSS'),l=b('Env'),m=b('HTTPErrors'),n=b('JSCC'),o=b('Parent'),p=b('Run'),q=b('ServerJS'),r=b('URI'),s=b('UserAgent'),t=b('XHR'),u=b('bind'),v=b('copyProperties'),w=b('evalGlobal'),x=b('ge'),y=b('goURI'),z=b('isEmpty'),aa=b('tx');function ba(){try{return !window.loaded;}catch(ka){return true;}}function ca(ka){return ('upload' in ka)&&('onprogress' in ka.upload);}function da(ka){return 'withCredentials' in ka;}function ea(ka){return ka.status in {0:1,12029:1,12030:1,12031:1,12152:1};}function fa(ka){var la=!ka||typeof(ka)==='function';return la;}var ga=2,ha=ga;g.subscribe('page_transition',function(ka,la){ha=la.id;});function ia(ka){v(this,{transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,uploadProgressHandler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,interceptHandler:bagofholding,finallyHandler:bagofholding,abortHandler:bagofholding,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:[],remainingRetries:0,userActionID:'-'});this.option={asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,handleErrorAfterUnload:false};this.errorHandler=i.defaultErrorHandler;this.transportErrorHandler=u(this,'errorHandler');if(ka!==undefined)this.setURI(ka);}v(ia,{bootstrap:function(ka,la,ma){var na='GET',oa=true,pa={};if(ma||la&&(la.rel=='async-post'||la.getAttribute&&la.getAttribute('forcemethod')=='post')){na='POST';oa=false;if(ka){ka=r(ka);pa=ka.getQueryData();ka.setQueryData({});}}var qa=o.byClass(la,'stat_elem')||la;if(qa&&k.hasClass(qa,'async_saving'))return false;var ra=new ia(ka).setReadOnly(oa).setMethod(na).setData(pa).setNectarModuleDataSafe(la).setRelativeTo(la);if(la){ra.setHandler(function(ta){Event.fire(la,'success',{response:ta});});ra.setErrorHandler(function(ta){if(Event.fire(la,'error',{response:ta})!==false)i.defaultErrorHandler(ta);});}if(qa){ra.setStatusElement(qa);var sa=qa.getAttribute('data-status-class');sa&&ra.setStatusClass(sa);}if(la)Event.fire(la,'AsyncRequest/send',{request:ra});ra.send();return false;},post:function(ka,la){new ia(ka).setReadOnly(false).setMethod('POST').setData(la).send();return false;},getLastID:function(){return ga;},suppressOnloadToken:{},_inflight:[],_inflightCount:0,_inflightAdd:bagofholding,_inflightPurge:bagofholding,getInflightCount:function(){return this._inflightCount;},_inflightEnable:function(){if(s.ie()){v(ia,{_inflightAdd:function(ka){this._inflight.push(ka);},_inflightPurge:function(){ia._inflight=ia._inflight.filter(function(ka){return ka.transport&&ka.transport.readyState<4;});}});p.onUnload(function(){ia._inflight.forEach(function(ka){if(ka.transport&&ka.transport.readyState<4){ka.transport.abort();delete ka.transport;}});});}}});v(ia.prototype,{_dispatchResponse:function(ka){try{this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}if(this.initialHandler(ka)===false)return;clearTimeout(this.timer);if(ka.jscc_map){var ma=(eval)(ka.jscc_map);n.init(ma);}var na;if(this.handler)try{na=this._shouldSuppressJS(this.handler(ka));}catch(oa){ka.is_last&&this.finallyHandler(ka);throw oa;}if(!na)this._handleJSResponse(ka);ka.is_last&&this.finallyHandler(ka);}catch(la){}},_shouldSuppressJS:function(ka){return ka===ia.suppressOnloadToken;},_handleJSResponse:function(ka){var la=this.getRelativeTo(),ma=ka.domops,na=ka.jsmods,oa=new q().setRelativeTo(la);if(na&&(na.define||na.instances||na.markup)){oa.handle({define:na.define,instances:na.instances,markup:na.markup});delete na.define;delete na.instances;delete na.markup;}if(ma)h.invoke(ma,la);if(na)oa.handle(na);this._handleJSRegisters(ka,'onload');if(this.lid)g.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},g.BEHAVIOR_EVENT);this._handleJSRegisters(ka,'onafterload');},_handleJSRegisters:function(ka,la){var ma=ka[la];if(!ma)return;for(var na=0;na<ma.length;na++)try{(new Function(ma[na])).apply(this);}catch(oa){}},invokeResponseHandler:function(ka){if(typeof(ka.redirect)!=='undefined'){(function(){this.setURI(ka.redirect).send();}).bind(this).defer();return;}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler)return;if(typeof(ka.asyncResponse)!=='undefined'){if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}var la=ka.asyncResponse;if(la.inlinejs)w(la.inlinejs);if(la.lid){this._responseTime=Date.now();if(a.CavalryLogger)this.cavalry=a.CavalryLogger.getInstance(la.lid);this.lid=la.lid;}j.setResourceMap(la.resource_map);if(la.bootloadable)j.enableBootload(la.bootloadable);var ma;if(la.getError()&&!la.getErrorIsWarning()){var na=this.errorHandler.bind(this);ma=this._dispatchErrorResponse.bind(this,la,na);}else ma=this._dispatchResponse.bind(this,la);ma=ma.defer.bind(ma);var oa=false;if(this.preBootloadHandler)oa=this.preBootloadHandler(la);la.css=la.css||[];la.js=la.js||[];j.loadResources(la.css.concat(la.js),ma,oa,this.getURI());}else if(typeof(ka.transportError)!=='undefined'){if(this._xFbServer){this._invokeErrorHandler(1008);}else this._invokeErrorHandler(1012);}else this._invokeErrorHandler(1007);},_invokeErrorHandler:function(ka){if(ba()&&!this.getOption('handleErrorAfterUnload'))return;var la;if(this.responseText===''){la=1002;}else if(this._requestAborted){la=1011;}else{try{la=ka||this.transport.status||1004;}catch(ma){la=1005;}if(false===navigator.onLine)la=1006;}if(!this.transportErrorHandler)return;var na=this.transportErrorHandler.bind(this),oa,pa,qa=true;if(la===1006){pa="No Network Connection";oa="Your browser appears to be offline. Please check your internet connection and try again.";}else if(la>=300&&la<=399){pa="Redirection";oa="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";var ra=this.transport.getResponseHeader("Location");if(ra)y(ra,true);qa=true;}else{pa="Oops";oa="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');var sa=new i(this);v(sa,{error:la,errorSummary:pa,errorDescription:oa,silentError:qa});this._dispatchErrorResponse(sa,na);},_dispatchErrorResponse:function(ka,la){var ma=ka.getError();try{this.clearStatusIndicator();var oa=this._sendTimeStamp&&{duration:Date.now()-this._sendTimeStamp,xfb_ip:this._xFbServer||'-'};ka.logError('async_error',oa);if(!this._isRelevant()||ma===1010){this.abort();return;}if(ma==1357008||ma==1357007||ma==1442002||ma==1357001){var pa=ma==1357008||ma==1357007;this.interceptHandler(ka);this._displayServerDialog(ka,pa);}else if(this.initialHandler(ka)!==false){clearTimeout(this.timer);try{la(ka);}catch(qa){this.finallyHandler(ka);throw qa;}this.finallyHandler(ka);}}catch(na){}},_displayServerDialog:function(ka,la){var ma=ka.getPayload();if(ma.__dialog!==undefined){this._displayServerLegacyDialog(ka,la);return;}var na=ma.__dialogx;new q().handle(na);j.loadModules(['ConfirmationDialog'],function(oa){oa.setupConfirmation(ka,this);}.bind(this));},_displayServerLegacyDialog:function(ka,la){var ma=ka.getPayload().__dialog;j.loadModules(['Dialog'],function(na){var oa=new na(ma);if(la)oa.setHandler(this._displayConfirmationHandler.bind(this,oa));oa.setCancelHandler(function(){var pa=this.getServerDialogCancelHandler();try{pa&&pa(ka);}catch(qa){throw qa;}finally{this.finallyHandler(ka);}}.bind(this)).setCausalElement(this.relativeTo).show();}.bind(this));},_displayConfirmationHandler:function(ka){this.data.confirmed=1;v(this.data,ka.getFormData());this.send();},_handleJSONPResponse:function(ka){this.is_first=(this.is_first===undefined);var la=this._interpretResponse(ka);la.asyncResponse.is_first=this.is_first;la.asyncResponse.is_last=this.transport.hasFinished();this.invokeResponseHandler(la);if(this.transport.hasFinished())delete this.transport;},_handleXHRResponse:function(ka){var la;if(this.getOption('suppressEvaluation')){la={asyncResponse:new i(this,ka)};}else{var ma=ka.responseText,na=null;try{var pa=this._unshieldResponseText(ma);try{var qa=(eval)('('+pa+')');la=this._interpretResponse(qa);}catch(oa){na='excep';la={transportError:'eval() failed on async to '+this.getURI()};}}catch(oa){na='empty';la={transportError:oa.message};}if(na)a.send_error_signal&&a.send_error_signal('async_xport_resp',[(this._xFbServer?'1008_':'1012_')+na,this._xFbServer||'-',this.getURI(),ma.length,ma.substr(0,1600)].join(':'));}this.invokeResponseHandler(la);},_unshieldResponseText:function(ka){var la="for (;;);",ma=la.length;if(ka.length<=ma)throw new Error('Response too short on async to '+this.getURI());var na=0;while(ka.charAt(na)==" "||ka.charAt(na)=="\n")na++;na&&ka.substring(na,na+ma)==la;return ka.substring(na+ma);},_interpretResponse:function(ka){if(ka.redirect)return {redirect:ka.redirect};var la=new i(this);if(ka.__ar!=1){la.payload=ka;}else v(la,ka);return {asyncResponse:la};},_onStateChange:function(){try{if(this.transport.readyState==4){ia._inflightCount--;ia._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!=='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(la){}if(this.transport.status>=200&&this.transport.status<300){ia.lastSuccessTime=Date.now();this._handleXHRResponse(this.transport);}else if(s.safari()&&(typeof(this.transport.status)=='undefined')){this._invokeErrorHandler(1002);}else if(l.retry_ajax_on_network_error&&ea(this.transport)&&this.remainingRetries>0){this.remainingRetries--;delete this.transport;this.send(true);return;}else this._invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(ka){if(ba())return;delete this.transport;if(this.remainingRetries>0){this.remainingRetries--;this.send(true);}else{!this.getOption('suppressErrorAlerts');a.send_error_signal&&a.send_error_signal('async_xport_resp',[1007,this._xFbServer||'-',this.getURI(),ka.message].join(':'));this._invokeErrorHandler(1007);}}},_isMultiplexable:function(){if(this.getOption('jsonp')||this.getOption('useIframeTransport'))return false;if(!this.uri.isFacebookURI())return false;if(!this.getOption('asynchronous'))return false;return true;},handleResponse:function(ka){var la=this._interpretResponse(ka);this.invokeResponseHandler(la);},setMethod:function(ka){this.method=ka.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(ka){this.data=ka;return this;},_setDataHash:function(){if(this.method!='POST'||this.data.phstamp)return;var ka=r.implodeQuery(this.data).length,la='';for(var ma=0;ma<this.data.fb_dtsg.length;ma++)la+=this.data.fb_dtsg.charCodeAt(ma);this.data.phstamp='1'+la+ka;},setRawData:function(ka){this.rawData=ka;return this;},getData:function(){return this.data;},setContextData:function(ka,la,ma){ma=ma===undefined?true:ma;if(ma)this.context['_log_'+ka]=la;return this;},_setUserActionID:function(){var ka=a.ArbiterMonitor&&a.ArbiterMonitor.getUE()||'-';this.userActionID=(a.EagleEye&&a.EagleEye.getSessionID()||'-')+'/'+ka;},setURI:function(ka){var la=r(ka);if(this.getOption('useIframeTransport')&&!la.isFacebookURI())return this;if(!this._allowCrossOrigin&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!la.isSameOrigin())return this;this._setUserActionID();if(!ka||la.isEmpty()){if(a.send_error_signal&&a.get_error_stack){var ma={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};a.send_error_signal('async_error',JSON.stringify(ma));a.send_error_signal('async_xport_stack',[1013,window.location.href,null,a.get_error_stack()].join(':'));}return this;}this.uri=la;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(ka){this.initialHandler=ka;return this;},setHandler:function(ka){if(fa(ka))this.handler=ka;return this;},getHandler:function(){return this.handler;},setUploadProgressHandler:function(ka){if(fa(ka))this.uploadProgressHandler=ka;return this;},setErrorHandler:function(ka){if(fa(ka))this.errorHandler=ka;return this;},setTransportErrorHandler:function(ka){this.transportErrorHandler=ka;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(ka,la){if(fa(la)){this.timeout=ka;this.timeoutHandler=la;}return this;},resetTimeout:function(ka){if(!(this.timeoutHandler===null))if(ka===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var la=!this._allowCrossPageTransition;this.timeout=ka;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,la);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++ga;return this;},setInterceptHandler:function(ka){this.interceptHandler=ka;return this;},setFinallyHandler:function(ka){this.finallyHandler=ka;return this;},setAbortHandler:function(ka){this.abortHandler=ka;return this;},getServerDialogCancelHandler:function(){return this.serverDialogCancelHandler;},setServerDialogCancelHandler:function(ka){this.serverDialogCancelHandler=ka;return this;},setPreBootloadHandler:function(ka){this.preBootloadHandler=ka;return this;},setReadOnly:function(ka){if(!(typeof(ka)!='boolean'))this.readOnly=ka;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(ka){this.relativeTo=ka;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(ka){this.statusClass=ka;return this;},setStatusElement:function(ka){this.statusElement=ka;return this;},getStatusElement:function(){return x(this.statusElement);},_isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>ha;},clearStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.removeClass(ka,'async_saving');k.removeClass(ka,this.statusClass);}},addStatusIndicator:function(){var ka=this.getStatusElement();if(ka){k.addClass(ka,'async_saving');k.addClass(ka,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(ka){this.data[ka]=this.data[ka]||l[ka]||(x(ka)||{}).value;if(this.data[ka]!==undefined)return true;return false;},this);},setOption:function(ka,la){if(typeof(this.option[ka])!='undefined')this.option[ka]=la;return this;},getOption:function(ka){typeof(this.option[ka])=='undefined';return this.option[ka];},abort:function(){if(this.transport){var ka=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=true;this.transport.abort();this.setTransportErrorHandler(ka);}this.abortHandler();},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=true;this.transport.abort();}},setNectarData:function(ka){if(ka){if(this.data.nctr===undefined)this.data.nctr={};v(this.data.nctr,ka);}return this;},setNectarModuleDataSafe:function(ka){if(this.setNectarModuleData)this.setNectarModuleData(ka);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(ka){this._allowCrossPageTransition=!!ka;if(this.timer)this.resetTimeout(this.timeout);return this;},setAllowCrossOrigin:function(ka){this._allowCrossOrigin=!!ka;return this;},send:function(ka){ka=ka||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}v(this.data,t.getAsyncParams(this.method));if(!z(this.context)){v(this.data,this.context);this.data.ajax_log=1;}if(l.force_param)v(this.data,l.force_param);this._setUserActionID();if(this.getOption('bundle')&&this._isMultiplexable()){ja.schedule(this);return true;}this.setNewSerial();if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});this.finallyHandler=a.async_callback(this.finallyHandler,'final');var la,ma;if(this.method=='GET'||this.rawData){la=this.uri.addQueryData(this.data).toString();ma=this.rawData||'';}else{la=this.uri.toString();this._setDataHash();ma=r.implodeQuery(this.data);}if(this.transport)return false;if(this.getOption('jsonp')||this.getOption('useIframeTransport')){d(['JSONPTransport'],function(qa){this.transport=new qa(this.getOption('jsonp')?'jsonp':'iframe',this.uri,this._handleJSONPResponse.bind(this));this.transport.send();}.bind(this));return true;}var na=t.create();if(!na)return false;na.onreadystatechange=a.async_callback(this._onStateChange.bind(this),'xhr');if(this.uploadProgressHandler&&ca(na))na.upload.onprogress=this.uploadProgressHandler.bind(this);if(!ka)this.remainingRetries=this.getOption('retries');if(a.send_error_signal||a.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=na;try{this.transport.open(this.method,la,this.getOption('asynchronous'));}catch(oa){return false;}var pa=l.svn_rev;if(pa)this.transport.setRequestHeader('X-SVN-Rev',String(pa));if(!this.uri.isSameOrigin()&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')){if(!da(this.transport))return false;if(this.uri.isFacebookURI())this.transport.withCredentials=true;}if(this.method=='POST'&&!this.rawData)this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();this.transport.send(ma);if(this.timeout!==null)this.resetTimeout(this.timeout);ia._inflightCount++;ia._inflightAdd(this);return true;}});function ja(){this._requests=[];}v(ja,{multiplex:null,schedule:function(ka){if(!ja.multiplex){ja.multiplex=new ja();(function(){ja.multiplex.send();ja.multiplex=null;}).defer();}ja.multiplex.add(ka);}});v(ja.prototype,{add:function(ka){this._requests.push(ka);},send:function(){var ka=this._requests;if(!ka.length)return;var la;if(ka.length===1){la=ka[0];}else{var ma=ka.map(function(na){return [na.uri.getPath(),r.implodeQuery(na.data)];});la=new ia('/ajax/proxy.php').setAllowCrossPageTransition(true).setData({data:ma}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this));}la.setOption('bundle',false).send();},_handler:function(ka){var la=ka.getPayload().responses;if(la.length!==this._requests.length)return;for(var ma=0;ma<this._requests.length;ma++){var na=this._requests[ma],oa=na.uri.getPath();na.id=this.id;if(la[ma][0]!==oa){na.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+oa});continue;}na.handleResponse(la[ma][1]);}},_transportErrorHandler:function(ka){var la={transportError:ka.errorDescription},ma=this._requests.map(function(na){na.id=this.id;na.invokeResponseHandler(la);return na.uri.getPath();});}});e.exports=ia;});
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("legacy:css",["CSS"],function(a,b,c,d){a.CSS=b('CSS');},3);
__d("legacy:dom",["DOM"],function(a,b,c,d){a.DOM=b('DOM');},3);
__d("legacy:dom-core",["$","ge"],function(a,b,c,d){a.$=b('$');a.ge=b('ge');},3);
__d("UntrustedLink",["DOM","event-extensions","URI","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('event-extensions'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties');function l(m,n,o,p){this.dom=m;this.url=m.href;this.hash=n;this.func_get_params=p||function(){return {};};Event.listen(this.dom,'click',this.onclick.bind(this));Event.listen(this.dom,'mousedown',this.onmousedown.bind(this));Event.listen(this.dom,'mouseup',this.onmouseup.bind(this));Event.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(h.$E(o));}l.bootstrap=function(m,n,o,p){if(m.__untrusted)return;m.__untrusted=true;new l(m,n,o,p);};l.prototype.getRewrittenURI=function(){var m=k({u:this.url,h:this.hash},this.func_get_params(this.dom)),n=new i('/l.php');return n.setQueryData(m).setSubdomain('www').setProtocol('http');};l.prototype.onclick=function(){(function(){this.setHref(this.url);}).bind(this).defer(100);this.setHref(this.getRewrittenURI());};l.prototype.onmousedown=function(m){if(m.button==2)this.setHref(this.getRewrittenURI());};l.prototype.onmouseup=function(){this.setHref(this.getRewrittenURI());};l.prototype.onmouseout=function(){this.setHref(this.url);};l.prototype.setHref=function(m){if(j.ie()<9){var n=g.create('span');g.appendContent(this.dom,n);this.dom.href=m;g.remove(n);}else this.dom.href=m;};e.exports=l;});
__d("legacy:dom-untrusted",["UntrustedLink"],function(a,b,c,d){a.UntrustedLink=b('UntrustedLink');},3);
__d("legacy:env",["Env"],function(a,b,c,d){var e=b('Env');a.Env=e;},3);
__d("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
__d("LiveTimer",["CSS","DOM","UserAgent","tx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('UserAgent'),j=b('tx'),k={restart:function(l){this.serverTime=l;this.localStartTime=Date.now()/1000;this.updateTimeStamps();},getApproximateServerTime:function(){return (this.serverTime-this.localStartTime)*1000+Date.now();},updateTimeStamps:function(){k.timestamps=h.scry(document.body,'abbr.livetimestamp');k.startLoop(20000);},addTimeStamps:function(l){if(!l)return;k.timestamps=k.timestamps||[];if(h.isNodeOfType(l,'abbr')&&g.hasClass(l,'livetimestamp')){k.timestamps.push(l);}else{var m=h.scry(l,'abbr.livetimestamp');for(var n=0;n<m.length;++n)k.timestamps.push(m[n]);}k.startLoop(0);},startLoop:function(l){this.stop();this.timeout=setTimeout(function(){k.loop();},l);},stop:function(){clearTimeout(this.timeout);},updateNode:function(l,m){k.updateNode=(i.ie()<7)?bagofholding:h.setContent;k.updateNode(l,m);},loop:function(l){if(l)k.updateTimeStamps();var m=Math.floor(k.getApproximateServerTime()/1000),n=-1;k.timestamps&&k.timestamps.forEach(function(p){var q=p.getAttribute('data-utime'),r=k.renderRelativeTime(m,q);if(r.text)k.updateNode(p,r.text);if(r.next!=-1&&(r.next<n||n==-1))n=r.next;});if(n!=-1){var o=Math.max(20000,n*1000);k.timeout=setTimeout(function(){k.loop();},o);}},renderRelativeTime:function(l,m){var n={text:"",next:-1};if(l-m>(12*3600)||(new Date(l*1000).getDay()!=new Date(m*1000).getDay()))return n;var o=l-m,p=Math.floor(o/60),q=Math.floor(p/60);if(p<1){n.text="a few seconds ago";n.next=60-o%60;return n;}if(q<1){if(p==1){n.text="about a minute ago";}else n.text=j._("{number} minutes ago",{number:p});n.next=60-o%60;return n;}if(q!=11)n.next=3600-o%3600;if(q==1){n.text="about an hour ago";return n;}n.text=j._("{number} hours ago",{number:q});return n;}};e.exports=k;});
__d("legacy:live-timer",["LiveTimer"],function(a,b,c,d){a.LiveTimer=b('LiveTimer');},3);
__d("legacy:object-core-utils",["copyProperties","isEmpty"],function(a,b,c,d){var e=b('copyProperties');function f(g,h){return e(window[g]||(window[g]={}),h);}a.is_empty=b('isEmpty');a.add_properties=f;a.copyProperties=e;},3);
__d("legacy:parent",["Parent"],function(a,b,c,d){a.Parent=b('Parent');},3);
__d("DOMDimensions",["DOMQuery","Style"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('Style'),i={getElementDimensions:function(j){return {width:j.offsetWidth||0,height:j.offsetHeight||0};},getViewportDimensions:function(){var j=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,k=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:j,height:k};},getViewportWithoutScrollbarDimensions:function(){var j=(document&&document.documentElement&&document.documentElement.clientWidth)||(window&&window.innerWidth)||(document&&document.body&&document.body.clientWidth)||0,k=(document&&document.documentElement&&document.documentElement.clientHeight)||(window&&window.innerHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:j,height:k};},getDocumentDimensions:function(j){j=j||document;var k=g.getDocumentScrollElement(j),l=k.scrollWidth||0,m=k.scrollHeight||0;return {width:l,height:m};},measureElementBox:function(j,k,l,m,n){var o;switch(k){case 'left':case 'right':case 'top':case 'bottom':o=[k];break;case 'width':o=['left','right'];break;case 'height':o=['top','bottom'];break;default:throw Error('Invalid plane: '+k);}var p=function(q,r){var s=0;for(var t=0;t<o.length;t++)s+=parseInt(h.get(j,q+'-'+o[t]+r),10)||0;return s;};return (l?p('padding',''):0)+(m?p('border','-width'):0)+(n?p('margin',''):0);}};e.exports=i;});
__d("PopupWindow",["DOMDimensions","DOMQuery","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('DOMDimensions'),h=b('DOMQuery'),i=b('UserAgent'),j=b('copyProperties'),k={_opts:{allowShrink:true,strategy:'vector',timeout:100,widthElement:null},init:function(l){j(k._opts,l);setInterval(k._resizeCheck,k._opts.timeout);},_resizeCheck:function(){var l=g.getViewportDimensions(),m=k._getDocumentSize(),n=m.height-l.height,o=m.width-l.width;if(o<0&&!k._opts.widthElement)o=0;o=o>1?o:0;if(!k._opts.allowShrink&&n<0)n=0;if(n||o)try{window.console&&window.console.firebug;window.resizeBy(o,n);if(o)window.moveBy(o/-2,0);}catch(p){}},_getDocumentSize:function(){var l=g.getDocumentDimensions();if(k._opts.strategy==='offsetHeight')l.height=document.body.offsetHeight;if(k._opts.widthElement){var m=h.scry(document.body,k._opts.widthElement)[0];if(m)l.width=g.getElementDimensions(m).width;}if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>l.height)l.height=Dialog.max_bottom;return l;},open:function(l,m,n){var o=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,p=typeof window.screenY!='undefined'?window.screenY:window.screenTop,q=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,r=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),s=parseInt(o+((q-n)/2),10),t=parseInt(p+((r-m)/2.5),10),u=('width='+n+',height='+m+',left='+s+',top='+t);return window.open(l,'_blank',u);}};e.exports=k;});
__d("legacy:popup-resizer",["PopupWindow"],function(a,b,c,d){a.PopupResizer=b('PopupWindow');},3);
__d("legacy:uri",["URI"],function(a,b,c,d){a.URI=b('URI');},3);
var PlatformOptInPopup=function(){};copyProperties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(a,b,c){if(!a)a='generic';if(!b)b='opt.in';var d=new URI(PlatformOptInPopup.DIALOG_URL);d.addQueryData({social_plugin:a,method:b,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(c)d.addQueryData(c);return PopupResizer.open(d.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
__d("legacy:Style",["Style"],function(a,b,c,d){a.Style=b('Style');},3);
__d("legacy:ua",["UserAgent"],function(a,b,c,d){a.ua=b('UserAgent');},3);
__d("DOMPosition",["DOMQuery"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h={getScrollPosition:function(){var i=g.getDocumentScrollElement();return {x:i.scrollLeft,y:i.scrollTop};},getElementPosition:function(i){if(!i)return;if(!('getBoundingClientRect' in i))return {x:0,y:0};var j=i.getBoundingClientRect(),k=document.documentElement,l=Math.round(j.left)-k.clientLeft,m=Math.round(j.top)-k.clientTop;return {x:l,y:m};}};e.exports=h;});
__d("Vector",["event-extensions","DOMDimensions","DOMPosition","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOMDimensions'),h=b('DOMPosition'),i=b('copyProperties');function j(k,l,m){i(this,{x:parseFloat(k),y:parseFloat(l),domain:m||'pure'});}i(j.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(k,l){if(arguments.length==1){if(k.domain!='pure')k=k.convertTo(this.domain);return this.add(k.x,k.y);}var m=parseFloat(k),n=parseFloat(l);return new j(this.x+m,this.y+n,this.domain);},mul:function(k,l){if(typeof l=="undefined")l=k;return new j(this.x*k,this.y*l,this.domain);},sub:function(k,l){if(arguments.length==1){return this.add(k.mul(-1));}else return this.add(-k,-l);},distanceTo:function(k){return this.sub(k).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(k){if(k!='pure'&&k!='viewport'&&k!='document')return new j(0,0);if(k==this.domain)return new j(this.x,this.y,this.domain);if(k=='pure')return new j(this.x,this.y);if(this.domain=='pure')return new j(0,0);var l=j.getScrollPosition('document'),m=this.x,n=this.y;if(this.domain=='document'){m-=l.x;n-=l.y;}else{m+=l.x;n+=l.y;}return new j(m,n,k);},setElementPosition:function(k){var l=this.convertTo('document');k.style.left=parseInt(l.x)+'px';k.style.top=parseInt(l.y)+'px';return this;},setElementDimensions:function(k){return this.setElementWidth(k).setElementHeight(k);},setElementWidth:function(k){k.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(k){k.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(k){if(k==document.body){window.scrollBy(this.x,this.y);}else{k.scrollLeft+=this.x;k.scrollTop+=this.y;}return this;}});i(j,{getEventPosition:function(k,l){l=l||'document';var m=Event.getPosition(k),n=new j(m.x,m.y,'document');return n.convertTo(l);},getScrollPosition:function(k){k=k||'document';var l=h.getScrollPosition();return new j(l.x,l.y,'document').convertTo(k);},getElementPosition:function(k,l){l=l||'document';var m=h.getElementPosition(k);return new j(m.x,m.y,'viewport').convertTo(l);},getElementDimensions:function(k){var l=g.getElementDimensions(k);return new j(l.width,l.height);},getViewportDimensions:function(){var k=g.getViewportDimensions();return new j(k.width,k.height,'viewport');},getDocumentDimensions:function(k){var l=g.getDocumentDimensions(k);return new j(l.width,l.height,'document');},deserialize:function(k){var l=k.split(',');return new j(l[0],l[1]);}});e.exports=j;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("array-extensions",[],function(a,b,c,d,e,f){Array.prototype.contains=function(g){return this.indexOf(g)!=-1;};Array.prototype.remove=function(g){var h=this.indexOf(g);if(h!=-1)this.splice(h,1);};},3);
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var a=parent.frames.length-1;a>=0;a--)try{if(parent.frames[a]&&parent.frames[a].Arbiter&&parent.frames[a].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[a].Arbiter);}catch(b){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.forEach(function(b){b.inform.apply(b,a);});}};
WindowComm={_callbacks:{},makeHandler:function(a,b){b=b||'opener';var c='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[c]=a;return new URI('/connect/window_comm.php').setQueryData({_id:c,_relation:b}).getQualifiedURI().toString();},_recv:function(a){var b=new URI(a).getQueryData();WindowComm._callbacks[b._id](b);}};
function ConnectSocialWidget(a,b){ConnectSocialWidget.setInstance(b,this);ConnectSocialWidget.delayUntilDisplayed(function(){this.initializeObject.call(this,a,b);}.bind(this));}copyProperties(ConnectSocialWidget,{OPT_IN_FACEBOOK_APP_ID:'127760087237610',TYPE_ACTIVITY:'A',TYPE_RECOMMENDATIONS:'R',TYPE_LIKEBOX:'L',instances:{},setInstance:function(a,b){ConnectSocialWidget.instances[a]=b;},getInstance:function(a){return ConnectSocialWidget.instances[a];},popups:{},login:function(a,b){ConnectSocialWidget.popups[b]={popup:PlatformOptInPopup.open('login','opt.in')};},aDelayedFunctions:[],delayUntilDisplayed:function(a){ConnectSocialWidget.aDelayedFunctions.push(a);if(ConnectSocialWidget.aDelayedFunctions.length===1){if(!ConnectSocialWidget.ndTestDim){var b=document.createElement('div'),c={position:'absolute',width:'1px',height:'1px',overflow:'hidden',top:'0px'};for(var d in c)if(typeof c[d]==='string')Style.set(b,d,c[d]);document.body.appendChild(b);ConnectSocialWidget.ndTestDim=b;}ConnectSocialWidget.testForDisplay();}},testForDisplay:function(){var a=Vector2.getElementDimensions(ConnectSocialWidget.ndTestDim).y;if(a!==0){ConnectSocialWidget.aDelayedFunctions.forEach(function(b){b();});ConnectSocialWidget.aDelayedFunctions=[];}else ConnectSocialWidget.testForDisplay.defer(100);},listenForLogin:function(){if(!ConnectSocialWidget.listenerAttached){Arbiter.subscribe('platform/socialplugins/login',function(a){if(a.user!==Env.user)document.location.reload();});ConnectSocialWidget.listenerAttached=true;}}});copyProperties(ConnectSocialWidget.prototype,{initializeObject:function(a,b){var c=DOM.scry(document.body,a.sOverflowContainerSelector)[0],d=DOM.scry(c,'.fbConnectWidgetFooter')[0],e=d?Vector2.getElementDimensions(d).y:0,f=a.sOverflowItemsSelector,g=DOM.scry(document.body,a.sStreamContainerSelector)[0];this.fRemoveOverflowElements=this.removeOverflowElements.bind(this,c,g,f,-e);copyProperties(this,{bInitialized:true,sWidgetId:b,iFooterHeight:e,ndTop:c,ndFooter:d,ndContentContainer:g,oQueryParams:new URI(window.location.href).getQueryData(),bComboMode:a.bComboMode,sOverflowItemsSelector:f});this.oQueryParams.user=Env.user;this.fRemoveOverflowElements();Style.set(g,'visibility','visible');animation(g).from('opacity',0).to('opacity',1).duration(200).go();ConnectSocialWidget.listenForLogin();},getElementTop:function(a){var b=DOM.scry(a,'^'+this.sOverflowItemsSelector);return b[0];},getItemPosition:function(a){var b=DOM.scry(this.ndContentContainer,this.sOverflowItemsSelector),c=b.length,d=b.indexOf(a)+1;return d+'/'+c;},removeOverflowElements:function(a,b,c,d,e){var f,g=c?DOM.scry(b,c):$A(b.childNodes);if(!e){var d=d||0,h=Vector2.getElementDimensions(a).y+d,i=Vector2.getElementPosition(a).y;e=h+i;}while(g.length>0&&(f=$(g.pop()))&&(Vector2.getElementDimensions(f).y+Vector2.getElementPosition(f).y)>e)DOM.remove(f);},login:function(){ConnectSocialWidget.login(this.appID,this.sWidgetId);},toggleLogin:function(){DOM.scry(this.ndTop,'.fbToggleLogin').forEach(function(a){CSS.toggle(a);});this.fRemoveOverflowElements();}});function ActivityWidget(a,b){this.parent.construct(this,a,b);}Class.extend(ActivityWidget,'ConnectSocialWidget');ActivityWidget.REQUEST_INTERVAL=15*1000;ActivityWidget.ACTIVITY_HEIGHT=45;ActivityWidget.MAX_INTERVAL=30;ActivityWidget.MAX_ITEMS=24;copyProperties(ActivityWidget.prototype,{initializeObject:function(a,b){this.parent.initializeObject.call(this,a,b);this.oQueryParams.nb_activities=Math.min(ActivityWidget.MAX_ITEMS,Math.round((this.oQueryParams.height||300)/ActivityWidget.ACTIVITY_HEIGHT));this.oQueryParams.newest=a.iNewestStoryTime||0;},removeOverflowElements:function(){if(this.bComboMode&&!this.bFirstRound){this.bFirstRound=true;var a=Vector2.getElementPosition(this.ndTop).y,b=Vector2.getElementDimensions(document.body).y-(a+this.iFooterHeight),c=Math.round(b/2),d=$A(arguments);d[d.length]=c;ConnectSocialWidget.prototype.removeOverflowElements.apply(this,d);}else ConnectSocialWidget.prototype.removeOverflowElements.apply(this,arguments);},hasFriendsActivity:function(){return DOM.scry(this.ndContentContainer,'div.fbFriendsActivity')[0].childNodes.length>0;},hasContent:function(){return DOM.scry(this.ndTop,this.sOverflowItemsSelector).length>0;},getEmptyMessage:function(){return DOM.find(this.ndContentContainer,'div.fbEmptyWidget');},showEmptyMessage:function(){var a=this.getEmptyMessage();if(a)CSS.show(a);}});function RecommendationsWidget(a,b){this.parent.construct(this,a,b);}Class.extend(RecommendationsWidget,'ConnectSocialWidget');copyProperties(RecommendationsWidget.prototype,{initializeObject:function(a,b){this.parent.initializeObject.call(this,a,b);this.sActivityParent=a.sActivityParent;this.cropImages(DOM.scry(this.ndContentContainer,".fbImageContainer img"),RecommendationsWidget.IMAGE_HEIGHT,true);this.cropImages(DOM.scry(this.ndContentContainer,"img.fbGalleryImage"),RecommendationsWidget.GALLERY_IMAGE_HEIGHT,false);},cropImages:function(a,b,c){if(a.length>0){var d=function(event){RecommendationsWidget.image_resize({image:event.getTarget(),dimension:b,centerimage:c});};a.forEach(function(e){if(e.complete){RecommendationsWidget.image_resize({image:e,dimension:b,centerimage:c});}else Event.listen(e,'load',d);});}},hasContent:function(){return this.ndContentContainer.childNodes.length>0;},getParent:function(){if(this.sActivityParent)return ConnectSocialWidget.getInstance(this.sActivityParent);},showRecommendationsSeparator:function(){var a=this.getParent();if(a&&a.hasContent()){var b=DOM.scry(this.ndTop,'div.fbRecommendationsSeparator')[0];CSS.show(b);Style.set(b,'visibility','visible');}return this;},removeOverflowElements:function(){ConnectSocialWidget.prototype.removeOverflowElements.apply(this,arguments);if(this.sActivityParent&&!this.hasContent()){var a=DOM.scry(this.ndTop,'div.fbRecommendationsSeparator')[0];CSS.hide(a);}}});RecommendationsWidget.IMAGE_HEIGHT=35;RecommendationsWidget.GALLERY_IMAGE_HEIGHT=105;function LikeBoxWidget(a,b){this.parent.construct(this,a,b);}Class.extend(LikeBoxWidget,'ConnectSocialWidget');copyProperties(LikeBoxWidget.prototype,{});RecommendationsWidget.image_resize=function(a){var b=a.image,c=Vector2.getElementDimensions(b),d=c.y,e=c.x,f=a.dimension,g=f+'px',h=a.centerimage;if(d<=5||e<=5)return;var i=d/e;if(i<.5||i>2)return;if(d===e){Style.set(b,'width',g);}else if(d<e){var j=f/d,k=-Math.round((e-d)*j/2);Style.set(b,'height',g);h&&Style.set(b,'marginLeft',k+'px');}else{var j=f/e,l=-Math.round((d-e)*j/2);Style.set(b,'width',g);h&&Style.set(b,'marginTop',l+'px');}Style.set(b,'visibility','visible');Style.set(b.parentNode,'background','transparent');var m=Parent.byClass(b,'fbRecommendation');if(m)CSS.removeClass(m,'invisible_elem');};
__d("QueryString",[],function(a,b,c,d,e,f){var g={encode:function(h){var i=[];Object.keys(h).forEach(function(j){var k=h[j];if(typeof k==='undefined')return;if(k===null){i.push(j);return;}i.push(encodeURIComponent(j)+'='+encodeURIComponent(k));});return i.join('&');},decode:function(h){var i={};if(h==='')return i;var j=h.split('&'),k=j.length;while(k--){var l=j[k].split('=',2);i[decodeURIComponent(l[0])]=l.length===2?decodeURIComponent(l[1]):null;}return i;},appendToUrl:function(h,i){return h+(~h.indexOf('?')?'&':'?')+(typeof i==='string'?i:g.encode(i));}};e.exports=g;});
__d("AsyncSignal",["Env","ErrorUtils","QueryString","URI","XHR","copyProperties"],function(a,b,c,d,e,f){var g=b('Env'),h=b('ErrorUtils'),i=b('QueryString'),j=b('URI'),k=b('XHR'),l=b('copyProperties');function m(n,o){this.data=o||{};if(g.tracking_domain&&n.charAt(0)=='/')n=g.tracking_domain+n;this.uri=n;}m.prototype.setHandler=function(n){this.handler=n;return this;};m.prototype.send=function(){var n=this.handler,o=this.data,p=new Image();if(n)p.onload=p.onerror=function(){h.applyWithGuard(n,null,[p.height==1]);};o.asyncSignal=(Math.random()*10000|0)+1;var q=new j(this.uri).isFacebookURI();l(o,k.getAsyncParams(q?'POST':'GET'));p.src=i.appendToUrl(this.uri,o);return this;};e.exports=m;});
__d("LinkshimAsyncLink",["$","AsyncSignal"],function(a,b,c,d,e,f){var g=b('$'),h=b('AsyncSignal'),i={swap:function(j,k){j.href=k;},referrer_log:function(j,k,l){var m=g('meta_referrer');m.content="origin";i.swap(j,k);(function(){m.content="default";new h(l,{}).send();}).defer(100);}};e.exports=i;});
__d("legacy:dom-asynclinkshim",["LinkshimAsyncLink"],function(a,b,c,d){a.LinkshimAsyncLink=b('LinkshimAsyncLink');},3);
__d("legacy:intl-core",["tx"],function(a,b,c,d){var e=b('tx');a.tx=e;a._tx=e._;},3);
__d("legacy:bind",["bind"],function(a,b,c,d){a.bind=b('bind');},3);
__d("ARIA",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge'),i,j,k=function(){i=h('ariaAssertiveAlert');if(!i){i=g.create('div',{id:'ariaAssertiveAlert',className:'accessible_elem',role:'alert','aria-live':'assertive'});g.appendContent(document.body,i);}j=h('ariaPoliteAlert');if(!j){j=i.cloneNode(false);j.setAttribute('id','ariaPoliteAlert');j.setAttribute('aria-live','polite');g.appendContent(document.body,j);}k=bagofholding;};function l(n,o){k();var p=o?i:j;g.setContent(p,n);}var m={owns:function(n,o){n.setAttribute('aria-owns',g.getID(o));},setPopup:function(n,o){var p=g.getID(o);n.setAttribute('aria-owns',p);n.setAttribute('aria-controls',p);n.setAttribute('aria-haspopup','true');if(n.tabIndex==-1)n.tabIndex=0;},announce:function(n){l(n,true);},notify:function(n){l(n);}};e.exports=m;});
__d("ContextualDialogFooterLink",["event-extensions","copyProperties","CSS","DOM"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('CSS'),i=b('DOM');function j(k){this._layer=k;}g(j.prototype,{_subscriptions:null,enable:function(){var k=this._layer.getRoot(),l=i.scry(k,'.uiContextualDialogFooterLink')[0],m='uiContextualDialogHoverFooterArrow';this._subscriptions=[Event.listen(l,'mouseenter',h.addClass.curry(k,m)),Event.listen(l,'mouseleave',h.removeClass.curry(k,m))];},disable:function(){this._subscriptions.forEach(function(k){k.remove();});this._subscriptions=null;}});e.exports=j;});
__d("ContextualThing",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge');function i(k){var l;while(k){if(k.getAttribute&&(l=k.getAttribute('data-ownerid')))return h(l);k=k.parentNode;}return null;}var j={register:function(k,l){k.setAttribute('data-ownerid',g.getID(l));},remove:function(k){k.removeAttribute('data-ownerid');},containsIncludingLayers:function(k,l){while(l){if(g.contains(k,l))return true;l=i(l);}return false;}};e.exports=j;});
__d("Locale",["Style"],function(a,b,c,d,e,f){var g=b('Style'),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.get(document.body,'direction'));return h;}};e.exports=i;});
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}}};e.exports=k;});
__d("BootloadedReact",["Bootloader"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=function(j){g.loadModules(['React'],j);},i={isValidComponent:function(j){return (j&&typeof j.genMarkup==='function'&&typeof j.handleUpdateProps==='function');},initializeTouchEvents:function(j,k){h(function(l){l.initializeTouchEvents(j);k&&k();});},createComponent:function(j,k){h(function(l){var m=l.createComponent(j);k&&k(m);});},renderComponent:function(j,k,l){h(function(m){var n=m.renderComponent(j,k);l&&l(n);});},renderOrUpdateComponent:function(j,k,l){h(function(m){var n=m.renderOrUpdateComponent(j,k);l&&l(n);});},destroyAndReleaseReactRootNode:function(j,k){h(function(l){l.destroyAndReleaseReactRootNode(j);k&&k();});}};e.exports=i;});
__d("KeyEventController",["event-extensions","DOM","Run","copyProperties","isEmpty"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('Run'),i=b('event-extensions').$E,j=b('copyProperties'),k=b('isEmpty');function l(){this.handlers={};document.onkeyup=this.onkeyevent.bind(this,'onkeyup');document.onkeydown=this.onkeyevent.bind(this,'onkeydown');document.onkeypress=this.onkeyevent.bind(this,'onkeypress');}j(l,{instance:null,getInstance:function(){return l.instance||(l.instance=new l());},defaultFilter:function(event,m){event=i(event);return l.filterEventTypes(event,m)&&l.filterEventTargets(event,m)&&l.filterEventModifiers(event,m);},filterEventTypes:function(event,m){if(m==='onkeydown')return true;return false;},filterEventTargets:function(event,m){var n=event.getTarget();if(n.contentEditable==='true')return false;return !g.isNodeOfType(n,l._interactiveElements)||(n.type in l._uninterestingTypes)||(g.isNodeOfType(n,['input','textarea'])&&n.value.length===0&&event.keyCode in l._controlKeys);},filterEventModifiers:function(event,m){if(event.ctrlKey||event.altKey||event.metaKey||event.repeat)return false;return true;},registerKey:function(m,n,o,p){if(o===undefined)o=l.defaultFilter;var q=l.getInstance(),r=q.mapKey(m);if(k(q.handlers))h.onLeave(q.resetHandlers.bind(q));var s={};for(var t=0;t<r.length;t++){m=r[t];if(!q.handlers[m]||p)q.handlers[m]=[];var u={callback:n,filter:o};s[m]=u;q.handlers[m].push(u);}return {remove:function(){for(var v in s){if(q.handlers[v]&&q.handlers[v].length){var w=q.handlers[v].indexOf(s[v]);w>=0&&q.handlers[v].splice(w,1);}delete s[v];}}};},keyCodeMap:{BACKSPACE:[8],TAB:[9],RETURN:[13],ESCAPE:[27],LEFT:[37,63234],UP:[38,63232],RIGHT:[39,63235],DOWN:[40,63233],DELETE:[46],COMMA:[188],PERIOD:[190],'`':[192],'[':[219],']':[221]},_interactiveElements:['input','select','textarea','object','embed'],_uninterestingTypes:{checkbox:1,radio:1,submit:1},_controlKeys:{8:1,9:1,13:1,27:1,37:1,63234:1,38:1,63232:1,39:1,63235:1,40:1,63233:1,46:1}});j(l.prototype,{mapKey:function(m){if(m>=0&&m<=9){if(typeof(m)!='number')m=m.charCodeAt(0)-48;return [48+m,96+m];}var n=l.keyCodeMap[m.toUpperCase()];if(n)return n;return [m.toUpperCase().charCodeAt(0)];},onkeyevent:function(m,n){n=i(n);var o=this.handlers[n.keyCode]||this.handlers[n.which],p,q,r;if(o)for(var s=0;s<o.length;s++){p=o[s].callback;q=o[s].filter;try{if(!q||q(n,m)){r=p(n,m);if(r===false)return Event.kill(n);}}catch(t){}}return true;},resetHandlers:function(){this.handlers={};}});e.exports=l;});
__d("Layer",["event-extensions","ArbiterMixin","BehaviorsMixin","BootloadedReact","Class","ContextualThing","CSS","DataStore","DOM","HTML","KeyEventController","Style","$","copyProperties","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('BootloadedReact'),j=b('Class'),k=b('ContextualThing'),l=b('CSS'),m=b('DataStore'),n=b('DOM'),o=b('HTML'),p=b('KeyEventController'),q=b('Style'),r=b('$'),s=b('copyProperties'),t=b('ge'),u=[];function v(w,x){this._config=w||{};if(x){this._configure(this._config,x);var y=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(y));}}s(v,g);s(v,{init:function(w,x){w.init(x);},initAndShow:function(w,x){w.init(x).show();},show:function(w){w.show();}});s(v.prototype,g,h,{_initialized:false,_root:null,_shown:false,_hiding:false,_causalElement:null,_reactContainer:null,init:function(w){this._configure(this._config,w);var x=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(x));this._initialized=true;return this;},_configure:function(w,x){if(x){var y=n.isNode(x),z=typeof x==='string'||o.isHTML(x);this.containsReactComponent=i.isValidComponent(x);if(z){x=o(x).getRootNode();}else if(this.containsReactComponent){var aa=document.createElement('div');i.renderComponent(x,aa);x=this._reactContainer=aa;}}this._root=this._buildWrapper(w,x);l.addClass(this._root,'uiLayer');if(w.causalElement)this._causalElement=t(w.causalElement);m.set(this._root,'layer',this);},_getDefaultBehaviors:function(){return [];},getCausalElement:function(){return this._causalElement;},setCausalElement:function(w){this._causalElement=w;},getInsertParent:function(){return this._insertParent||document.body;},getRoot:function(){return this._root;},_getContentRoot:function(){return this._root;},_buildWrapper:function(w,x){return x;},setInsertParent:function(w){if(w){if(this._shown&&w!==this.getInsertParent()){n.appendContent(w,this.getRoot());this.updatePosition();}this._insertParent=w;}return this;},show:function(){if(this._shown)return this;var w=this.getRoot();this.inform('beforeshow');q.set(w,'visibility','hidden');q.set(w,'overflow','hidden');l.show(w);n.appendContent(this.getInsertParent(),w);if(this.updatePosition()!==false){u.push(this);this._shown=true;this.inform('show');v.inform('show',this);}else n.remove(w);q.set(w,'visibility','');q.set(w,'overflow','');this.inform('aftershow');return this;},hide:function(){if(this._hiding||!this._shown||this.inform('beforehide')===false)return this;this._hiding=true;if(this.inform('starthide')!==false)this.finishHide();return this;},finishHide:function(){if(this._shown){u.remove(this);this._hiding=false;this._shown=false;n.remove(this.getRoot());this.inform('hide');v.inform('hide',this);}},isShown:function(){return this._shown;},updatePosition:function(){return true;},destroy:function(){if(this.containsReactComponent)i.destroyAndReleaseReactRootNode(this._reactContainer);this.finishHide();this.destroyBehaviors();this.inform('destroy');v.inform('destroy',this);m.remove(this._root,'layer');this._root=this._causalElement=null;}});Event.listen(document.documentElement,'keydown',function(event){if(p.filterEventTargets(event,'keydown'))for(var w=u.length-1;w>=0;w--)if(u[w].inform('key',event)===false)return false;},Event.Priority.URGENT);Event.listen(document.documentElement,'click',function(event){var w=event.getTarget(),x,y;for(var z=u.length-1;z>=0;z--){x=u[z];y=x._getContentRoot();if(k.containsIncludingLayers(y,w))return;if(x.inform('blur',event)===false)return;}});e.exports=v;});
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('$'),i=b('copyProperties');function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('DOMControl'),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={focus:function(l){try{l.focus();}catch(m){}},isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("LayerAutoFocus",["function-extensions","copyProperties","DOMQuery","Input"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('DOMQuery'),i=b('Input');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('aftershow',this._focus.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_focus:function(){var k=h.scry(this._layer.getRoot(),'.autofocus')[0];k&&i.focus(k);}});e.exports=j;});
__d("LayerButtons",["event-extensions","Parent","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_listener:null,enable:function(){this._listener=Event.listen(this._layer.getRoot(),'click',this._handle.bind(this));},disable:function(){this._listener.remove();this._listener=null;},_handle:function(j){var k=j.getTarget(),l=g.byClass(k,'layerConfirm');if(l){if(this._layer.inform('confirm',l)===false)j.prevent();return;}var m=g.byClass(k,'layerCancel');if(m){if(this._layer.inform('cancel',m)!==false)this._layer.hide();j.prevent();return;}var n=g.byClass(k,'layerButton');if(n)if(this._layer.inform('button',n)===false)j.prevent();}});e.exports=i;});
__d("LayerDestroyOnHide",["function-extensions","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('hide',Function.prototype.defer.shield(this._layer.destroy.bind(this._layer)));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerFadeOnHide",["Animation","Layer","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Layer'),i=b('Style'),j=b('UserAgent'),k=b('copyProperties');function l(m){this._layer=m;}k(l.prototype,{_subscription:null,enable:function(){if(j.ie()<9)return;this._subscription=this._layer.subscribe('starthide',this._handleStartHide.bind(this));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}},_handleStartHide:function(){var m=true,n=h.subscribe('show',function(){n.unsubscribe();m=false;});(function(){n.unsubscribe();n=null;if(m){this._animate();}else this._layer.finishHide();}).bind(this).defer();return false;},_animate:function(){new g(this._layer.getRoot()).from('opacity',1).to('opacity',0).duration(150).ondone(this._finish.bind(this)).go();},_finish:function(){i.set(this._layer.getRoot(),'opacity','');this._layer.finishHide();}});e.exports=l;});
__d("LayerFadeOnShow",["Animation","Style","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Style'),i=b('UserAgent'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_subscriptions:null,enable:function(){if(i.ie()<9)return;this._subscriptions=[this._layer.subscribe('beforeshow',function(){h.set(this._layer.getRoot(),'opacity',0);}.bind(this)),this._layer.subscribe('show',this._animate.bind(this))];},disable:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_animate:function(){var l=this._layer.getRoot();new g(l).from('opacity',0).to('opacity',1).duration(100).ondone(h.set.curry(l,'opacity','')).go();}});e.exports=k;});
__d("trackReferrer",["Parent"],function(a,b,c,d,e,f){var g=b('Parent');function h(i,j){i=g.byAttribute(i,'data-referrer');if(i){var k=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(j)[1]||'';if(!k)return;var l=k+'|'+i.getAttribute('data-referrer'),m=new Date();m.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(l)+"; "+"expires="+m.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return i;}e.exports=h;});
__d("Form",["event-extensions","AsyncRequest","AsyncResponse","CSS","DOM","DOMPosition","DOMQuery","DataStore","Env","Input","Parent","URI","createArrayFrom","trackReferrer"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('AsyncResponse'),i=b('CSS'),j=b('DOM'),k=b('DOMPosition'),l=b('DOMQuery'),m=b('DataStore'),n=b('Env'),o=b('Input'),p=b('Parent'),q=b('URI'),r=b('createArrayFrom'),s=b('trackReferrer'),t='FileList' in window,u='FormData' in window;function v(x){var y={};q.implodeQuery(x).split('&').forEach(function(z){if(z){var aa=/^([^=]*)(?:=(.*))?$/.exec(z),ba=q.decodeComponent(aa[1]),ca=aa[2]?q.decodeComponent(aa[2]):null;y[ba]=ca;}});return y;}var w={getInputs:function(x){x=x||document;return [].concat(r(l.scry(x,'input')),r(l.scry(x,'select')),r(l.scry(x,'textarea')),r(l.scry(x,'button')));},getSelectValue:function(x){return x.options[x.selectedIndex].value;},setSelectValue:function(x,y){for(var z=0;z<x.options.length;++z)if(x.options[z].value==y){x.selectedIndex=z;break;}},getRadioValue:function(x){for(var y=0;y<x.length;y++)if(x[y].checked)return x[y].value;return null;},getElements:function(x){return r(x.tagName=='FORM'?x.elements:w.getInputs(x));},getAttribute:function(x,y){return (x.getAttributeNode(y)||{}).value||null;},setDisabled:function(x,y){w.getElements(x).forEach(function(z){if(z.disabled!==undefined){var aa=m.get(z,'origDisabledState');if(y){if(aa===undefined)m.set(z,'origDisabledState',z.disabled);z.disabled=y;}else if(aa!==true)z.disabled=false;}});},bootstrap:function(x,y){var z=(w.getAttribute(x,'method')||'GET').toUpperCase();y=p.byTag(y,'button')||y;var aa=p.byClass(y,'stat_elem')||x;if(i.hasClass(aa,'async_saving'))return;if(y&&(y.form!==x||(y.nodeName!='INPUT'&&y.nodeName!='BUTTON')||y.type!='submit')){var ba=l.scry(x,'.enter_submit_target')[0];ba&&(y=ba);}var ca=w.serialize(x,y);w.setDisabled(x,true);var da=w.getAttribute(x,'ajaxify')||w.getAttribute(x,'action');s(x,da);var ea=new g(da);ea.setData(ca).setNectarModuleDataSafe(x).setReadOnly(z=='GET').setMethod(z).setRelativeTo(x).setStatusElement(aa).setInitialHandler(w.setDisabled.curry(x,false)).setHandler(function(fa){Event.fire(x,'success',{response:fa});}).setErrorHandler(function(fa){if(Event.fire(x,'error',{response:fa})!==false)h.defaultErrorHandler(fa);}).setFinallyHandler(w.setDisabled.curry(x,false)).send();},forEachValue:function(x,y,z){w.getElements(x).forEach(function(aa){if(aa.name&&!aa.disabled&&aa.type!=='submit')if(!aa.type||((aa.type==='radio'||aa.type==='checkbox')&&aa.checked)||aa.type==='text'||aa.type==='password'||aa.type==='hidden'||aa.nodeName==='TEXTAREA'){z(aa.type,aa.name,o.getValue(aa));}else if(aa.nodeName==='SELECT'){for(var ba=0,ca=aa.options.length;ba<ca;ba++){var da=aa.options[ba];if(da.selected)z('select',aa.name,da.value);}}else if(t&&aa.type==='file'){var ea=aa.files;for(var fa=0;fa<ea.length;fa++)z('file',aa.name,ea.item(fa));}});if(y&&y.name&&y.type==='submit'&&l.contains(x,y)&&l.isNodeOfType(y,['input','button']))z('submit',y.name,y.value);},createFormData:function(x,y){if(!u)return null;var z=new FormData();if(x)if(l.isNode(x)){w.forEachValue(x,y,function(ca,da,ea){z.append(da,ea);});}else{var aa=v(x);for(var ba in aa)z.append(ba,aa[ba]);}return z;},serialize:function(x,y){var z={};w.forEachValue(x,y,function(aa,ba,ca){if(aa==='file')return;w._serializeHelper(z,ba,ca);});return w._serializeFix(z);},_serializeHelper:function(x,y,z){var aa=Object.prototype.hasOwnProperty,ba=/([^\]]+)\[([^\]]*)\](.*)/.exec(y);if(ba){if(!x[ba[1]]||!aa.call(x,ba[1])){var ca;x[ba[1]]=ca={};if(x[ba[1]]!==ca)return;}var da=0;if(ba[2]===''){while(x[ba[1]][da]!==undefined)da++;}else da=ba[2];if(ba[3]===''){x[ba[1]][da]=z;}else w._serializeHelper(x[ba[1]],da.concat(ba[3]),z);}else x[y]=z;},_serializeFix:function(x){var y=[];for(var z in x){if(x[z] instanceof Object)x[z]=w._serializeFix(x[z]);y.push(z);}if(y.length>0){var aa=0,ba=true;y.sort().forEach(function(da){if(da!=aa++)ba=false;});if(ba){var ca=[];y.forEach(function(da){ca[da]=x[da];});return ca;}}return x;},post:function(x,y,z){var aa=document.createElement('form');aa.action=x.toString();aa.method='POST';aa.style.display='none';if(z)aa.target=z;y.fb_dtsg=n.fb_dtsg;w.createHiddenInputs(y,aa);l.getRootElement().appendChild(aa);aa.submit();return false;},createHiddenInputs:function(x,y,z,aa){z=z||{};var ba=v(x);for(var ca in ba){if(ba[ca]===null)continue;if(z[ca]&&aa){z[ca].value=ba[ca];}else{var da=j.create('input',{type:'hidden',name:ca,value:ba[ca]});z[ca]=da;y.appendChild(da);}}return z;},getFirstElement:function(x,y){y=y||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var z=[];for(var aa=0;aa<y.length;aa++){z=l.scry(x,y[aa]);for(var ba=0;ba<z.length;ba++){var ca=z[ba];try{var ea=k.getElementPosition(ca);if(ea.y>0&&ea.x>0)return ca;}catch(da){}}}return null;},focusFirst:function(x){var y=w.getFirstElement(x);if(y){y.focus();return true;}return false;}};e.exports=w;});
__d("LayerFormHooks",["event-extensions","Form","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Form'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscriptions:null,enable:function(){var j=this._layer.getRoot();this._subscriptions=[Event.listen(j,'submit',this._onSubmit.bind(this)),Event.listen(j,'success',this._onSuccess.bind(this)),Event.listen(j,'error',this._onError.bind(this))];},disable:function(){this._subscriptions.forEach(function(j){j.remove();});this._subscriptions=null;},_onSubmit:function(event){if(this._layer.inform('submit',event)===false)event.kill();},_onSuccess:function(event){if(this._layer.inform('success',event)===false)event.kill();},_onError:function(event){var j=event.getData();if(this._layer.inform('error',{response:j.response})===false)event.kill();}});e.exports=i;});
__d("LayerHideOnBlur",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscriptions:null,_onBlur:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._onBlur&&this._onBlur.unsubscribe();this._onBlur=null;},_attach:function(){(function(){this._onBlur=this._layer.subscribe('blur',this._layer.hide.shield(this._layer));}).bind(this).defer();}});e.exports=h;});
__d("Keys",[],function(a,b,c,d,e,f){var g={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};e.exports=g;});
__d("LayerHideOnEscape",["event-extensions","copyProperties","Input","Keys"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('Input'),i=b('Keys');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('key',this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(k,event){if(Event.getKeyCode(event)===i.ESC){var l=this._layer.getCausalElement();if(l)if(l.tabIndex!=-1)h.focus(l);this._layer.hide();return false;}}});e.exports=j;});
__d("LayerHideOnSuccess",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){this._layer=i;}g(h.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('success',this._layer.hide.bind(this._layer));},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=h;});
__d("LayerHideOnTransition",["Arbiter","Class","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('copyProperties');function j(k){this._layer=k;}i(j.prototype,{_subscription:null,enable:function(){this._subscription=g.subscribe('page_transition',this._layer.hide.shield(this._layer),g.SUBSCRIBE_NEW);},disable:function(){if(this._subscription){this._subscription.unsubscribe();this._subscription=null;}}});e.exports=j;});
__d("TabbableElements",["Style","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Style'),h=b('createArrayFrom'),i={find:function(j){function k(n){if(n.tabIndex>0)return true;switch(n.tagName){case "A":return n.href&&n.rel!="ignore";case "INPUT":return n.type!="hidden"&&n.type!="file"&&!n.disabled;case "SELECT":return !n.disabled;case "TEXTAREA":return !n.disabled;default:return false;}}function l(n){if(n.offsetHeight===0&&n.offsetWidth===0)return true;var o=n;while(o&&o!=j&&g.get(o,'visibility')!=='hidden')o=o.parentNode;return o!==j;}var m=h(j.getElementsByTagName("*"));return m.filter(function(n){return k(n)&&!l(n);});}};e.exports=i;});
__d("LayerTabIsolation",["event-extensions","copyProperties","TabbableElements","Keys","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('TabbableElements'),i=b('Keys'),j=b('Input');function k(l){this._layer=l;}g(k.prototype,{_tabHandler:null,_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachHandler.bind(this)),this._layer.subscribe('hide',this._detachHandler.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._detachHandler();},_attachHandler:function(){var l=this._layer.getRoot();this._tabHandler=Event.listen(l,'keydown',function(m){if(Event.getKeyCode(m)==i.TAB){var n=m.getTarget();if(n){var o=h.find(l),p=o[0],q=o[o.length-1],r=m.getModifiers().shift;if(r&&n==p){m.preventDefault();j.focus(q);}else if(!r&&n==q){m.preventDefault();j.focus(p);}}}});},_detachHandler:function(){if(this._tabHandler){this._tabHandler.remove();this._tabHandler=null;}}});e.exports=k;});
__d("LayerMouseHooks",["event-extensions","function-extensions","ContextualThing","DOM","Layer","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('ContextualThing'),h=b('DOM'),i=b('Layer'),j=b('copyProperties');function k(l){this._layer=l;}j(k.prototype,{_mouseSubscriptions:[],_layerSubscriptions:[],enable:function(){var l=this._layer.getRoot();this._mouseSubscriptions=[Event.listen(l,'mouseenter',this._onMouseEnter.bind(this)),Event.listen(l,'mouseleave',this._onMouseLeave.bind(this))];this._layerSubscriptions=[i.subscribe('show',this._onLayerShow.bind(this)),i.subscribe('hide',this._onLayerHide.bind(this))];},disable:function(){this._mouseSubscriptions.forEach(function(l){l.remove();});this._mouseSubscriptions=[];this._layerSubscriptions.forEach(function(l){i.unsubscribe(l);});this._layerSubscriptions=[];},_onMouseEnter:function(l){this._fireMouseLeaveOnLayerHide=false;if(!this._spawnedLayer)this._layer.inform('mouseenter');},_onMouseLeave:function(l){if(!this._spawnedLayer)this._layer.inform('mouseleave');this._fireMouseLeaveOnLayerHide=!!this._spawnedLayer;},_onLayerShow:function(l,m){var n=m.getContext&&m.getContext();if(n)if(h.contains(this._layer.getRoot(),n))this._spawnedLayer=m;},_onLayerHide:function(l,m){if(m===this._spawnedLayer){this._spawnedLayer=null;if(this._fireMouseLeaveOnLayerHide)this._onMouseLeave.bind(this).defer();}}});e.exports=k;});
__d("Overlay",["Arbiter","Class","CSS","DataStore","DOM","Layer","LayerAutoFocus","LayerButtons","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerFormHooks","LayerHideOnBlur","LayerHideOnEscape","LayerHideOnSuccess","LayerHideOnTransition","LayerTabIsolation","LayerMouseHooks","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DataStore'),k=b('DOM'),l=b('Layer'),m=b('LayerAutoFocus'),n=b('LayerButtons'),o=b('LayerDestroyOnHide'),p=b('LayerFadeOnHide'),q=b('LayerFadeOnShow'),r=b('LayerFormHooks'),s=b('LayerHideOnBlur'),t=b('LayerHideOnEscape'),u=b('LayerHideOnSuccess'),v=b('LayerHideOnTransition'),w=b('LayerTabIsolation'),x=b('LayerMouseHooks'),y=b('$'),z=b('copyProperties');function aa(ba,ca){ba=z({buildWrapper:true},ba||{});this._shouldBuildWrapper=ba.buildWrapper;this.parent.construct(this,ba,ca);}h.extend(aa,l);z(aa.prototype,{_configure:function(ba,ca){this.parent._configure(ba,ca);var da=this.getRoot();this._overlay=k.scry(da,'div.uiOverlay')[0]||da;i.hide(da);k.appendContent(this.getInsertParent(),da);j.set(this._overlay,'overlay',this);var ea=j.get(this._overlay,'width');ea&&this.setWidth(ea);if(this.setFixed)this.setFixed(j.get(this._overlay,'fixed')=='true');if(j.get(this._overlay,'fadeonshow')!='false')this.enableBehavior(q);if(j.get(this._overlay,'fadeonhide')!='false')this.enableBehavior(p);if(j.get(this._overlay,'hideonsuccess')!='false')this.enableBehavior(u);if(j.get(this._overlay,'hideonblur')=='true')this.enableBehavior(s);if(j.get(this._overlay,'destroyonhide')!='false')this.enableBehavior(o);return this;},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([m,n,r,x,t,v,w]);},initWithoutBuildingWrapper:function(){this._shouldBuildWrapper=false;return this.init.apply(this,arguments);},_buildWrapper:function(ba,ca){ca=this.parent._buildWrapper(ba,ca);if(!this._shouldBuildWrapper){this._contentRoot=ca;return ca;}this._contentRoot=k.create('div',{className:'uiOverlayContent'},ca);return k.create('div',{className:'uiOverlay'},this._contentRoot);},_getContentRoot:function(){return this._contentRoot;},destroy:function(){j.remove(this.getRoot(),'overlay');this.parent.destroy();}});e.exports=aa;});
__d("getOverlayZIndex",["Style"],function(a,b,c,d,e,f){var g=b('Style');function h(i,j){j=j||document.body;var k=[];while(i&&i!==j){k.push(i);i=i.parentNode;}if(i!==j)return 0;for(var l=k.length-1;l>=0;l--){var m=k[l];if(g.get(m,'position')!='static'){var n=parseInt(g.get(m,'z-index'),10);if(!isNaN(n))return n;}}return 0;}e.exports=h;});
__d("ContextualDialogX",["event-extensions","ARIA","Arbiter","ArbiterMixin","Bootloader","Class","ContextualDialogFooterLink","ContextualThing","CSS","DataStore","DOM","Locale","Overlay","Parent","Style","Vector","$","copyProperties","getOverlayZIndex"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ARIA'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('Bootloader'),k=b('Class'),l=b('ContextualDialogFooterLink'),m=b('ContextualThing'),n=b('CSS'),o=b('DataStore'),p=b('DOM'),q=b('Locale'),r=b('Overlay'),s=b('Parent'),t=b('Style'),u=b('Vector'),v=b('$'),w=b('copyProperties'),x=b('getOverlayZIndex');function y(z,aa){this.parent.construct(this,z,aa);}k.extend(y,r);w(y,i,{ARROW_OFFSET:15,ARROW_LENGTH:16,ARROW_INSET:22,TOP_MARGIN:8,BOTTOM_MARGIN:30,LEFT_MARGIN:15,RIGHT_MARGIN:30,POSITION_TO_CLASS:{above:'uiContextualDialogAbove',below:'uiContextualDialogBelow',left:'uiContextualDialogLeft',right:'uiContextualDialogRight'},RIGHT_ALIGNED_CLASS:'uiContextualDialogRightAligned',ARROW_CLASS:{bottom:'uiContextualDialogArrowBottom',top:'uiContextualDialogArrowTop',right:'uiContextualDialogArrowRight',left:'uiContextualDialogArrowLeft'},POSITION_TO_ARROW:{above:'bottom',below:'top',left:'right',right:'left'},getInstance:function(z){var aa=o.get(z,'ContextualDialogX');if(!aa){var ba=s.byClass(z,'uiOverlay');if(ba)aa=o.get(ba,'overlay');}return aa;}});w(y.prototype,{_scrollListener:null,_scrollParent:null,_width:null,_fixed:false,_hasCustomArrow:false,_hasFooter:false,_showSubscription:null,_hideSubscription:null,_hovercardSubscription:null,_setContextSubscription:null,_resizeListener:null,_reflowSubscription:null,_configure:function(z,aa){this.parent._configure(z,aa);var ba=this.getRoot(),ca=o.get.curry(ba);this.setAlignH(ca('alignh','left'));this.setOffsetX(ca('offsetx',0));this.setOffsetY(ca('offsety',0));this.setPosition(ca('position','above'));this._hasCustomArrow=ca('hascustomarrow',false);this._hasFooter=ca('hasfooter',false);if(this._hasFooter){var da=p.scry(ba,'.uiContextualDialogFooterLink')[0];da&&this.enableBehavior(l);}this._setContextSubscription=this.subscribe('beforeshow',function(){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;var ea=ca('context');if(ea){this.setContext(v(ea));}else{ea=ca('contextselector');if(ea)this.setContext(p.find(document,ea));}}.bind(this));this._content=p.scry(ba,'.uiContextualDialogContent')[0];this._showSubscription=this.subscribe('show',function(){var ea=this.updatePosition.shield(this);this._resizeListener=Event.listen(window,'resize',ea);this._reflowSubscription=h.subscribe('reflow',ea);this._setupScrollListener(this._scrollParent);m.register(ba,this.context);h.inform('layer_shown',{type:'ContextualDialog'});}.bind(this));this._hideSubscription=this.subscribe('hide',function(){this._teardownResizeAndReflowListeners();this._teardownScrollListener();m.remove(ba);h.inform('layer_hidden',{type:'ContextualDialog'});}.bind(this));this._hovercardSubscription=h.subscribe('Hovercard/hide',function(ea,fa){if(a.Hovercard.contains(this.getContext()))this.hide();}.bind(this));return this;},_buildWrapper:function(z,aa){var ba=this.parent._buildWrapper(z,aa);if(!this._shouldBuildWrapper)return ba;n.addClass(ba,'uiContextualDialog');return p.create('div',{className:'uiContextualDialogPositioner'},ba);},setWidth:function(z){this._width=Math.floor(z);return this;},setFixed:function(z){z=!!z;n.conditionClass(this.getRoot(),'uiContextualDialogFixed',z);this._fixed=z;return this;},setAlignH:function(z){this.alignH=z;this._updateAlignmentClass();this._shown&&this.updatePosition();this.position&&this._updateArrow();return this;},getContent:function(){return this._content;},getContext:function(){return this.context;},setContext:function(z){if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}z=v(z);if(this.context&&this.context!=z)o.remove(this.context,'ContextualDialogX');this.context=z;g.setPopup(this.getCausalElement(),this.getRoot());var aa=s.byClass(z,'fbPhotoSnowlift');this.setInsertParent(aa||document.body);if(this._scrollListener&&this._scrollParent!==aa){this._teardownScrollListener();this._setupScrollListener(aa);}this._scrollParent=aa;var ba=x(z,this._insertParent);t.set(this.getRoot(),'z-index',ba>200?ba:'');o.set(this.context,'ContextualDialogX',this);return this;},getCausalElement:function(){return this.parent.getCausalElement()||this.context;},listen:function(z,aa){return Event.listen(this.getRoot(),z,aa);},setOffsetX:function(z){this.offsetX=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setOffsetY:function(z){this.offsetY=parseInt(z,10)||0;this._shown&&this.updatePosition();return this;},setPosition:function(z){this.position=z;for(var aa in y.POSITION_TO_CLASS)n.conditionClass(this.getRoot(),y.POSITION_TO_CLASS[aa],z==aa);this._updateAlignmentClass();this._shown&&this.updatePosition();this._updateArrow();return this;},updatePosition:function(){if(!this.context)return false;if(this._width)t.set(this._overlay,'width',this._width+'px');var z=this._fixed?'viewport':'document',aa=u.getElementPosition(this.context,z),ba=this._scrollParent;if(ba)aa=aa.sub(u.getElementPosition(ba,'document')).add(ba.scrollLeft,ba.scrollTop);var ca=u.getElementDimensions(this.context),da=this.position=='above'||this.position=='below',ea=q.isRTL();if((this.position=='right'||(da&&this.alignH=='right'))!=ea)aa=aa.add(ca.x,0);if(this.position=='below')aa=aa.add(0,ca.y);var fa=new u(0,0);if(da&&this.alignH=='center'){fa=fa.add((ca.x-this._width)/2,0);}else{var ga=da?ca.x:ca.y,ha=2*y.ARROW_INSET;if(ga<ha){var ia=ga/2-y.ARROW_INSET;if(da&&(this.alignH=='right'!=ea))ia=-ia;fa=fa.add(da?ia:0,da?0:ia);}}fa=fa.add(this.offsetX,this.offsetY);if(ea)fa=fa.mul(-1,1);aa=aa.add(fa);if(this._fixed)aa=new u(aa.x,aa.y,'document');aa.setElementPosition(this.getRoot());this._adjustVerticalPosition();this._adjustHorizontalPosition();return true;},scrollTo:function(){if(this.context)j.loadModules(['DOMScroll'],function(z){z.scrollTo(this.context,true,true);}.bind(this));},destroy:function(){this.unsubscribe(this._showSubscription);this.unsubscribe(this._hideSubscription);this._hovercardSubscription.unsubscribe();if(this._setContextSubscription){this.unsubscribe(this._setContextSubscription);this._setContextSubscription=null;}this._teardownScrollListener();this._teardownResizeAndReflowListeners();this.context&&o.remove(this.context,'ContextualDialogX');this.parent.destroy();},_adjustVerticalPosition:function(){if(this.position!='left'&&this.position!='right'){t.set(this._overlay,'top','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').y,ba=u.getElementDimensions(this._overlay).y,ca=u.getViewportDimensions().y,da=y.TOP_MARGIN,ea=Math.min(Math.max(0,aa+ba+y.BOTTOM_MARGIN-ca),Math.max(-da,aa-da),ba-2*y.ARROW_INSET);t.set(this._overlay,'top',(-1*ea)+'px');t.set(this._arrow,'top',y.ARROW_OFFSET+'px');t.set(this._arrow,'marginTop',ea+'px');},_adjustHorizontalPosition:function(){if((this.position!='above'&&this.position!='below')||this.alignH!='left'){t.set(this._overlay,'left','');t.set(this._overlay,'right','');return;}var z=this.getRoot(),aa=u.getElementPosition(z,'viewport').x,ba=u.getElementDimensions(this._overlay).x,ca=u.getViewportDimensions().x,da=q.isRTL(),ea;if(!da){ea=aa+ba+y.RIGHT_MARGIN-ca;}else ea=y.LEFT_MARGIN+ba-aa;ea=Math.min(Math.max(0,ea),ba-2*y.ARROW_INSET);t.set(this._overlay,da?'right':'left',-1*ea+'px');t.set(this._arrow,da?'right':'left',y.ARROW_OFFSET+'px');t.set(this._arrow,da?'marginRight':'marginLeft',ea+'px');},_updateArrow:function(){var z=0;if(this.position=='above'||this.position=='below')switch(this.alignH){case 'center':z=50;break;case 'right':z=100;break;}this._renderArrow(y.POSITION_TO_ARROW[this.position],z);},_renderArrow:function(z,aa){for(var ba in y.ARROW_CLASS)n.conditionClass(this._overlay,y.ARROW_CLASS[ba],z==ba);n.conditionClass(this._overlay,'uiContextualDialogWithFooterArrowBottom',z=='bottom'&&this._hasFooter);if(z=='none')return;if(!this._arrow){this._arrow=p.create('i',{className:'uiContextualDialogArrow'});p.appendContent(this._overlay,this._arrow);}t.set(this._arrow,'top','');t.set(this._arrow,'left','');t.set(this._arrow,'right','');t.set(this._arrow,'margin','');var ca=z=='top'||z=='bottom',da=ca?(q.isRTL()?'right':'left'):'top';aa=aa||0;t.set(this._arrow,da,aa+'%');var ea=y.ARROW_LENGTH+y.ARROW_OFFSET*2,fa=-(ea*aa/100-y.ARROW_OFFSET);t.set(this._arrow,'margin-'+da,fa+'px');if(this._hasCustomArrow)y.inform('arrow_rendered',{type:'ContextualDialog',root:this._root,position:z,side:da,offset_percent:aa,side_margin:fa});},_updateAlignmentClass:function(){n.conditionClass(this.getRoot(),y.RIGHT_ALIGNED_CLASS,(this.position=='above'||this.position=='below')&&this.alignH=='right');},_setupScrollListener:function(z){this._scrollListener=Event.listen(z||window,'scroll',this._adjustVerticalPosition.shield(this));},_teardownScrollListener:function(){if(this._scrollListener){this._scrollListener.remove();this._scrollListener=null;}},_teardownResizeAndReflowListeners:function(){if(this._resizeListener){this._resizeListener.remove();this._resizeListener=null;}if(this._reflowSubscription){this._reflowSubscription.unsubscribe();this._reflowSubscription=null;}}});e.exports=y;});
__d("legacy:ContextualDialogX",["ContextualDialogX"],function(a,b,c,d){a.ContextualDialogX=b('ContextualDialogX');},3);
__d("Cookie",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h={set:function(i,j,k,l,m){if(g.no_cookies&&i!='tpa')return;document.cookie=i+"="+encodeURIComponent(j)+"; "+(k?"expires="+(new Date(Date.now()+k)).toGMTString()+"; ":"")+"path="+(l||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1')+(m?"; secure":"");},clear:function(i,j){j=j||'/';document.cookie=i+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path="+j+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(i){var j=document.cookie.match('(?:^|;\\s*)'+i+'=(.*?)(?:;|$)');return (j?decodeURIComponent(j[1]):j);}};e.exports=h;});
__d("legacy:cookie",["Cookie"],function(a,b,c,d){var e=b('Cookie');a.getCookie=e.get;a.setCookie=e.set;a.clearCookie=e.clear;},3);
__d("invokeCallbacks",["ErrorUtils"],function(a,b,c,d,e,f){var g=b('ErrorUtils');function h(i,j){if(i)for(var k=0;k<i.length;k++)g.applyWithGuard(new Function(i[k]),j);}e.exports=h;});
__d("BigPipe",["Arbiter","Bootloader","Env","JSCC","OnloadEvent","Run","ServerJS","$","copyProperties","ge","hasArrayNature","invokeCallbacks"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('Env'),j=b('JSCC'),k=b('OnloadEvent'),l=b('Run'),m=b('ServerJS'),n=b('$'),o=b('copyProperties'),p=b('ge'),q=b('hasArrayNature'),r=b('invokeCallbacks'),s=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1],t=g.BEHAVIOR_STATE,u=g.BEHAVIOR_PERSISTENT;function v(aa){return (!aa||q(aa)&&aa.length===0)?{}:aa;}function w(aa){if(!aa||typeof aa==='string')return aa;if(aa.container_id){var ba=n(aa.container_id);aa=x(ba)||'';ba.parentNode.removeChild(ba);return aa;}return null;}function x(aa){if(!aa.firstChild){h.loadModules(['ErrorSignal'],function(ca){ca.sendErrorSignal('bigpipe','Pagelet markup container is empty.');});return null;}if(aa.firstChild.nodeType!==8)return null;var ba=aa.firstChild.nodeValue;ba=ba.substring(1,ba.length-1);return ba.replace(/\\([\s\S]|$)/g,'$1');}function y(aa,ba){var ca=document.createElement('div'),da=s<7;if(da)aa.appendChild(ca);ca.innerHTML=ba;var ea=document.createDocumentFragment();while(ca.firstChild)ea.appendChild(ca.firstChild);aa.appendChild(ea);if(da)aa.removeChild(ca);}function z(aa){o(this,{arbiter:g,rootNodeID:'content',lid:0,isAjax:false,domContentCallback:l.__domcontentCallback,onloadCallback:l.__onloadCallback,domContentEvt:k.ONLOAD_DOMCONTENT_CALLBACK,onloadEvt:k.ONLOAD_CALLBACK,forceFinish:false,_phaseDoneCallbacks:[],_currentPhase:0,_lastPhase:-1});o(this,aa);if(this.automatic){this._relevant_instance=z._current_instance;}else z._current_instance=this;this._serverJS=new m();g.inform('BigPipe/init',{lid:this.lid,arbiter:this.arbiter},u);this.arbiter.registerCallback(this._serverJS.cleanup.bind(this._serverJS),['pagelet_displayed_all']);this.arbiter.registerCallback(this.domContentCallback,['pagelet_displayed_all']);this._informEventExternal('phase_begin',{phase:0});this.arbiter.inform('phase_begin_0',true,t);this.onloadCallback=this.arbiter.registerCallback(this.onloadCallback,['pagelet_displayed_all']);}o(z.prototype,{_displayPageletHandler:function(aa){if(this.displayCallback){this.displayCallback(this._displayPagelet.bind(this,aa));}else this._displayPagelet(aa);},_displayPagelet:function(aa){this._informPageletEvent('display_start',aa.id);aa.content=v(aa.content);var ba=true,ca=function(){this._informPageletEvent('display',aa.id);this.arbiter.inform(aa.id+'_displayed',true,t);}.bind(this);for(var da in aa.content){var ea=aa.content[da];if(aa.append)da=this._getAppendTargetID(aa);var fa=p(da);if(fa){ea=w(ea);if(ea)if(!aa.append&&aa.has_inline_js){if(a.DOM&&a.HTML){DOM.setContent(fa,HTML(ea));}else{ba=false;h.loadModules(['DOM','HTML'],function(ha,ia){ha.setContent(fa,ia(ea));ca();});}}else if(aa.append||s<8){if(!aa.append)while(fa.firstChild)fa.removeChild(fa.firstChild);y(fa,ea);}else fa.innerHTML=ea;var ga=fa.getAttribute('data-referrer');if(!ga)fa.setAttribute('data-referrer',da);}}if(ba)ca();if(aa.cache_hit&&i.pc_debug==1)n(aa.id).style.border="1px red solid";},_getAppendTargetID:function(aa){if(!aa.append)return null;return (aa.append==='bigpipe_root')?this.rootNodeID:aa.append;},_downloadJsForPagelet:function(aa){this._informPageletEvent('jsstart',aa.id);h.loadResources(aa.js||[],function(){this._informPageletEvent('jsdone',aa.id);aa.requires=aa.requires||[];if(!this.isAjax||aa.phase>=1)aa.requires.push('uipage_onload');var ba=function(){this._informPageletEvent('preonload',aa.id);this._isRelevantPagelet(aa)&&r(aa.onload);this._informPageletEvent('onload',aa.id);this.arbiter.inform('pagelet_onload',true,g.BEHAVIOR_EVENT);aa.provides&&this.arbiter.inform(aa.provides,true,t);}.bind(this),ca=function(){this._isRelevantPagelet(aa)&&r(aa.onafterload);}.bind(this);this.arbiter.registerCallback(ba,aa.requires);this.arbiter.registerCallback(ca,[this.onloadEvt]);}.bind(this),false,aa.id);},_downloadDisplayDependenciesAndDisplayPagelet:function(aa){this._informPageletEvent('css',aa.id);var ba=(aa.css||[]).concat(aa.displayJS||[]);h.loadResources(ba,function(){var ca=aa.display_dependency||[],da=[];for(var ea=0;ea<ca.length;ea++)da.push(ca[ea]+'_displayed');this.arbiter.registerCallback(this._displayPageletHandler.bind(this,aa),da);}.bind(this),false,aa.id);this._informPageletEvent('css_end',aa.id);},onPageletArrive:function(aa){this._informPageletEvent('arrive',aa.id,aa.phase);var ba=aa.phase;if(!this._phaseDoneCallbacks[ba])this._phaseDoneCallbacks[ba]=this.arbiter.registerCallback(this._onPhaseDone.bind(this),['phase_complete_'+ba]);this.arbiter.registerCallback(this._phaseDoneCallbacks[ba],[aa.id+'_displayed']);var ca=a.PageletCache;if(ca&&aa.cacheable)if(aa.cache_hit){aa=ca.loadFromCache(aa,this.arbiter);}else ca.write(aa,this.arbiter);this._processPagelet(aa);this._informPageletEvent('arrive_end',aa.id);},_processPagelet:function(aa){var ba=aa.phase,ca=this._getAppendTargetID(aa)||aa.id;z.pageletIDs[ca]=ca;if(aa.the_end)this._lastPhase=aa.phase;if(aa.tti_phase!==undefined)this._ttiPhase=aa.tti_phase;if(aa.is_second_to_last_phase)this._secondToLastPhase=aa.phase;if(aa.jscc_map){var da=(eval)(aa.jscc_map);j.initForPagelet(ca,da);}h.setResourceMap(aa.resource_map);h.enableBootload(v(aa.bootloadable));var ea='phase_begin_'+ba;this.arbiter.registerCallback(this._downloadDisplayDependenciesAndDisplayPagelet.bind(this,aa),[ea]);var fa=[aa.id+'_displayed'];if(!this.jsNonBlock)fa.push(this.domContentEvt);if(aa.jsmods){var ga=JSON.parse(JSON.stringify(aa.jsmods));this.arbiter.registerCallback(this._serverJS.handlePartial.bind(this._serverJS,ga),[aa.id+'_displayed']);}this.arbiter.registerCallback(this.onloadCallback,['pagelet_onload']);this.arbiter.registerCallback(this._downloadJsForPagelet.bind(this,aa),fa);aa.is_last&&this.arbiter.inform('phase_complete_'+ba,true,t);},_onPhaseDone:function(){if(this._currentPhase===this._ttiPhase)this._informEventExternal('tti_bigpipe',{phase:this._ttiPhase});var aa=this._currentPhase+1,ba=(function(){this._informEventExternal('phase_begin',{phase:aa});this.arbiter.inform('phase_begin_'+aa,true,t);}).bind(this);if(this._currentPhase===this._lastPhase&&this._isRelevant())this.arbiter.inform('pagelet_displayed_all',true,t);this._currentPhase++;if(s){setTimeout(ba,20);}else ba();},_isRelevant:function(){return this==z._current_instance||(this.automatic&&this._relevant_instance==z._current_instance)||this.jsNonBlock||this.forceFinish;},_isRelevantPagelet:function(aa){if(!this._isRelevant())return false;var ba=this._getAppendTargetID(aa)||aa.id;return z.pageletIDs.hasOwnProperty(ba);},_informEventExternal:function(aa,ba){ba=ba||{};ba.ts=Date.now();ba.lid=this.lid;this.arbiter.inform(aa,ba,u);},_informPageletEvent:function(aa,ba,ca){var da={event:aa,id:ba};if(ca)da.phase=ca;this._informEventExternal('pagelet_event',da);}});z.pageletIDs={};e.exports=z;});
__d("ScriptPathState",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h,i,j,k,l=100,m={setIsUIPageletRequest:function(n){j=n;},setUserURISampleRate:function(n){k=n;},reset:function(){h=null;i=false;j=false;},_shouldUpdateScriptPath:function(){return (i&&!j);},_shouldSendURI:function(){return (Math.random()<k);},getParams:function(){var n={};if(m._shouldUpdateScriptPath()){if(m._shouldSendURI()&&h!==null)n.user_uri=h.substring(0,l);}else n.no_script_path=1;return n;}};g.subscribe("pre_page_transition",function(n,o){i=true;h=o.to.getUnqualifiedURI().toString();});e.exports=a.ScriptPathState=m;});
__d("goOrReplace",["URI","UserAgent"],function(a,b,c,d,e,f){var g=b('URI'),h=b('UserAgent');function i(j,k,l){var m=new g(k);if(j.pathname=='/'&&m.getPath()!='/'&&m.isQuicklingEnabled()){var n=j.search?{}:{q:''};m=new g().setPath('/').setQueryData(n).setFragment(m.getUnqualifiedURI()).toString();k=m.toString();}if(l&&!(h.ie()<8)){j.replace(k);}else if(j.href==k){j.reload();}else j.href=k;}e.exports=i;});
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","DOM","Env","JSCC","ScriptPathState","copyProperties","goOrReplace","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('BigPipe'),j=b('DOM'),k=b('Env'),l=b('JSCC'),m=b('ScriptPathState'),n=b('copyProperties'),o=b('goOrReplace'),p=b('ge'),q;function r(u,v){var w=p(u);if(w){if(!v)w.style.minHeight='600px';for(var x in i.pageletIDs)if(u!==x&&j.contains(w,x)){g.inform('ajaxpipe/clear_pagelet',{pagelet_id:x});l.clearForPagelet(x);delete i.pageletIDs[x];}j.empty(w);}}function s(u,v){var w=p(u);if(w)if(!v)w.style.minHeight='100px';}function t(u,v){this._uri=u;this._query_data=v;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;}n(t.prototype,{setCanvasId:function(u){this._canvas_id=u;return this;},setURI:function(u){this._uri=u;return this;},setData:function(u){this._query_data=u;return this;},getData:function(u){return this._query_data;},setAllowCrossPageTransition:function(u){this._allow_cross_page_transition=u;return this;},setAppend:function(u){this._append=u;return this;},send:function(){var u={ajaxpipe:1,ajaxpipe_token:k.ajaxpipe_token};n(u,m.getParams());m.reset();if(this._pageletCacheMiss)u.pcmiss=1;this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(n(u,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition);if(this._automatic){this._relevantRequest=q;}else q=this._request;this._request.send();return this;},_preBootloadFirstResponse:function(u){return false;},_fireDomContentCallback:function(){this._arbiter.inform('ajaxpipe/domcontent_callback',true,g.BEHAVIOR_STATE);},_fireOnloadCallback:function(){this._arbiter.inform('ajaxpipe/onload_callback',true,g.BEHAVIOR_STATE);},_isRelevant:function(u){return this._request==q||(this._automatic&&this._relevantRequest==q)||this._jsNonBlock||this._forceFinish;},_preBootloadHandler:function(u){var v=u.getPayload();if(!v||v.redirect||!this._isRelevant(u))return false;var w=false;if(u.is_first){!this._append&&!this._displayCallback&&r(this._canvas_id,this._constHeight);this._arbiter=new g();w=this._preBootloadFirstResponse(u);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:'ajaxpipe/domcontent_callback',onloadEvt:'ajaxpipe/onload_callback',jsNonBlock:this._jsNonBlock,forceFinish:this._forceFinish,automatic:this._automatic,displayCallback:this._displayCallback});}return w;},_redirect:function(u){if(u.redirect){if(u.force||!this.isPageActive(u.redirect)){var v=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());o(window.location,URI(u.redirect).removeQueryData(v),true);}else PageTransitions.go(u.redirect,true);return true;}else return false;},isPageActive:function(u){return true;},getSanitizedParameters:function(){return [];},_versionCheck:function(u){return true;},_onInitialResponse:function(u){var v=u.getPayload();if(!this._isRelevant(u))return false;if(!v)return true;if(this._redirect(v)||!this._versionCheck(v))return false;return true;},_processFirstResponse:function(u){var v=u.getPayload();if(p(this._canvas_id)&&v.canvas_class!==null)CSS.setClass(this._canvas_id,v.canvas_class);},setFirstResponseCallback:function(u){this._firstResponseCallback=u;return this;},setFirstResponseHandler:function(u){this._processFirstResponse=u;return this;},_onResponse:function(u){var v=u.payload;if(!this._isRelevant(u))return h.suppressOnloadToken;if(u.is_first){this._processFirstResponse(u);this._firstResponseCallback&&this._firstResponseCallback();v.provides=v.provides||[];v.provides.push('uipage_onload');if(this._append)v.append=this._canvas_id;}if(v){if('content' in v.content&&this._canvas_id!==null&&this._canvas_id!='content'){v.content[this._canvas_id]=v.content.content;delete v.content.content;}if(this._pageletCacheMiss&&u.is_first){v.id=this._pageletCacheMiss.id;v.cacheable=true;v.cache_controller=this._pageletCacheMiss.cache_controller;v.cache_type=this._pageletCacheMiss.cache_type;v.key=this._pageletCacheMiss.key;}this.pipe.onPageletArrive(v);}if(u.is_last)s(this._canvas_id,this._constHeight);return h.suppressOnloadToken;},setNectarModuleDataSafe:function(u){this._request.setNectarModuleDataSafe(u);return this;},setFinallyHandler:function(u){this._request.setFinallyHandler(u);return this;},setErrorHandler:function(u){this._request.setErrorHandler(u);return this;},abort:function(){this._request.abort();if(q==this._request)q=null;this._request=null;return this;},setJSNonBlock:function(u){this._jsNonBlock=u;return this;},setForceFinish:function(u){this._forceFinish=u;return this;},setAutomatic:function(u){this._automatic=u;return this;},setDisplayCallback:function(u){this._displayCallback=u;return this;},setPageletCacheMiss:function(u){this._pageletCacheMiss=u;return this;},setConstHeight:function(u){this._constHeight=u;return this;},getAsyncRequest:function(){return this._request;}});n(t,{getCurrentRequest:function(){return q;},setCurrentRequest:function(u){q=u;}});e.exports=t;});
__d("Button",["event-extensions","CSS","DataStore","DOM","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k='uiButtonDisabled',l='uiButtonDepressed',m='button:blocker',n='href',o='ajaxify';function p(t,u){var v=h.get(t,m);if(u){if(v){v.remove();h.remove(t,m);}}else if(!v)h.set(t,m,Event.listen(t,'click',bagof(false),Event.Priority.URGENT));}function q(t){var u=j.byClass(t,'uiButton');if(!u)throw new Error('invalid use case');return u;}function r(t){return i.isNodeOfType(t,'a');}var s={getInputElement:function(t){t=q(t);if(r(t))throw new Error('invalid use case');return i.find(t,'input');},isEnabled:function(t){return !g.hasClass(q(t),k);},setEnabled:function(t,u){t=q(t);g.conditionClass(t,k,!u);if(r(t)){var v=t.href,w=t.getAttribute('ajaxify'),x=h.get(t,n,'#'),y=h.get(t,o);if(u){if(!v)t.href=x;if(!w&&y)t.setAttribute('ajaxify',y);}else{if(v&&v!==x)h.set(t,n,v);if(w&&w!==y)h.set(t,o,w);t.removeAttribute('href');t.removeAttribute('ajaxify');}p(t,u);}else{var z=s.getInputElement(t);z.disabled=!u;p(z,u);}},setDepressed:function(t,u){g.conditionClass(q(t),l,u);},isDepressed:function(t){return g.hasClass(q(t),l);},setLabel:function(t,u){t=q(t);if(r(t)){var v=i.find(t,'span.uiButtonText');i.setContent(v,u);}else s.getInputElement(t).value=u;g.conditionClass(t,'uiButtonNoText',!u);},setIcon:function(t,u){if(u&&!i.isNode(u))return;t=q(t);var v=i.scry(t,'.img')[0];if(!u){v&&i.remove(v);return;}g.addClass(u,'customimg');if(v!=u)if(v){i.replace(v,u);}else i.prependContent(t,u);}};e.exports=s;});
__d("CSSSupport",[],function(a,b,c,d,e,f){var g={supportsBorderRadius:function(){var h=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'],i=false,j=document.createElement('div');for(var k=h.length;k>=0;k--)if(i=j.style[h[k]]!==undefined)break;g.supportsBorderRadius=bagof(i);return i;}};e.exports=g;});
__d("Dialog",["array-extensions","event-extensions","AjaxPipeRequest","Animation","Arbiter","AsyncRequest","Bootloader","Button","CSS","CSSSupport","DOM","Form","HTML","Input","Keys","Locale","Parent","Run","Style","URI","UserAgent","Vector","bind","copyProperties","createArrayFrom","getObjectValues","getOverlayZIndex","tx"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('AjaxPipeRequest'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Button'),m=b('CSS'),n=b('CSSSupport'),o=b('DOM'),p=b('Form'),q=b('HTML'),r=b('Input'),s=b('Keys'),t=b('Locale'),u=b('Parent'),v=b('Run'),w=b('Style'),x=b('URI'),y=b('UserAgent'),z=b('Vector'),aa=b('bind'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('getObjectValues'),ea=b('getOverlayZIndex'),fa=b('tx'),ga=function(){var ia=document.body,ja=document.createElement('div'),ka=document.createElement('div');ia.insertBefore(ja,ia.firstChild);ia.insertBefore(ka,ia.firstChild);ja.style.position='fixed';ja.style.top='20px';var la=ja.offsetTop!==ka.offsetTop;ia.removeChild(ja);ia.removeChild(ka);ga=bagof(la);return la;};function ha(ia){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ha._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ia)this._setFromModel(ia);ha._init();}ba(ha,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){ha.max_bottom=Math.max.apply(Math,ha._bottoms);}});ba(ha,{OK_AND_CANCEL:[ha.OK,ha.CANCEL],_STANDARD_BUTTONS:[ha.OK,ha.CANCEL,ha.CLOSE,ha.SAVE,ha.SUBMIT,ha.CONFIRM,ha.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return n.supportsBorderRadius()||y.ie()<7;},newButton:function(ia,ja,ka,la){var ma={name:ia,label:ja};if(ka)ma.className=ka;if(la)ma.handler=la;return ma;},getCurrent:function(){var ia=ha._stack;return ia.length?ia[ia.length-1]:null;},hideCurrent:function(){var ia=ha.getCurrent();ia&&ia.hide();},bootstrap:function(ia,ja,ka,la,ma,na){ja=ja||{};ba(ja,new x(ia).getQueryData());la=la||(ka?'GET':'POST');var oa=u.byClass(na,'stat_elem')||na;if(oa&&m.hasClass(oa,'async_saving'))return false;var pa=new j().setReadOnly(!!ka).setMethod(la).setRelativeTo(na).setStatusElement(oa).setURI(ia).setNectarModuleDataSafe(na).setData(ja),qa=new ha(ma).setCausalElement(na).setAsync(pa);qa.show();return false;},showFromModel:function(ia,ja){var ka=new ha(ia).setCausalElement(ja).show();if(ia.hiding)ka.hide();},_init:function(){this._init=bagofholding;v.onLeave(ha._tearDown.shield(null,false));i.subscribe('page_transition',ha._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==s.ESC&&!event.getModifiers().any){if(ha._escape())event.kill();}else if(Event.getKeyCode(event)==s.RETURN&&!event.getModifiers().any)if(ha._enter())event.kill();});Event.listen(window,'resize',function(event){var ia=ha.getCurrent();ia&&ia._resetDialogObj();});},_findButton:function(ia,ja){if(ia)for(var ka=0;ka<ia.length;++ka)if(ia[ka].name==ja)return ia[ka];return null;},_tearDown:function(ia){var ja=ha._stack.slice();for(var ka=ja.length-1;ka>=0;ka--)if((ia&&!ja[ka]._cross_transition)||(!ia&&!ja[ka]._cross_quickling))ja[ka].hide();},_escape:function(){var ia=ha.getCurrent();if(!ia)return false;var ja=ia._semi_modal,ka=ia._buttons;if(!ka.length&&!ja)return false;if(ja&&!ka.length){ia.hide();return true;}var la,ma=ha._findButton(ka,'cancel');if(ia._cancelHandler){ia.cancel();return true;}else if(ma){la=ma;}else if(ka.length==1){la=ka[0];}else return false;ia._handleButton(la);return true;},_enter:function(){var ia=ha.getCurrent();if(!ia||!ia._submit_on_enter)return false;if(document.activeElement!=ia._frame)return false;var ja=ia._buttons;if(!ja)return false;ia._handleButton(ja[0]);return true;},call_or_eval:function(ia,ja,ka){if(!ja)return undefined;ka=ka||{};if(typeof ja=='string'){var la=Object.keys(ka).join(', ');ja=(eval)('({f: function('+la+') { '+ja+'}})').f;}return ja.apply(ia,da(ka));}});ba(ha.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false,show:function(){this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;},showLoading:function(){this._loading=true;m.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ha._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return o.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);if(!ia||!ia.name)return null;var ja=o.scry(this._popup,'input'),ka=function(la){return la.name==ia.name;};return ja.filter(ka)[0]||null;},getContentNode:function(){return o.find(this._content,'div.dialog_content');},getFormData:function(){return p.serialize(this.getContentNode());},setAllowCrossPageTransition:function(ia){this._cross_transition=ia;return this;},setAllowCrossQuicklingNavigation:function(ia){this._cross_quickling=ia;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(ia){var ja=this._nodes.title,ka=this._nodes.title_inner,la=this._nodes.content;o.setContent(ka,this._format(ia||''));m.conditionShow(ja,!!ia);m.conditionClass(la,'dialog_content_titleless',!ia);return this;},setBody:function(ia){o.setContent(this._nodes.body,this._format(ia));return this;},setExtraData:function(ia){this._extra_data=ia;return this;},setReturnData:function(ia){this._return_data=ia;return this;},setShowLoading:function(ia){this._show_loading=ia;return this;},setFullBleed:function(ia){this._full_bleed=ia;this._updateWidth();m.conditionClass(this._obj,'full_bleed',ia);return this;},setCausalElement:function(ia){this._causal_elem=ia;return this;},setUserData:function(ia){this._user_data=ia;return this;},getUserData:function(){return this._user_data;},setAutohide:function(ia){if(ia){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),ia);}else this._autohide=ia;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(ia){var ja=this._nodes.summary;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setButtons:function(ia){var ja,ka;if(!(ia instanceof Array)){ja=ca(arguments);}else ja=ia;for(var la=0;la<ja.length;++la)if(typeof ja[la]=='string'){ka=ha._findButton(ha._STANDARD_BUTTONS,ja[la]);ja[la]=ka;}this._buttons=ja;var ma=[];if(ja&&ja.length>0)for(var na=0;na<ja.length;na++){ka=ja[na];var oa=o.create('input',{type:'button',name:ka.name||'',value:ka.label}),pa=o.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},oa);if(ka.className){ka.className.split(/\s+/).forEach(function(ra){m.addClass(pa,ra);});if(m.hasClass(pa,'inputaux')){m.removeClass(pa,'inputaux');m.removeClass(pa,'uiButtonConfirm');}if(m.hasClass(pa,'uiButtonSpecial'))m.removeClass(pa,'uiButtonConfirm');}if(ka.icon)o.prependContent(pa,o.create('img',{src:ka.icon,className:'img mrs'}));if(ka.disabled)l.setEnabled(pa,false);Event.listen(oa,'click',this._handleButton.bind(this,ka.name));for(var qa in ka)if(qa.indexOf('data-')===0&&qa.length>5)oa.setAttribute(qa,ka[qa]);ma.push(pa);}o.setContent(this._nodes.buttons,ma);this._updateButtonVisibility();return this;},setButtonsMessage:function(ia){o.setContent(this._nodes.button_message,this._format(ia||''));this._has_button_message=!!ia;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var ia=this._buttons.length>0||this._has_button_message;m.conditionShow(this._nodes.button_wrapper,ia);m.conditionClass(this._obj,'omitDialogFooter',!ia);},setClickButtonOnEnter:function(ia,ja){this._clickOnEnterTarget=ia;if(!this._clickOnEnterListener)this._clickOnEnterListener=Event.listen(this._nodes.body,'keypress',function(event){var ka=event.getTarget();if(ka&&ka.id===this._clickOnEnterTarget)if(Event.getKeyCode(event)==s.RETURN){this._handleButton(ja);event.kill();}return true;}.bind(this));return this;},setStackable:function(ia,ja){this._is_stackable=ia;this._shown_while_stacked=ia&&ja;return this;},setHandler:function(ia){this._handler=ia;return this;},setCancelHandler:function(ia){this._cancelHandler=ha.call_or_eval.bind(null,this,ia);return this;},setCloseHandler:function(ia){this._close_handler=ha.call_or_eval.bind(null,this,ia);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(ia,ja){if(ja===undefined)ja=true;if(ja){this.setHandler(this._submitForm.bind(this,'POST',ia));}else this.setHandler(function(){p.post(ia,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(ia){this.setHandler(this._submitForm.bind(this,'GET',ia));return this;},setModal:function(ia){this._modal=ia;m.conditionClass(this._obj,'generic_dialog_modal',ia);return this;},setSemiModal:function(ia){if(ia){this.setModal(true);this._semiModalListener=Event.listen(this._obj,'click',function(ja){if(!o.contains(this._popup,ja.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ia;return this;},setWideDialog:function(ia){this._wide_dialog=ia;this._updateWidth();return this;},setContentWidth:function(ia){this._content_width=ia;this._updateWidth();return this;},setTitleLoading:function(ia){if(ia===undefined)ia=true;var ja=o.find(this._popup,'h2.dialog_title');if(ja)m.conditionClass(ja,'loading',ia);return this;},setSecure:function(ia){m.conditionClass(this._nodes.title,'secure',ia);return this;},setClassName:function(ia){ia.split(/\s+/).forEach(m.addClass.bind(m,this._obj));return this;},setFadeEnabled:function(ia){this._fade_enabled=ia;return this;},setFooter:function(ia){var ja=this._nodes.footer;o.setContent(ja,this._format(ia||''));m.conditionShow(ja,!!ia);return this;},setAutoFocus:function(ia){this._auto_focus=ia;return this;},setTop:function(ia){this._top=ia;this._resetDialogObj();return this;},onloadRegister:function(ia){ca(ia).forEach(function(ja){if(typeof ja=='string')ja=new Function(ja);this._onload_handlers.push(ja.bind(this));}.bind(this));return this;},setAsyncURL:function(ia){return this.setAsync(new j(ia));},setAsync:function(ia){var ja=function(ra){if(this._async_request!=ia)return;this._async_request=null;var sa=ra.getPayload(),ta=sa;if(this._loading)this._showing=true;if(typeof ta=='string'){this.setBody(ta);}else this._setFromModel(ta);this._update();}.bind(this),ka=ia.getData();ka.__d=1;ia.setData(ka);var la=ia.getHandler()||bagofholding;ia.setHandler(function(ra){la(ra);ja(ra);});var ma=ia,na=ma.getErrorHandler()||bagofholding,oa=ma.getTransportErrorHandler()||bagofholding,pa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),qa=ma.getServerDialogCancelHandler()||pa;ma.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(ra){pa();na(ra);}).setTransportErrorHandler(function(ra){pa();oa(ra);}).setServerDialogCancelHandler(qa);ia.send();this._async_request=ia;if(this._showing)this.show();return this;},_format:function(ia){if(typeof ia=='string'){ia=q(ia);}else ia=q.replaceJSONWrapper(ia);if(ia instanceof q)ia.setDeferred(true);return ia;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(aa(this,'hide'),this._autohide);m.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;r.focus(this._frame);},_runOnloads:function(){for(var ia=0;ia<this._onload_handlers.length;++ia)try{this._onload_handlers[ia]();}catch(ja){}this._onload_handlers=[];},_updateWidth:function(){var ia=2*ha._BORDER_WIDTH;if(ha._isUsingCSSBorders())ia+=2*ha._HALO_WIDTH;if(this._content_width){ia+=this._content_width;if(!this._full_bleed)ia+=2*ha._PADDING_WIDTH;}else if(this._wide_dialog){ia+=ha.SIZE.WIDE;}else ia+=ha.SIZE.STANDARD;this._popup.style.width=ia+'px';},_updateZIndex:function(){if(!this._hasSetZIndex&&this._causal_elem){var ia=ea(this._causal_elem);this._hasSetZIndex=ia>(this._modal?400:200);w.set(this._obj,'z-index',this._hasSetZIndex?ia:'');}},_renderDialog:function(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=(this._modal&&y.ie()<7)?z.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ia=p.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ia){p.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var ja=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms.push(ja);this._bottom=ja;ha._updateMaxBottom();return this;},_buildDialog:function(){this._obj=o.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';o.appendContent(document.body,this._obj);if(!this._popup)this._popup=o.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);if(y.ie()<7&&!this._shim)k.loadModules(['IframeShim'],function(ua){this._shim=new ua(this._popup);});m.addClass(this._obj,'pop_dialog');if(t.isRTL())m.addClass(this._obj,'pop_dialog_rtl');var ia;if(ha._isUsingCSSBorders()){ia='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else ia='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';o.setContent(this._popup,q(ia));var ja=o.find(this._popup,'div.pop_content');ja.setAttribute('tabIndex','0');ja.setAttribute('role','alertdialog');this._frame=this._content=ja;var ka=o.create('div',{className:'dialog_loading'},"Loading..."),la=o.create('span'),ma=o.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},la),na=o.create('div',{className:'dialog_summary hidden_elem'}),oa=o.create('div',{className:'dialog_body'}),pa=o.create('div'),qa=o.create('div',{className:'dialog_buttons_msg'}),ra=o.create('div',{className:'dialog_buttons clearfix hidden_elem'},[qa,pa]),sa=o.create('div',{className:'dialog_footer hidden_elem'}),ta=o.create('div',{className:'dialog_content'},[na,oa,ra,sa]);this._nodes={summary:na,body:oa,buttons:pa,button_message:qa,button_wrapper:ra,footer:sa,content:ta,title:ma,title_inner:la};o.setContent(this._frame,[ma,ta,ka]);},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var ia=2*ha._PAGE_MARGIN,ja=z.getViewportDimensions(),ka=ja.x-ia,la=ja.y-ia,ma=2*ha._HALO_WIDTH,na=z.getElementDimensions(this._content),oa=na.x+ma,pa=na.y+ma,qa=this._top,ra=ka-oa,sa=la-pa;if(sa<0){qa=ha._PAGE_MARGIN;}else if(qa>sa)qa=ha._PAGE_MARGIN+(Math.max(sa,0)/2);var ta=ga();if(!ta)qa+=z.getScrollPosition().y;w.set(this._popup,'marginTop',qa+'px');var ua=ta&&(ra<0||sa<0);m.conditionClass(this._obj,'generic_dialog_fixed_overflow',ua);m.conditionClass(document.documentElement,'generic_dialog_overflow_mode',ua);},_fadeOut:function(ia){if(!this._popup)return;try{new h(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ia)).go();}catch(ja){this._hide(ia);}},_hide:function(ia){if(this._obj)this._obj.style.display='none';m.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var ja=ha._bottoms;ja.splice(ja.indexOf(this._bottom),1);ha._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&o.contains(this._obj,document.activeElement))r.focus(this._previous_focus);if(ia)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){o.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(ia){if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);var ja=ha.call_or_eval(ia,ia.handler);if(ja===false)return;if(ia.name=='cancel'){this.cancel();}else if(ha.call_or_eval(this,this._handler,{button:ia})!==false)this.hide();},_submitForm:function(ia,ja,ka){var la=this.getFormData();if(ka)la[ka.name]=ka.label;if(this._extra_data)ba(la,this._extra_data);var ma=new j().setURI(ja).setData(la).setMethod(ia).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ia=='GET');this.setAsync(ma);return false;},_setFromModel:function(ia){var ja={};ba(ja,ia);for(var ka in ja){if(ka=='onloadRegister'){this.onloadRegister(ja[ka]);continue;}var la=this['set'+ka.substr(0,1).toUpperCase()+ka.substr(1)];la.apply(this,ca(ja[ka]));}},_updateBottom:function(){var ia=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ha._bottoms[ha._bottoms.length-1]=ia;ha._updateMaxBottom();},_pushOntoStack:function(){var ia=ha._stack;if(!ia.length)i.inform('layer_shown',{type:'Dialog'});ia.remove(this);ia.push(this);for(var ja=ia.length-2;ja>=0;ja--){var ka=ia[ja];if(!ka._is_stackable&&!ka._async_request){ka._hide();}else if(!ka._shown_while_stacked)ka._hide(true);}},_popFromStack:function(){var ia=ha._stack,ja=(ia[ia.length-1]===this);ia.remove(this);if(ia.length){if(ja)ia[ia.length-1].show();}else i.inform('layer_hidden',{type:'Dialog'});}});e.exports=ha;});
__d("legacy:dialog",["Dialog"],function(a,b,c,d){var e=b('Dialog');a.Dialog=e;},3);
function show(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='';}return false;}function hide(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);b.style.display=Style.get(b,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);if(shown(b)){hide(b);}else show(b);}return false;}
__d("ViewportBounds",["Style","ge"],function(a,b,c,d,e,f){var g=b('Style'),h=b('ge'),i={top:[],right:[],bottom:[],left:[]};function j(n){return function(){var o=0;i[n].forEach(function(p){o=Math.max(o,p.getSize());});return o;};}function k(n){return function(o){return new l(n,o);};}function l(n,o){this.getSide=bagof(n);this.getSize=function(){return typeof o==='function'?o():o;};i[n].push(this);}l.prototype.remove=function(){i[this.getSide()].remove(this);};var m={getTop:j('top'),getRight:j('right'),getBottom:j('bottom'),getLeft:j('left'),addTop:k('top'),addRight:k('right'),addBottom:k('bottom'),addLeft:k('left')};m.addTop(function(){var n=h('blueBar');if(n&&g.isFixed(n))return h('blueBarHolder').offsetHeight;return 0;});e.exports=m;});
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","Vector","ViewportBounds","ge"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('DOM'),j=b('DOMQuery'),k=b('Vector'),l=b('ViewportBounds'),m=b('ge'),n={SCROLL:'dom-scroll',getScrollState:function(){var o=k.getViewportDimensions(),p=k.getDocumentDimensions(),q=(p.x>o.x),r=(p.y>o.y);q+=0;r+=0;return new k(q,r);},_scrollbarSize:null,_initScrollbarSize:function(){var o=i.create('p');o.style.width='100%';o.style.height='200px';var p=i.create('div');p.style.position='absolute';p.style.top='0px';p.style.left='0px';p.style.visibility='hidden';p.style.width='200px';p.style.height='150px';p.style.overflow='hidden';p.appendChild(o);document.body.appendChild(p);var q=o.offsetWidth;p.style.overflow='scroll';var r=o.offsetWidth;if(q==r)r=p.clientWidth;document.body.removeChild(p);n._scrollbarSize=q-r;},getScrollbarSize:function(){if(n._scrollbarSize===null)n._initScrollbarSize();return n._scrollbarSize;},scrollTo:function(o,p,q,r,s){if(typeof p=='undefined'||p===true)p=750;if(!(o instanceof k)){var t=k.getScrollPosition().x,u=k.getElementPosition(m(o)).y;o=new k(t,u,'document');if(!r)o.y-=l.getTop()/(q?2:1);}if(q){o.y-=k.getViewportDimensions().y/2;}else if(r){o.y-=k.getViewportDimensions().y;o.y+=r;}o=o.convertTo('document');if(p){return new g(document.body).to('scrollTop',o.y).to('scrollLeft',o.x).ease(g.ease.end).duration(p).ondone(s).go();}else if(window.scrollTo){window.scrollTo(o.x,o.y);s&&s();}h.inform(n.SCROLL);},ensureVisible:function(o,p,q,r,s){if(q===undefined)q=10;o=m(o);if(p)o=j.find(o,p);var t=k.getScrollPosition().x,u=k.getScrollPosition().y,v=u+k.getViewportDimensions().y,w=k.getElementPosition(o).y,x=w+k.getElementDimensions(o).y;w-=l.getTop();w-=q;x+=q;if(w<u){n.scrollTo(new k(t,w,'document'),r,false,false,s);}else if(x>v)if(w-(x-v)<u){n.scrollTo(new k(t,w,'document'),r,false,false,s);}else n.scrollTo(new k(t,x,'document'),r,false,true,s);},scrollToTop:function(o){var p=k.getScrollPosition();n.scrollTo(new k(p.x,0,'document'),o!==false);}};e.exports=n;});
__d("legacy:dom-scroll",["DOMScroll"],function(a,b,c,d){a.DOMScroll=b('DOMScroll');},3);
__d("InputSelection",["DOM","Input"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Input'),i={get:function(j){if(!document.selection)return {start:j.selectionStart,end:j.selectionEnd};var k=document.selection.createRange();if(k.parentElement()!==j)return {start:0,end:0};var l=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-k.moveStart('character',-l),end:-k.moveEnd('character',-l)};}else{var m=k.duplicate();m.moveToElementText(j);m.setEndPoint('StartToEnd',k);var n=l-m.text.length;m.setEndPoint('StartToStart',k);return {start:l-m.text.length,end:n};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.focus(j);}}};e.exports=i;});
__d("legacy:input-selection",["InputSelection","copyProperties"],function(a,b,c,d){var e=b('InputSelection'),f=b('copyProperties');f(a.Input||(a.Input={}),{getSelection:e.get,setSelection:e.set});},3);
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h===null||!h.toString)return '';if(h===false){return '0';}else if(h===true)return '1';return h.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}e.exports=g;});
__d("htmlize",["htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('htmlSpecialChars');function h(i){return g(i).replace(/\r\n|[\r\n]/g,'<br />');}e.exports=h;});
__d("Typeahead",["array-extensions","event-extensions","ArbiterMixin","BehaviorsMixin","Class","DataStore","DOM","Parent","Run","copyProperties","ge"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('ArbiterMixin'),h=b('BehaviorsMixin'),i=b('Class'),j=b('DataStore'),k=b('DOM'),l=b('Parent'),m=b('Run'),n=b('copyProperties'),o=b('ge');function p(q,r,s,t){this.args={data:q,view:r,core:s};j.set(t,'Typeahead',this);this.element=t;}p.getInstance=function(q){var r=l.byClass(q,'uiTypeahead');return r?j.get(r,'Typeahead'):null;};n(p.prototype,g,h,{init:function(q){this.init=bagofholding;this.getCore();this.proxyEvents();this.initBehaviors(q||[]);this.inform('init',this);this.data.bootstrap();this.core.focus();},getData:function(){if(!this.data){var q=this.args.data;this.data=q;this.data.init();}return this.data;},getView:function(){if(!this.view){var q=this.args.view,r=o(q.node_id);if(!r){r=k.create('div',{className:'uiTypeaheadView'});k.appendContent(this.element,r);}if(typeof q.ctor==='string'){this.view=new window[q.ctor](r,q.options||{});}else this.view=new q.ctor(r,q.options||{});this.view.init();this.view.setTypeahead(this.element);}return this.view;},getCore:function(){if(!this.core){var q=this.args.core;if(typeof q.ctor==='string'){this.core=new window[q.ctor](q.options||{});}else this.core=new q.ctor(q.options||{});this.core.init(this.getData(),this.getView(),this.getElement());}return this.core;},getElement:function(){return this.element;},swapData:function(q){var r=this.core;this.data=this.args.data=q;q.init();if(r){r.data=q;r.initData();r.reset();}q.bootstrap();return q;},proxyEvents:function(){[this.data,this.view,this.core].forEach(function(q){q.subscribe(q.events,this.inform.bind(this));},this);},initBehaviors:function(q){q.forEach(function(r){if(typeof r==='string'){if(a.TypeaheadBehaviors&&a.TypeaheadBehaviors[r]){a.TypeaheadBehaviors[r](this);}else m.onLoad(function(){if(a.TypeaheadBehaviors)(a.TypeaheadBehaviors[r]||bagofholding)(this);}.bind(this));}else this.enableBehavior(r);},this);}});p.initNow=function(q,r,s){if(s)s.init(q);q.init(r);};p.init=function(q,r,s,t){if(!k.isNodeOfType(q,['input','textarea']))q=k.scry(q,'input')[0]||k.scry(q,'textarea')[0];var u=false;try{u=document.activeElement===q;}catch(v){}if(u){p.initNow(r,s,t);}else var w=Event.listen(q,'focus',function(){p.initNow(r,s,t);w.remove();});};e.exports=p;});
__d("TypeaheadUtil",["function-extensions"],function(a,b,c,d,e,f){b('function-extensions');var g=/[ ]+/g,h=/[^ ]+/g,i=/[.,+*?$|#{}()\^\-\[\]\\\/!@%'"~=<>_:;\u2010\u2011\u2012\u2013\u2014\u2015\u30fb\uff1a]/g,j={},k={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b",f:"\u0444",g:"\u0433 \u011f",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131",j:"\u0439",k:"\u043a \u0138",l:"\u043b \u013e \u013a \u0140 \u0142",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var l in k){var m=k[l].split(' ');for(var n=0;n<m.length;n++)j[m[n]]=l;}var o={};function p(v){return v?v.replace(i,' '):'';}function q(v){v=(''+v).toLowerCase();var w='',x='';for(var y=v.length;y--;){x=v.charAt(y);w=(j[x]||x)+w;}return w.replace(g,' ');}function r(v){var w=[],x=h.exec(v);while(x){x=x[0];w.push(x);x=h.exec(v);}return w;}function s(v,w){v=''+v;if(!o.hasOwnProperty(v)){var x=q(v),y=p(x);o[v]={value:v,flatValue:x,tokens:r(y),isPrefixQuery:y&&y[y.length-1]!=' '};}if(w&&typeof o[v].sortedTokens=='undefined'){o[v].sortedTokens=o[v].tokens.slice();o[v].sortedTokens.sort(function(z,aa){return aa.length-z.length;});}return o[v];}function t(v,w,x){var y=s(w,v=='prefix'),z=v=='prefix'?y.sortedTokens:y.tokens,aa=s(x).tokens,ba={},ca=y.isPrefixQuery&&v=='query'?z.length-1:null,da=function(ea,fa){for(var ga=0;ga<aa.length;++ga){var ha=aa[ga];if(!ba[ga]&&(ha==ea||((v=='query'&&fa===ca||v=='prefix')&&ha.indexOf(ea)===0)))return (ba[ga]=true);}return false;};return z.length&&z.every(da);}var u={parse:s,isExactMatch:t.curry('exact'),isQueryMatch:t.curry('query'),isPrefixMatch:t.curry('prefix')};e.exports=u;});
__d("MentionsInputMatchers",[],function(a,b,c,d,e,f){var g=['@','\\uff20','+','\\uff0b'].join(''),h='.,*?$|#{}()\\^\\-\\[\\]\\\\\/!%&\'"~=<>_:;',i='\\b[A-Z][^ A-Z'+h+']',j='([^'+g+h+']|['+h+'][^ '+h+'])',k='(?:^|\\s)(?:['+g+']('+j+'{0,20}))',l='(?:(?:'+i+'+)|'+k+')',m='(?:'+i+'{4,})',n={trigger:new RegExp('['+g+']$'),mainMatcher:new RegExp(k+'$'),autoMatcher:new RegExp(l+'$'),userMatcher:new RegExp(m+'$')};e.exports=n;});
__d("MentionsInput",["event-extensions","function-extensions","Arbiter","ArbiterMixin","Class","CSS","DataStore","DOM","HTML","Input","InputSelection","Parent","htmlize","Style","Typeahead","TypeaheadUtil","UserAgent","copyProperties","MentionsInputMatchers"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DataStore'),l=b('DOM'),m=b('HTML'),n=b('Input'),o=b('InputSelection'),p=b('Parent'),q=b('htmlize'),r=b('Style'),s=b('Typeahead'),t=b('TypeaheadUtil'),u=b('UserAgent'),v=b('copyProperties'),w=b('MentionsInputMatchers');function x(y,z,aa,ba,ca,da){k.set(y,'MentionsInput',this);this._root=y;this._typeahead=z;this._input=aa;var ea=false;try{ea=document.activeElement===this._input;}catch(fa){}if(ea){this.init.bind(this,ba,ca,da).defer();}else var ga=Event.listen(this._input,'focus',function(){this.init.bind(this,ba,ca,da).defer();ga.remove();}.bind(this));}x.getInstance=function(y){var z=p.byClass(y,'uiMentionsInput');return z?k.get(z,'MentionsInput'):null;};v(x.prototype,h,{init:function(y,z,aa){this.init=Function.prototype;this._initialized=true;this._highlighter=l.find(this._root,'.highlighter');this._highlighterInner=this._highlighter.firstChild;this._highlighterContent=l.find(this._root,'.highlighterContent');this._hiddenInput=l.find(this._root,'.mentionsHidden');this._placeholder=this._input.getAttribute('placeholder')||'';this._maxMentions=y.max||6;this._metrics=aa;if(u.firefox()<4){this._input.blur();setTimeout(function(){this._input.focus();}.bind(this));}if(!this._hiddenInput.name){var ba=this._input.name;this._input.name=ba+'_text';this._hiddenInput.name=ba;}this._initEvents();this._initTypeahead();this.reset(z);this.inform('init',null,g.BEHAVIOR_STATE);},reset:function(y){if(!this._initialized)return;this._mentioned={};this._orderedUIDs=[];this._numMentioned=0;this._filterData=null;this._hiddenInput&&(this._hiddenInput.value='');this._highlighterContent&&l.empty(this._highlighterContent);this._highlighterAuxContent&&l.remove(this._highlighterAuxContent);this._highlighterAuxContent=null;n.setPlaceholder(this._input,this._placeholder);r.set(this._typeahead.getElement(),'height','auto');if(y){n.setValue(this._input,y.flattened);for(var z in y.mention_data)this._addToken({uid:z,text:y.mention_data[z],type:'unknown'});}this._updateTypeahead();this._updateWidth();this._update();},getValue:function(){return n.getValue(this._input);},getRawValue:function(){this._update();return n.getValue(this._hiddenInput);},checkValue:function(){var y=this._typeahead.getCore().getValue();if(w.trigger.exec(y)||y==='')this.inform('sessionEnd',{});},getTypeahead:function(){return this._typeahead;},_initEvents:function(){var y=this._update.bind(this);Event.listen(this._input,{input:y,keyup:y,change:y,blur:this._handleBlur.bind(this),focus:this._handleFocus.bind(this)});if(this._metrics){this._metrics._reset();this._metrics.bindSessionStart(this._typeahead,'render',true);this._metrics.bindSessionEnd(this._typeahead.getView(),'select',true);this._metrics.bindSessionEnd(this,'sessionEnd',false);Event.listen(this._input,'keyup',function(event){this.checkValue.bind(this).defer();}.bind(this));}},_initTypeahead:function(){this._typeahead.subscribe('select',function(ca,da){var ea=da.selected;this._addToken({uid:ea.uid,text:ea.text,type:ea.type});this.updateValue();}.bind(this));var y=this._input,z=null,aa=function(){if(z===null){z=n.getSubmitOnEnter(y);n.setSubmitOnEnter(y,false);}},ba=function(){if(z!==null){n.setSubmitOnEnter(y,z);z=null;}};this._typeahead.subscribe('render',aa);this._typeahead.subscribe('reset',ba);this._typeahead.subscribe('highlight',function(ca,da){da.index>=0?aa():ba();});this._typeahead.subscribe('query',function(){this._filterData=null;}.bind(this));this._typeahead.getCore().suffix='';this._handleFocus();},_handleBlur:function(){if(this._filterToken){this._filterToken.remove();this._filterToken=null;}},_handleFocus:function(){if(!this._filterToken)this._filterToken=this._typeahead.getData().addFilter(this._filterResults.bind(this));this._updateWidth();},_filterResults:function(y){if(this._filterData===null){var z=o.get(this._input).start||0;for(var aa=0;aa<this._offsets.length;aa++){var ba=this._offsets[aa];if(z>ba[0]&&z<=ba[1]){this._filterData={caretIsInsideMention:true};return false;}}var ca=this._typeahead.getCore();this._filterData={value:ca.getValue(),rawValue:ca.getRawValue()};}if(this._filterData.caretIsInsideMention)return false;if(w.mainMatcher.test(this._filterData.rawValue))return true;if(y.type!='user')return false;if(w.userMatcher.test(this._filterData.value))return true;return t.isExactMatch(this._filterData.value,this._typeahead.getData().getTextToIndex(y));},_addToken:function(y){var z=y.uid;if(!this._mentioned.hasOwnProperty(z)){this._mentioned[z]=y;this._orderedUIDs.push(z);this._numMentioned++;this._updateTypeahead();}},_removeToken:function(y){if(this._mentioned.hasOwnProperty(y)){delete this._mentioned[y];this._orderedUIDs.remove(y);this._numMentioned--;this._updateTypeahead();}},_reduceToken:function(y,z){var aa=z.split(' '),ba=[];for(var ca=0;ca<aa.length;ca++)if(y.indexOf(aa[ca])!=-1)ba.push(aa[ca]);aa=ba;for(ca=1;ca<aa.length;ca++)for(var da=1;da<aa[ca-1].length+1;da++)if(y.indexOf(aa[ca-1].substr(0,da)+aa[ca])!=-1)aa.splice(ca-1,1);while(y.indexOf(aa.join(' '))==-1)aa.splice(0,1);return aa.join(' ');},_update:function(){var y=this.getValue();if(y==this._value)return;this._updateTokens();this.updateValue();this._updateDirection();},_updateTokens:function(){var y=this.getValue(),z=false;for(var aa=0;aa<this._orderedUIDs.length;++aa){var ba=this._orderedUIDs[aa],ca=this._mentioned[ba],da=ca.text,ea;if(ca.type=='user'&&(ea=this._reduceToken(y,da))!==''){if(ea==da.substring(0,da.lastIndexOf(' '))&&y==this._value.substring(0,this._value.length-1)){y=y.substring(0,y.lastIndexOf(' '));z=true;}ca.text=ea;}else if(!da||y.indexOf(da)==-1||typeof da!=='string')this._removeToken(ba);}this._value=y;if(z)n.setValue(this._input,y);},updateValue:function(){var y=this.getValue(),z=this._orderedUIDs,aa=[],ba,ca,da,ea;for(ea=0;ea<z.length;++ea){ca=this._mentioned[z[ea]].text;y=y.replace(ca,function(fa,ga){aa.push([ga,ga+ca.length]);return ca;});}for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;y=y.replace(ca,'@['+da+':]');}ba=q(y);for(ea=0;ea<z.length;++ea){da=z[ea];ca=this._mentioned[da].text;ba=ba.replace('@['+da+':]','<b>'+q(ca)+'</b>');ca=ca.replace(/[\\\]:]/g,function(fa){return '\\'+fa;});y=y.replace('@['+da+':]','@['+da+':'+ca+']');}if(u.ie()){ba=ba.replace(/ {2}/g,'&nbsp;<wbr />&nbsp;<wbr />');ba=ba.replace(/ (?=[^\/]|\/[^>])/g,'&nbsp;<wbr />');}this._offsets=aa;this._hiddenInput.value=y;l.setContent(this._highlighterContent,m(ba));this._updateHighlighter();this._updateHeight();},_updateDirection:function(){var y=r.get(this._input,'direction');if(y==this._dir)return;this._dir=y;r.set(this._highlighter,'direction',y);if(y=='rtl'){r.set(this._highlighter,'text-align','right');}else r.set(this._highlighter,'text-align','left');},_updateWidth:function(){var y=r.getFloat.curry(this._input),z=this._input.offsetWidth-y('paddingLeft')-y('paddingRight')-y('borderLeftWidth')-y('borderRightWidth');if(u.firefox())z-=2;if(u.ie()<=7){z-=r.getFloat(this._highlighterInner,'paddingLeft');this._highlighter.style.zoom=1;}this._highlighterInner.style.width=Math.max(z,0)+'px';},_updateHeight:function(){if(this._highlighterAuxContent){var y=this._highlighter.offsetHeight,z=this._typeahead.getElement();if(y>z.offsetHeight){r.set(z,'height',y+'px');g.inform('reflow');}}},_updateTypeahead:function(){var y=this._typeahead.getCore(),z=null;if(!this._maxMentions||this._numMentioned<this._maxMentions)z=w.autoMatcher;y.matcher=z;y.setExclusions(this._orderedUIDs);this.inform('update',{mentioned:this._mentioned});},setPlaceholder:function(y){this._placeholder=y;if(!this.hasAuxContent())n.setPlaceholder(this._input,y);},_updateHighlighter:function(){if(this._highlighterContent)j.conditionShow(this._highlighterContent,this._numMentioned>0||this.hasAuxContent());},setAuxContent:function(y){if(this._highlighterContent){if(!this._highlighterAuxContent){this._highlighterAuxContent=l.create('span',{className:'highlighterAuxContent'});l.insertAfter(this._highlighterContent,this._highlighterAuxContent);}l.setContent(this._highlighterAuxContent,y);if(y){n.setPlaceholder(this._input,'');}else n.setPlaceholder(this._input,this._placeholder);this._updateHighlighter();this._updateHeight();}},hasAuxContent:function(){var y=this.getAuxContentRoot();return y&&y.innerHTML.length>0;},getAuxContentRoot:function(){return this._highlighterAuxContent;},addMention:function(y){var z=this.getValue();n.setValue(this._input,z+" "+y.text);this._addToken(y);this._update();},getMentions:function(){return this._mentioned;}});e.exports=x;});
__d("InlineTranslation",["event-extensions","Arbiter","CSS","DOM","Input","InputSelection","MentionsInput"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('Input'),k=b('InputSelection'),l=b('MentionsInput'),m=b('event-extensions').$E;function n(q){if(j.isEmpty(q)||!h.hasClass(q,'rtl'))return true;return p.refreshRTLTokens(q);}function o(q,r){var s=k.get(q);if(!h.hasClass(q,'rtl')||s.start!=s.end||s.end===0)return true;var t={'\u200e':true,'\u200f':true},u=s.end-1,v=j.getValue(q);while(u>0&&(v.charAt(u) in t))u--;j.setValue(q,v.substr(0,u)+v.substr(s.end));k.set(q,u,u);m(r).prevent();return true;}var p={insertToken:function(q,r,s,t){p.insertText(r,q);if(q.indexOf('}')==-1){var u=k.get(r).end;k.set(r,u+q.length-1);if(r.typeahead){r.typeahead.show();r.typeahead.check_value();}}if(s===undefined)return;h.hide(s);Event.listen(r,'keyup',function(event){if(j.getValue(r).indexOf(q)==-1){h.show(s);var v=j.getValue(r);if(t.length===0&&v.indexOf(q)==-1&&v.indexOf(q.substr(0,q.length-1))!=-1)j.setValue(r,v.replace(q.substr(0,q.length-1),''));}});},insertText:function(q,r){j.focus(q);var s=k.get(q).end,t=j.getValue(q),u=t.substr(0,s)+r+t.substr(s);j.setValue(q,u);k.set(q,s+r.length);n(q);},copyTranslation:function(q,r){j.setValue(q,'');p.insertText(q,r);},refreshRTLTokens:function(q){var r='',s=k.get(q).end,t=j.getValue(q).substr(0,s),u=j.getValue(q).substr(s);function v(y){return y.replace(/\}(?!\u200e\u200f)/g,'}\u200e\u200f').replace(/(?!\u200e)\{/g,'\u200e{');}t=v(t);r=t+v(u);var w=t.length;if(r.match(/\{[^}]*[\- ]/)){var x='';do{x=r;r=r.replace(/(\{[^}]*) /g,'$1\u00a0').replace(/(\{[^}]*)-/g,'$1\u2011');}while(x!=r);}if(r!=j.getValue(q)){j.setValue(q,r);k.set(q,w,w);}return true;},focusTextArea:function(q){var r=j.getValue(q).length;k.set(q,r);j.focus(q);},attachListeners:function(q){g.subscribe('intldialog/menu_pillTranslate',function(r,s){if(i.find(s.form,'.translate .textarea')==q)p.focusTextArea(q);});if(h.hasClass(q,'rtl')){Event.listen(q,'keyup',function(r){p.refreshRTLTokens(q);});Event.listen(q,'keydown',function(r){var s=Event.getKeyCode(r);if(s==8)o(q,r);});}}};e.exports=p;});
__d("TextInputControl",["event-extensions","function-extensions","Class","DOMControl","Input","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Class'),h=b('DOMControl'),i=b('Input'),j=b('copyProperties');function k(l){this.parent.construct(this,l);var m=this.getRoot(),n=function(){this.update.bind(this).defer();}.bind(this);Event.listen(m,{keydown:n,paste:n});}g.extend(k,h);j(k.prototype,{setMaxLength:function(l){i.setMaxLength(this.getRoot(),l);return this;},getValue:function(){return i.getValue(this.getRoot());},isEmpty:function(){return i.isEmpty(this.getRoot());},setValue:function(l){i.setValue(this.getRoot(),l);this.update();return this;},clear:function(){return this.setValue('');},setPlaceholderText:function(l){i.setPlaceholder(this.getRoot(),l);return this;}});e.exports=k;});
__d("debounce",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){i=(i!=null)?i:100;var m,n;function o(){var p=arguments;!l&&o.reset();if(!l||!m||(n+i<Date.now())){m=setTimeout(function(){m=null;h.apply(this,p);}.bind(j||this),i,!k);n=Date.now();}}o.reset=function(){m&&clearTimeout(m);m=null;};return o;}e.exports=g;});
__d("TextMetrics",["array-extensions","event-extensions","DOM","Style","UserAgent","debounce"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('DOM'),h=b('Style'),i=b('UserAgent'),j=b('debounce'),k;function l(){if(typeof k==='undefined'){var n=g.create('div',{className:'webkitZoomTest'}),o=function(){g.appendContent(document.body,n);k=100/n.clientHeight;g.remove(n);};Event.listen(window,'resize',j(o,100));o();}return k;}function m(n,o){this._node=n;this._flexible=!!o;var p='textarea',q='textMetrics';if(this._flexible){p='div';q+=' textMetricsInline';}this._shadow=g.create(p,{className:q});var r=['fontSize','fontStyle','fontWeight','fontFamily','wordWrap'];r.forEach(function(t){h.set(this._shadow,t,h.get(n,t));}.bind(this));var s=h.get(n,'lineHeight');if(i.chrome()||i.safari())s=Math.round(parseInt(s,10)*l())+'px';h.set(this._shadow,'lineHeight',s);document.body.appendChild(this._shadow);}m.prototype.measure=function(n){var o=this._node,p=this._shadow;n=(n||o.value)+'...';if(!this._flexible){var q=o.clientWidth-h.getFloat(o,'paddingLeft')-h.getFloat(o,'paddingRight');h.set(p,'width',Math.max(q,0)+'px');}g.setContent(p,n);return {width:p.scrollWidth,height:p.scrollHeight};};m.prototype.destroy=function(){g.remove(this._shadow);};e.exports=m;});
__d("TextAreaControl",["event-extensions","Arbiter","ArbiterMixin","Class","CSS","DOMControl","Style","TextInputControl","TextMetrics","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('CSS'),k=b('DOMControl'),l=b('Style'),m=b('TextInputControl'),n=b('TextMetrics'),o=b('copyProperties');function p(q){this.autogrow=j.hasClass(q,'uiTextareaAutogrow');this.parent.construct(this,q);this.width=null;Event.listen(q,'focus',this._handleFocus.bind(this));}i.extend(p,m);o(p.prototype,h,{setAutogrow:function(q){this.autogrow=q;return this;},onupdate:function(){this.parent.onupdate();if(this.autogrow){var q=this.getRoot();if(!this.metrics)this.metrics=new n(q);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(q,'box-sizing')==='border-box'||l.get(q,'-moz-box-sizing')==='border-box'||l.get(q,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=l.getFloat(q,'padding-top')+l.getFloat(q,'padding-bottom')+l.getFloat(q,'border-top-width')+l.getFloat(q,'border-bottom-width');this.initialHeight=q.offsetHeight-this.borderBoxOffset;}var r=this.metrics.measure(),s=Math.max(this.initialHeight,r.height);if(this.isBorderBox)s+=this.borderBoxOffset;if(s!==this.height){this.height=s;l.set(q,'height',s+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}},resetHeight:function(){this.height=-1;this.update();},_handleFocus:function(){this.width=null;}});p.getInstance=function(q){return k.getInstance(q)||new p(q);};e.exports=p;});
__d("IntlTranslationBase",["event-extensions","CSS","DataStore","DOM","InlineTranslation","InputSelection","Intl","TextAreaControl","$","copyProperties","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('InlineTranslation'),k=b('InputSelection'),l=b('Intl'),m=b('TextAreaControl'),n=b('$'),o=b('event-extensions').$E,p=b('copyProperties'),q=b('ge');function r(s,t,u,v,w,x,y,z){this.isRightToLeft=s;this.textarea=t;this.native_string=y;this.native_type=z;this.previewDiv=v;this.previewParagraph=null;this.segmentPrev=q('intl_segment_prev:'+x);if(this.segmentPrev){this.segmentNext=q('intl_segment_next:'+x);Event.listen(this.segmentPrev,'click',this.prevSegment.bind(this));Event.listen(this.segmentNext,'click',this.nextSegment.bind(this));this.segmentInsert=q('intl_segment_insert:'+x);Event.listen(this.segmentInsert,'click',this.insertSegment.bind(this));}this.segmentNumber=0;this.segmentCount=0;this.segmentsInserted=[];this.child_markup=[];if(v){this.child_markup=i.scry(v,'p');this.previewParagraph=this.child_markup[0];}this.anchors=[];this.glossaryAnchors=[];this.anchor_states=[];this.tokens=[];this.glossary=[];var aa;if(u){aa=u.getElementsByTagName('a');for(var ba=0;ba<aa.length;ba++){this.anchors.push(aa[ba]);Event.listen(aa[ba],'click',this.insertToken.bind(aa[ba],this));this.anchor_states.push(false);}}if(w){aa=w.getElementsByTagName('a');for(ba=0;ba<aa.length;ba++){this.glossaryAnchors.push(aa[ba]);Event.listen(aa[ba],'click',this.insertGlossaryTerm.bind(aa[ba],this));}}if(t){Event.listen(t,'keyup',this.refreshTokens.bind(this));if(v){var ca=Event.listen(t,'keyup',this.refreshPreview.bind(this));h.set(t,'keyupEventRef',ca);}if(s){Event.listen(t,'keydown',this.checkRtlBackspace.bind(this));this.refreshTokens();}}}p(r.prototype,{setTranslationText:function(s){this.textarea.value=s;this.refreshTokens();this.refreshPreview();if(!this.textarea._hascontrol){this.textarea._hascontrol=true;new m(this.textarea).setAutogrow(true);}},insertToken:function(s){if(s.textarea){var t=s._getAnchorIndex(this),u=s.textarea,v=k.get(s.textarea).end,w=s.tokens[t];if(s.isRightToLeft)w='\u200e'+w.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';u.value=u.value.substring(0,v)+w+u.value.substring(v);u.focus();v+=w.length;k.set(u,v,v);s.anchor_states[t]=true;g.hide(this);s.refreshPreview();}return false;},insertGlossaryTerm:function(s){if(s.textarea){var t=s._getGlossaryAnchorIndex(this),u=s.textarea,v=k.get(s.textarea).end,w=s.glossary[t];if(s.isRightToLeft)w='\u200e'+w.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';u.value=u.value.substring(0,v)+w+u.value.substring(v);u.focus();v+=w.length;k.set(u,v,v);s.refreshPreview();}return false;},loadSegment:function(s){if(this.segmentCount===0){var t=true;for(this.segmentCount=1;t;this.segmentCount+=1){t=q('intl_segment_text:'+this.segmentCount);this.segmentsInserted.push(false);if(t){g.hide(t);}else break;}}else{if(s>=this.segmentCount||s<0)return false;g.hide(n('intl_segment_text:'+this.segmentNumber));}this.segmentNumber=s;g.show(n('intl_segment_text:'+this.segmentNumber));if(this.segmentNumber>0){g.removeClass(this.segmentPrev,'intl-disabled');}else g.addClass(this.segmentPrev,'intl-disabled');if(this.segmentNumber<this.segmentCount-1){g.removeClass(this.segmentNext,'intl-disabled');}else g.addClass(this.segmentNext,'intl-disabled');if(this.canInsert()){g.removeClass(this.segmentInsert,'intl-disabled');}else g.addClass(this.segmentInsert,'intl-disabled');return false;},prevSegment:function(){return this.loadSegment(this.segmentNumber-1);},nextSegment:function(){return this.loadSegment(this.segmentNumber+1);},canInsert:function(){var s=q('intl_segment_text:'+this.segmentNumber);return (s&&!this.segmentsInserted[this.segmentNumber]&&!g.hasClass(s.childNodes[0],'intl-translatable')&&!g.hasClass(s.childNodes[0],'intl-approvable'));},insertSegment:function(){if(this.canInsert()&&(this.textarea)){var s=q('intl_segment_text:'+this.segmentNumber),t=s.replace(/(<([^>]+)>)/gi,''),u=this.textarea.value;if(l.endsInPunct(u))u+=' ';u+=t;this.setTranslationText(u);this.segmentsInserted[this.segmentNumber]=true;g.addClass(this.segmentInsert,'intl-disabled');}},refreshSegment:function(){if(this.segmentPrev)if(!this.canInsert()){g.addClass(this.segmentInsert,'intl-disabled');}else g.removeClass(this.segmentInsert,'intl-disabled');},_getAnchorIndex:function(s){for(var t=0;t<this.anchors.length;t++)if(this.anchors[t]==s)return t;return -1;},_getGlossaryAnchorIndex:function(s){for(var t=0;t<this.glossaryAnchors.length;t++)if(this.glossaryAnchors[t]==s)return t;return -1;},checkRtlBackspace:function(s){var t=Event.getKeyCode(s);if(this.isRightToLeft&&t==8){var u=k.get(this.textarea);if(u.start==u.end&&u.end>1){var v={'\u200e':true,'\u200f':true},w=u.end-1,x=this.textarea.value;while(w>0&&(x.charAt(w) in v))w--;this.textarea.value=x.substr(0,w)+x.substr(u.end);k.set(this.textarea,w,w);o(s).prevent();}}return true;},cleanseToken:function(s){return s.replace(/\u00a0/g,' ').replace(/\u2011/g,'-').replace(/\u200e/g,'').replace(/\u200f/g,'');},uncleanseToken:function(s){if(this.isRightToLeft)return '\u200e'+s.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';return s;},refreshPreview:function(){if(this.previewDiv){if(this.textarea.value.length){g.show(this.previewDiv);}else g.hide(this.previewDiv);var s=this.textarea.value;for(var t=0;t<this.anchors.length;t++)if(this.anchor_states[t]){var u=/\{=([^}]+)\}/.exec(this.tokens[t]);if(u&&u.length>1){var v=this.child_markup[t+1].innerHTML;s=s.replace(this.uncleanseToken(this.tokens[t]),v);}}this.previewParagraph.innerHTML=s;}},activeTokensRegex:function(){return (/\{[^{}]+\}/g);},refreshTokens:function(){if(this.textarea){var s=this.activeTokensRegex(),t=null,u={};for(var v=0;v<this.tokens.length;v++)u[this.tokens[v]]=false;while(t=s.exec(this.textarea.value)){var w=this.cleanseToken(t[0]),x=w.split(' # ',2);if(x.length>1)x[0]+="}";u[x[0]]=true;}for(v=0;v<this.anchors.length;v++)if(u[this.tokens[v]]!=this.anchor_states[v]){this.anchor_states[v]=!this.anchor_states[v];if(this.anchor_states[v]){g.hide(this.anchors[v]);}else g.show(this.anchors[v]);}if(this.isRightToLeft&&this.textarea.value.length>0)j.refreshRTLTokens(this.textarea);}return true;}});e.exports=r;});
__d("legacy:intl-translation-base",["IntlTranslationBase"],function(a,b,c,d){a.IntlTranslationBase=b('IntlTranslationBase');},3);
__d("ErrorDialog",["Dialog"],function(a,b,c,d,e,f){var g=b('Dialog'),h={showAsyncError:function(i){try{return h.show(i.getErrorSummary(),i.getErrorDescription());}catch(j){alert(i);}},show:function(i,j,k,l){return (new g()).setTitle(i).setBody(j).setButtons([g.OK]).setStackable(true).setModal(true).setHandler(k||bagofholding).setButtonsMessage(l||'').show();}};e.exports=h;});
__d("legacy:error-dialog",["ErrorDialog"],function(a,b,c,d){var e=b('ErrorDialog');a.ErrorDialog=e;},3);
function RegisterShortLongClick(a,b,c,d){this.multi_approve_start_time=0;this.multi_approve_timer=false;this.multi_approve_click_hold_duration=b;this.submit_short_click=c;this.submit_long_click=d;Event.listen(a,'click',bind(this,this.perform_onclick));number_family_locales=ge('num_family_locales').value;if(number_family_locales>0)Event.listen(a,'mousedown',bind(this,this.multi_approve_start_timer));}RegisterShortLongClick.prototype.perform_onclick=function(){if(this.multi_approve_timer){cur_time=Date.now();duration=cur_time-this.multi_approve_start_time;if(duration<this.multi_approve_click_hold_duration){window.clearTimeout(this.multi_approve_timer);this.multi_approve_timer=false;this.submit_short_click();}}else this.submit_short_click();};RegisterShortLongClick.prototype.multi_approve_start_timer=function(){this.multi_approve_start_time=Date.now();this.multi_approve_timer=window.setTimeout(this.submit_long_click,this.multi_approve_click_hold_duration);};function do_multi_locale_approve(a,b,c,d,e,f){var g=function(){if(f!=null)f();_multi_locale_approve(a,b,c,d,e);};_show_multi_locale_approve(a,b,c,d,g);}function _show_multi_locale_approve(a,b,c,d,e){var f=350;if(c.length==1){if(!d[0]||d[0].trim()=='')return;f=700;}var g=function(i){var j="Do you want to approve this translation to the following related locale(s) too?",k=i.getPayload();if(!k.html)return;var l=new Dialog({contentWidth:f});l.setTitle(j).setBody(k.html).setButtons([Dialog.SAVE,Dialog.CANCEL]).setHandler(e).show();},h=new AsyncRequest();h.setURI('/ajax/intl/show_multi_locale_approve.php').setData({oid:b,aloc:a,hashes:c,trs:d}).setPreBootloadHandler(bind(this,g)).setMethod('GET').setReadOnly(true).send();}function _multi_locale_approve(a,b,c,d,e){var f=$('multi_locale_approve_form'),g=DOM.scry(f,'.family_locale'),h=[];for(var i=0;i<g.length;i++)if(!g[i].disabled&&g[i].checked)h.push(g[i].value);var j=true,k=ge('overwrite');if(k)j=k.checked;var l=new AsyncRequest();l.setURI('/ajax/intl/do_translate_approve.php').setData({trs:d,hashes:c,aloc:a,app_id:b,family_locales:h,overwrite:j}).setHandler(bind(this,e)).send();}
function intl_translation_init(){Event.listen(document.body,'mousedown',intl_translation_onmousedown);}function intl_get_translatable_parent(a){while(a.parentNode){if(CSS.hasClass(a,'intl-prototype-translatable')||CSS.hasClass(a,'intl-prototype-contributed')||CSS.hasClass(a,'intl-prototype-translated')||CSS.hasClass(a,'intl-prototype-approved')||CSS.hasClass(a,'intl-prototype-approvable')||CSS.hasClass(a,'intl-prototype-autoapproved')||CSS.hasClass(a,'intl-prototype-iapproved')||CSS.hasClass(a,'intl-prototype-complained')||CSS.hasClass(a,'intl-prototype-complainable')||CSS.hasClass(a,'intl-prototype-unvotable')||CSS.hasClass(a,'intl-prototype-votable'))return a;a=a.parentNode;}return null;}function intl_get_walkthrough_parent(a){while(a.parentNode){if(CSS.hasClass(a,'translations_walkthrough'))return a;a=a.parentNode;}return null;}function intl_translation_onmousedown_real(a){if(!a)return;var b=null,c=null,d=null,e=a.getAttribute('id').replace(/__/g,':').split(':');c=a.className;b=e[1];d=e[2];hashcount=e[3];app=e[4];tr_id=e[5];var f={text:a.getAttribute('native_text'),suffix:a.getAttribute('native_suffix')},g=intl_get_walkthrough_parent(a),h=null;if(g)if(CSS.hasClass(g,'voting_walkthrough'))h='voting_walkthrough';intl_show_dialog(a,c,b,d,app,tr_id,true,null,f,h);return;}function intl_translation_onmousedown(a){var b=$E(a).getTarget();b=intl_get_translatable_parent(b);if(!intl_is_left_click(a)&&b){b.oncontextmenu=function(){return false;};intl_translation_onmousedown_real(b);}}function intl_is_left_click(a){if(a.which==null){if(a.button<2&&!a.ctrlKey)return true;}else if(a.which<2&&!a.ctrlKey)return true;return false;}function intl_show_dialog(a,b,c,d,e,f,g,h,i,j){var k=450+ContextualDialogX.RIGHT_MARGIN+ContextualDialogX.LEFT_MARGIN,l=Vector2.getViewportDimensions(),m=l.x<k;new AsyncRequest('/translations/inline/dialog.php').setData({code:b,hash:c,locale:d,appid:e,trid:f,showApp:m?true:false,walkthrough_info:j}).setRelativeTo(a).send();}function intl_show_variation_help(a,b,c){if(ge(a+':'+b).style.display=='none'){show(ge(a+':'+b));}else hide(ge(a+':'+b));for(var d=0;d<c.length;d++)if(a!=c[d])hide(ge(c[d]+':'+b));}function intl_set_app(a){var b=a.options[a.selectedIndex].value;URI.getRequestURI().addQueryData({app:b}).go();var c=document.getElementById('app_id_hidden_field');if(c)c.value=b;}function intlXdAsync(a,b,c,d){var e=new AsyncRequest().setURI(a).setData(b).setHandler(d).setMethod(c);if(c=='GET')e.setReadOnly(true);e.send();}function intl_quick_vote(a,b,c,d,e){intl_do_vote(a,b,c,d,e,'');intl_update_translations(a,b,e,c);return false;}function intl_vote_in_vote_mode(a,b,c,d,e){var f=Dialog.getCurrent();if(f)f.hide();intl_quick_vote(a,b,c,d,e);return false;}function intl_do_vote(native_hash,locale,translation_id,vote,app_id,tr_ids){hide(ge('total_'+native_hash+'_'+translation_id));show(ge('voting_'+native_hash+'_'+translation_id));intl_update_vote_controls(native_hash,translation_id,vote);var do_vote=function(asyncResponse){var result=asyncResponse.getPayload(),native_hash=result.native_hash,translation_id=result.translation_id;hide(ge('voting_'+native_hash+'_'+translation_id));if(result.vote==1&&tr_ids){var ids=eval(tr_ids);if(ids.length>1)for(var i=0;i<ids.length;i++)if(ge('voteup:'+native_hash+':'+ids[i]+':app_bulk')){var c_name=$('voteup:'+native_hash+':'+ids[i]+':app_bulk').className;if(c_name=='upselect'&&ids[i]!=translation_id)CSS.setClass($('voteup:'+native_hash+':'+ids[i]+':app_bulk'),'upover');}}};intlXdAsync('/ajax/intl/do_vote.php',{hash:native_hash,vote:vote,aloc:locale,translation_id:translation_id,app_id:app_id},'POST',do_vote);}function intl_delete_translation(a,b,c,d){var e=new AsyncRequest();e.setURI('/ajax/intl/delete_translations.php').setData({tr_ids:[b],aloc:d,app_id:c,translation:a,non_admin_mode:1}).setMethod('POST').send();}function intl_translation_dialog(a,b,c,d,e,f,g,h){this.parent.construct(this,f,ge('intl_translation:'+g),ge('intl_dialog_tokens:'+g),ge('intl_preview:'+g),ge('glossary'),g,a,h);this.form=ge('intl_ajax:'+g);if(this.textarea)Event.listen(this.textarea,'keyup',this.check_special_input.bind(this));this.shown_tr_id=b;this.tokens=c;this.glossary=d;this.rules=e;this.approved_trs=document.getElementsByName('approved_trs');for(var i=0;i<this.approved_trs.length;i++)Event.listen(this.approved_trs[i],'click',this.handle_approver_checkbox.bind(this,this.approved_trs[i]));if(this.form.intl_submit&&this.form.approved_tr_id){this.multi_approve=new RegisterShortLongClick(this.form.intl_submit,1000,this.submit_click.bind(this),this.approve_submit_long_click.bind(this));}else if(this.form.intl_submit)this.form.intl_submit.onclick=this.submit_click.bind(this);if(this.form.copy_text)this.form.copy_text.onclick=this.setTranslationText.bind(this,a);if(this.form.intl_unfinalize)this.form.intl_unfinalize.onclick=this.submit_unfinalize.bind(this);if(this.form.intl_delete)this.form.intl_delete.onclick=this.submit_delete.bind(this);this.refreshTokens();this.refreshPreview();if(this.segmentPrev)this.loadSegment(0);}Class.extend(intl_translation_dialog,'IntlTranslationBase');intl_translation_dialog.prototype.check_special_input=function(a){var b=Event.getKeyCode(a);if(b==27)Dialog.getCurrent()&&Dialog.getCurrent().hide();};intl_translation_dialog.prototype.check_tokens=function(){for(var a=0;a<this.anchor_states.length;a++)if(!this.anchor_states[a])return false;return true;};intl_translation_dialog.prototype.check_additional_tokens=function(a,b){var c=/{.*?}/g,d=b.match(c);if(!d)d=[];var e=a.match(c);if(!e)e=[];for(var f=0;f<d.length;f++)if(!this.in_array(this.cleanseToken(d[f]),e))return false;return true;};intl_translation_dialog.prototype.in_array=function(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return true;return false;};intl_translation_dialog.prototype.rule_markup=function(a,b){var c=/<\/?[a-zA-Z][^>]*>/g,d=b.toLowerCase().match(c),e=d?d.sort():[],f=a.toLowerCase().match(c),g=f?f.sort():[],h=e.join(';'),i=g.join(';');if(h!=i)return "HTML markup mismatch. The HTML markup you entered does not match the original markup.";};function intl_explode_inflection(a){var b=window.intl_locale_inflections,c=[];if(b)for(var d in b){var e=b[d];if(e[e.length-1]==='+'){c[c.length]=intl_phonological_rules(e+a);}else if(e[0]==='+')c[c.length]=intl_phonological_rules(a+e);}return c;}intl_translation_dialog.prototype.rule_canon=function(a,b){var c=b.toLowerCase();if(this.glossary)for(var d=0;d<this.glossary.length;d++)if(c.indexOf(this.glossary[d].toLowerCase())==-1){var e=false;for(var f in intl_explode_inflection(this.glossary[d].toLowerCase()))if(c.indexOf(f)!=-1)e=true;if(!e)return "Recommended glossary translations not used.";}};intl_translation_dialog.prototype.rule_punctuation=function(a,b){var c=[',','.','?','!',';',':'];for(var d=0;d<c.length;d++)if(substr_count(a,c[d])!=substr_count(b,c[d]))return "Punctuation mismatch. Did you forget a period or other punctuation?";};intl_translation_dialog.prototype.rule_punctuation_asian=function(a,b){var c={'?':"\uFF1F",'.':"\u3002",'!':"\uFF01",':':"\uFF1A"},d=a.substr(a.length-1),e=c[d];if(e&&b.substr(b.length-1)!=d&&b.substr(b.length-1)!=e)return "Punctuation mismatch. Did you forget a period or other punctuation?";};intl_translation_dialog.prototype.rule_punctuation_tr=function(a,b){var c=['?','!',';',':'];for(var d=0;d<c.length;d++)if(substr_count(a,c[d])!=substr_count(b,c[d]))return "Punctuation mismatch. Did you forget a period or other punctuation?";if(substr_count(a,'.')+substr_count(a,',')!=substr_count(b,'.')+substr_count(b,','))return "Punctuation mismatch. Did you forget a period or comma?";};intl_translation_dialog.prototype.rule_punctuation_ar=function(a,b){var c=[',','.','!',';',':'];for(var d=0;d<c.length;d++)if(substr_count(a,c[d])!=substr_count(b,c[d]))return "Punctuation mismatch. Did you forget a period or other punctuation?";var e="\u061F";if(substr_count(a,'?')!=substr_count(b,'?')+substr_count(b,e))return "Punctuation mismatch. Did you forget a question mark?";};intl_translation_dialog.prototype.rule_capitalization=function(a,b){if(((a.substring(0,1).toLowerCase()!=a.substring(0,1))!=(b.substring(0,1).toLowerCase()!=b.substring(0,1)))&&(a.substring(0,1)+b.substring(0,1)).indexOf('{')==-1)return "Punctuation mismatch. Did you forget a period or comma?";};intl_translation_dialog.prototype.rule_token_spacing=function(a,b){var c=/(?: |\b|^)\{[^}]+\}(?: |\b|$)/g,d;b=this.cleanseToken(b);while(d=c.exec(a)){d[0]=this.cleanseToken(d[0]);if(b.indexOf(d[0])==-1)return "Spacing mismatch. Please make sure the spacing around tokens in {}'s matches.";}};intl_translation_dialog.prototype.check_warnings=function(a,b){var c=[];for(var d=0;d<this.rules.length;d++){var e=this['rule_'+this.rules[d]](a,b);if(e)c.push(e);}var e=this.rule_markup(a,b);if(e)c.push(e);return c.length?c:null;};intl_translation_dialog.prototype.translation_submit=function(){var a=this.form,b=this.textarea.id,c=this.cleanseToken(this.textarea.value),d=a.hash.value,e=a.reportable.value,f,g,h,i,j=null,k=true,l=null,m=function(o){var p=o.getPayload();f=p.status;h=p.tr_ids;g=p.new_tr_id;d=p.hash;i=p.locale;c=p.new_tr;cancel_url=p.cancel_url;if(cancel_url){var q=cancel_url.replace("xxRESULTTOKENxx",c);goURI(q);}if(f=='exists'||f=='exists-self'){var r=(f=='exists-self')?"Sorry! You already submitted the same translation.":"Sorry! Someone else has already submitted the same translation.",s=new Dialog().setTitle("Duplicate Translation").setBody(r).setButtons([Dialog.newButton('edit-translation',"Edit Translation",'',function(){s.hide();})]);s.show();}else if(f=='not-utf8'){new Dialog().setTitle("Unsupported Encoding").setBody("Your web browser appears to be set to send data to Facebook in a format our servers don't understand. Please set your browser to use UTF-8 (Unicode). In most browsers this is in a menu item called \"Encoding\" or \"Character Encoding\" or \"Text Encoding\", most often under the \"View\" menu.").setButtons([Dialog.OK]).show();}else if(f=='empty'){new Dialog().setTitle("No Translation Provided").setBody("Oops! Looks like you didn't type in a translation.").setButtons([Dialog.OK]).show();}else if(f!='ok'){setTimeout(function(){document.location.reload();},250);}else{intl_update_translations(d,a.loc.value,a.app.value,a.tr_id.value,c,g);Dialog.getCurrent()&&Dialog.getCurrent().hide();if(window.intl_inline_translation_dialog){intl_inline_translation_dialog.hide();if(a.cmode_flag)new Dialog().setTitle("Thank You").setBody("Your feedback will be reviewed shortly.").setButtons([Dialog.OK]).show();}else{var t=p.deleted_tr_ids;for(var u=0;u<t.length;u++)hide(ge('tr_'+t[u]));if(ge('mine_'+d))hide($('mine_'+d));show($('inline_'+d));if(ge('tlink_'+d))$('tlink_'+d).innerHTML='&nbsp;';$('entered_'+d).innerHTML=c;}var v=b.substr(b.indexOf(':')+1),w=ge('intl_preview_child:'+v);if(w!=null){var x=w.parentNode.id;if(w.hasChildNodes()){w=w.firstChild;w.className='intl-contributed';}w.innerHTML=c;var y=x.substr(x.indexOf(':')+1),z=ge('intl_translation:'+y),aa=DataStore.get(z,'keyupEventRef');if(aa)aa.fire(z,'keyup');}}},n=new String(document.location);if(getCookie('appmode')==1)j='1';if(a.approved_tr_id&&a.approved_tr_id.value!='')l=a.approved_tr_id.value;intlXdAsync('/ajax/intl/do_translation.php',{hash:d,translation:c,aloc:a.loc.value,charset_test:a.charset_test.value,approved_tr_id:l,reportable:e,app_id:a.app.value,shown_tr_id:this.shown_tr_id,cancel_url:a.cancel_url.value,cmode_desc:a.cmode_desc?a.cmode_desc.value:null,cmode_flag:a.cmode_flag?a.cmode_flag.value:null},'POST',m);return f;};intl_translation_dialog.prototype.submit_unfinalize=function(){var a=null,b=new String(document.location);if(getCookie('appmode')==1)a='1';intlXdAsync('/ajax/intl/do_unapprove.php',{hash:this.form.hash.value,app_id:this.form.app.value,approve_mode:a,aloc:this.form.loc.value},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_delete=function(){intlXdAsync('/ajax/intl/delete_translations.php',{hashes:[this.form.hash.value],aloc:this.form.loc.value,app_id:this.form.app.value,translation:this.cleanseToken(this.textarea.value),non_admin_mode:1},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_click=function(){var a,b,c,d=this.form,e=false,f=true;if(d.approved_tr_id)e=true;var g=d.cancel_url,h=64,i=4096,j=8192;if((d.cmode_flag&&(d.cmode_flag.value&(h+i+j)))||g!=null)f=false;if(d.cmode_flag&&d.cmode_flag.value==0){if(d.reportable&&d.reportable.value==1){new Dialog().setTitle("No reason given").setBody("Oops! You need to provide a reason for reporting a phrase.").setButtons([Dialog.OK]).show();}else new Dialog().setTitle("No reason given").setBody("Oops! You need to provide a reason for reporting a translation.").setButtons([Dialog.OK]).show();}else if(f&&!this.check_tokens()){if(d.reportable&&d.reportable.value==0)new Dialog().setTitle("Unused Tokens").setBody("You did not use all the tokens while translating this string. Please make sure you maintain all text in curly braces (e.g. {{example}}) in the translation.").setButtons([Dialog.OK]).show();}else if(f&&!this.check_additional_tokens(this.native_string,this.textarea.value)){if(d.reportable&&d.reportable.value==0)new Dialog().setTitle("Extra Tokens").setBody("The translation you provided has additional tokens not present in the original text. Please make sure you do not type in anything in curly braces that is not part of the original text.").setButtons([Dialog.OK]).show();}else if(d.reportable&&d.reportable.value==0&&f&&(b=this.check_warnings(this.native_string,this.textarea.value))&&(e==false)){var k=(b.length==1)?"There may be a problem with your translation! The translation you provided failed the following style check:":"There may be a problem with your translation! The translation you provided failed the following style checks:",l=(b.length==1)?"It's ok to ignore this warning if it makes sense given the context of the phrase, but please make sure that this is the case.":"It's ok to ignore these warnings if they make sense given the context of the phrase, but please make sure that this is the case.",m=new Dialog().setTitle("Translation Warning").setBody(k+'<br/><ul><li>'+b.join('</li><li>')+'</li></ul><br />'+l).setButtons([Dialog.newButton('submit-translation',"Submit Translation",'',function(){m.hide();this.translation_submit();}.bind(this)),Dialog.newButton('review-translation',"Review Translation")]).show();}else this.translation_submit();};intl_translation_dialog.prototype.handle_approver_checkbox=function(a){var b=DOM.getText(ge('tr_id_'+a.value));if(a.checked==false){this.textarea.value='';}else this.textarea.value=b;if(this.form.approved_tr_id)this.form.approved_tr_id.value=a.value;this.refreshTokens();this.refreshPreview();};function substr_count(a,b){var c=0,d=a.indexOf(b);while(d!=-1){c++;d=a.indexOf(b,d+1);}return c;}function intl_show_extras(a){var b=ge('intl_extra_phrases');if(b)if(a==false){b.style.display='block';DOMScroll.scrollTo(b,true);}else b.style.display='none';}function intl_decode_attr_value(a){return decodeURIComponent(a.replace(/_/g,'%'));}function intl_update_translations(a,b,c,d,e,f){if(e){attribute_tokens_regex=/({[^}]*) #[^}]*}/g;e=e.replace(attribute_tokens_regex,'$1}');}d=(d===0)?'':d;for(var g=1;g<1000;g++){var h=a+'__'+b+'__'+g+'__'+c+'__'+d,i=ge('trans__'+h);if(!i)if(g<5){continue;}else break;if(CSS.hasClass(i,'intl-ignore-update'))continue;if(e){var j={};if(i.getAttribute('tokens'))j=JSON.parse(intl_decode_attr_value(i.getAttribute('tokens')));if(window.intl_replaced_trans){for(var k in window.intl_replaced_trans){var l=new RegExp('(<em[^>]+id=trans__'+k+' [^>]*>).*(</em>)'),m=window.intl_replaced_trans[k];for(var n in j){var o=j[n];if(typeof(o)=='string')j[n]=o.replace(l,'$1'+m+'$2');}}}else window.intl_replaced_trans={};i.innerHTML=tx._(e,j);window.intl_replaced_trans[a+'__'+b+'__\\d+__'+c+'__'+d]=e;if(f)i.id='trans__'+a+'__'+b+'__'+g+'__'+c+'__'+f;}var p={translatable:'contributed',approvable:'iapproved',votable:'voted',unvotable:'voted',complainable:'complained'};for(var q in p)if(CSS.hasClass(i,'intl-prototype-'+q)){CSS.removeClass(i,'intl-prototype-'+q);CSS.addClass(i,'intl-prototype-'+p[q]);}}}function intl_update_vote_controls(a,b,c){var d=['vmode_dialog','vmode_bulk','app_bulk'];for(var e=0;e<d.length;e++){var f='voteup:'+a+':'+b+':'+d[e],g=ge(f),h='votedown:'+a+':'+b+':'+d[e],i=ge(h);if(!g||!i)continue;var j=g.className,k=i.className;if((j=='upselect'&&c==-1)||(k=='downselect'&&c==1)){CSS.setClass(g,'upover');CSS.setClass(i,'downover');}else if(c==1){CSS.setClass(g,'upselect');CSS.setClass(i,'downover');}else{CSS.setClass(g,'upover');CSS.setClass(i,'downselect');}}}function intl_set_user_blacklist(a,b,c,d,e){if(e){new Dialog().setTitle("Ban user from Translation Application").setBody("Are you sure you want to ban this user from using the Translation Application? Doing so will disallow the user from submitting new translations and votes for your application.").setButtons([{name:'yes',label:"Yes",handler:bind(this,f,a,b,c,true)},{name:'no',label:"No"}]).show();}else new Dialog().setTitle("Remove user from Translation Application blacklist").setBody("Are you sure you want to remove this user from Translation Application blacklist? Doing so will re-enable the user to submit translations and votes for your application.").setButtons([{name:'yes',label:"Yes",handler:bind(this,f,a,b,c,false)},{name:'no',label:"No"}]).show();function f(g,h,i,j){var k=function(l){var m=l.getPayload();if(m.status=='ok')if(m.blacklist){show($('unblacklist:'+d));hide($('blacklist:'+d));}else{show($('blacklist:'+d));hide($('unblacklist:'+d));}};intlXdAsync('/ajax/intl/set_user_blacklist.php',{app_id:g,aloc:h,user_id:i,blacklist:j},'POST',k);}}intl_translation_dialog.prototype.approve_submit_long_click=function(){var a=this.form,b=a.hash.value,c=a.loc.value,d=a.app.value,e=a.tr_id.value,f=this.cleanseToken(this.textarea.value);if(!f||f.trim()=='')return;do_multi_locale_approve(c,d,[b],[f],this.post_multi_locale_approve.bind(this,b,c,d,e,f),null);};intl_translation_dialog.prototype.post_multi_locale_approve=function(a,b,c,d,e){intl_update_translations(a,b,c,d,e);};
__d("legacy:goURI",["goURI"],function(a,b,c,d){a.goURI=b('goURI');},3);
__d("lowerDomain",[],function(a,b,c,d,e,f){if(document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');});
__d("legacy:onload",["Run","OnloadEvent"],function(a,b,c,d){var e=b('Run');a.OnloadEvent=b('OnloadEvent');a.onloadRegister_DEPRECATED=e.onLoad;a.onloadRegister=function(){return e.onLoad.apply(this,arguments);};a.onafterloadRegister_DEPRECATED=e.onAfterLoad;a.onafterloadRegister=function(){return e.onAfterLoad.apply(this,arguments);};a.onleaveRegister=e.onLeave;a.onbeforeunloadRegister=e.onBeforeUnload;a.onunloadRegister=e.onUnload;},3);
__d("InitialJSLoader",["Arbiter","Bootloader","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('OnloadEvent'),j={INITIAL_JS_READY:'BOOTLOAD/JSREADY',loadOnDOMContentReady:function(k,l){g.subscribe(i.ONLOAD_DOMCONTENT_CALLBACK,function(){function m(){h.loadResources(k,function(){g.inform(j.INITIAL_JS_READY,true,g.BEHAVIOR_STATE);});}if(l){setTimeout(m,l);}else m();});}};e.exports=j;});
__d("OnloadHooks",["Arbiter","ErrorUtils","InitialJSLoader","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ErrorUtils'),i=b('InitialJSLoader'),j=b('OnloadEvent');function k(){var r=a.CavalryLogger;if(!window.loaded&&r)r.getInstance().setTimeStamp('t_prehooks');n('onloadhooks');if(!window.loaded&&r)r.getInstance().setTimeStamp('t_hooks');window.loaded=true;g.inform('uipage_onload',true,g.BEHAVIOR_STATE);}function l(){n('onafterloadhooks');window.afterloaded=true;}function m(r,s){return h.applyWithGuard(r,null,null,function(t){t.event_type=s;t.category='runhook';});}function n(r){var s=(r=='onbeforeleavehooks')||(r=='onbeforeunloadhooks');do{var t=window[r];if(!t)break;if(!s)window[r]=null;for(var u=0;u<t.length;u++){var v=m(t[u],r);if(s&&v)return v;}}while(!s&&window[r]);}function o(){if(!window.loaded){window.loaded=true;n('onloadhooks');}if(!window.afterloaded){window.afterloaded=true;n('onafterloadhooks');}}function p(){g.registerCallback(k,[j.ONLOAD_DOMCONTENT_CALLBACK,i.INITIAL_JS_READY]);g.registerCallback(l,[j.ONLOAD_DOMCONTENT_CALLBACK,j.ONLOAD_CALLBACK,i.INITIAL_JS_READY]);g.subscribe(j.ONBEFOREUNLOAD,function(r,s){s.warn=n('onbeforeleavehooks')||n('onbeforeunloadhooks');if(!s.warn){window.loaded=false;window.afterloaded=false;}},g.SUBSCRIBE_NEW);g.subscribe(j.ONUNLOAD,function(r,s){n('onunloadhooks');},g.SUBSCRIBE_NEW);}var q={_onloadHook:k,_onafterloadHook:l,runHook:m,runHooks:n,keepWindowSetAsLoaded:o};p();a.OnloadHooks=e.exports=q;});
__d("legacy:onload-action",["OnloadHooks"],function(a,b,c,d){var e=b('OnloadHooks');a._onloadHook=e._onloadHook;a._onafterloadHook=e._onafterloadHook;a.runHook=e.runHook;a.runHooks=e.runHooks;a.keep_window_set_as_loaded=e.keepWindowSetAsLoaded;},3);
__d("isInIframe",[],function(a,b,c,d,e,f){function g(){return window!=window.top;}e.exports=g;});
__d("EagleEye",["Arbiter","Bootloader","Env","OnloadEvent","isInIframe"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('Env'),j=b('OnloadEvent'),k=b('isInIframe'),l=i.eagleEyeConfig||{},m='_e_',n=(window.name||'').toString();if(n.length==7&&n.substr(0,3)==m){n=n.substr(3);}else{n=l.seed;if(!k())window.name=m+n;}var o=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'',p=m+n+'_',q=new Date(Date.now()+604800000).toGMTString(),r=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),s='; expires='+q+';path=/; domain='+r+o,t=0,u,v=l.sessionStorage&&a.sessionStorage,w=document.cookie.length,x=false,y=Date.now();function z(ea){var fa=2166136261;for(var ga=0,ha=ea.length;ga<ha;++ga)fa=(fa^ea.charCodeAt(ga))*16777619;fa+=fa<<13;fa^=fa>>7;fa+=fa<<3;fa^=fa>>17;fa+=fa<<5;return (fa|0)+2147483648;}function aa(ea){return p+(t++)+'='+encodeURIComponent(ea)+s;}function ba(){var ea=[],fa=false,ga=0,ha=0;this.isEmpty=function(){return !ea.length;};this.enqueue=function(ia,ja){if(ja){ea.unshift(ia);}else ea.push(ia);};this.dequeue=function(){ea.shift();};this.peek=function(){return ea[0];};this.clear=function(ia){w=Math.min(w,document.cookie.length);if(!x&&(new Date()-y>60000))x=true;var ja=!ia&&(document.cookie.search(m)>=0),ka=!!i.cookie_header_limit,la=i.cookie_count_limit||19,ma=i.cookie_header_limit||3950,na=la-5,oa=ma-1000;while(!this.isEmpty()){var pa=aa(this.peek());if(ka&&(pa.length>ma||(x&&pa.length+w>ma))){this.dequeue();continue;}if((ja||ka)&&((document.cookie.length+pa.length>ma)||(document.cookie.split(';').length>la)))break;document.cookie=pa;ja=true;this.dequeue();}var qa=Date.now();if(ia||!fa&&ja&&((ha>0)&&(Math.min(10*Math.pow(2,ha-1),60000)+ga<qa))&&g.query(j.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>oa)||(document.cookie.split(';').length>na))){var ra=new Image(),sa=this,ta=i.tracking_domain||'';fa=true;ra.onload=function wa(){fa=false;ha=0;sa.clear();};ra.onerror=ra.onabort=function wa(){fa=false;ga=Date.now();ha++;};var ua=i.fb_isb?'&fb_isb='+i.fb_isb:'',va='&__user='+i.user;ra.src=ta+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+ua+va+'&'+(!ia?'':'s=')+qa;}};}u=new ba();if(v){var ca=function(){var ea=0,fa=ea;function ga(){var ja=sessionStorage.getItem('_e_ids');if(ja){var ka=(ja+'').split(';');if(ka.length==2){ea=parseInt(ka[0],10);fa=parseInt(ka[1],10);}}}function ha(){var ja=ea+';'+fa;sessionStorage.setItem('_e_ids',ja);}function ia(ja){return '_e_'+((ja!==undefined)?ja:ea++);}this.isEmpty=function(){return fa===ea;};this.enqueue=function(ja,ka){var la=ka?ia(--fa):ia();sessionStorage.setItem(la,ja);ha();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(ia(fa));fa++;ha();};this.peek=function(){var ja=sessionStorage.getItem(ia(fa));return ja?(ja+''):ja;};this.clear=u.clear;ga();};u=new ca();}var da={log:function(ea,fa,ga){if(i.no_cookies)return;var ha=[n,Date.now(),ea].concat(fa);ha.push(ha.length);function ia(){var ja=JSON.stringify(ha);try{u.enqueue(ja,!!ga);u.clear(!!ga);}catch(ka){if(v&&(ka.code===1000)){u=new ba();v=false;ia();}}}ia();},createLogger:function(ea,fa){fa=(fa===undefined)?1:fa;var ga=function(ha,ia){if(ga.enabled)da.log(ea,ha,ia);};ga.enabled=false;ga._key=(i.user||Math.random())+ea;ga.enabled=(z(ga._key)%65535/65535)<=fa;return ga;},getSessionID:function(){return n;},hash:function(ea){return z(ea);}};a.EagleEye=e.exports=da;},3);
__d("ClickRefUtils",[],function(a,b,c,d,e,f){var g={get_intern_ref:function(h){if(!!h){var i={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var j=h;j&&j!=document.body;j=j.parentNode){if(!j.id||typeof j.id!=='string')continue;if(j.id.substr(0,8)=='pagelet_')return j.id.substr(8);if(j.id.substr(0,8)=='box_app_')return j.id;if(i[j.id])return j.id;}}return '-';},get_href:function(h){return (h.getAttribute&&(h.getAttribute('ajaxify')||h.getAttribute('data-endpoint'))||h.action||h.href||h.name||null);},should_report:function(h,i){if(i=='FORCE')return true;if(i=='INDIRECT')return false;return h&&(g.get_href(h)||(h.getAttribute&&h.getAttribute('data-ft')));}};e.exports=g;});
__d("collectDataAttributes",["ge"],function(a,b,c,d,e,f){var g=b('ge');function h(i,j){var k={},l={},m=j.length,n,o;for(n=0;n<m;++n){k[j[n]]={};l[j[n]]='data-'+j[n];}var p={tn:'',"tn-debug":','};while(i){if(i.getAttribute)for(n=0;n<m;++n){var q=i.getAttribute(l[j[n]]);if(q){var r=JSON.parse(q);for(var s in r)if(p[s]!==undefined){if(k[j[n]][s]===undefined)k[j[n]][s]=[];k[j[n]][s].push(r[s]);}else if(k[j[n]][s]===undefined)k[j[n]][s]=r[s];}}if(i.getAttribute&&(o=i.getAttribute('data-ownerid'))){i=g(o);}else i=i.parentNode;}for(var t in k)for(var u in p)if(k[t][u]!==undefined)k[t][u]=k[t][u].join(p[u]);return k;}e.exports=h;});
__d("setUECookie",["Env"],function(a,b,c,d,e,f){var g=b('Env');function h(i){if(!g.no_cookies){var j=0;if(a.afterloaded){j=2;}else if(a.loaded)j=1;document.cookie="act="+encodeURIComponent(i+":"+j)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}e.exports=h;});
__d("ClickRef",["Arbiter","EagleEye","ClickRefUtils","collectDataAttributes","copyProperties","ge","setUECookie","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('EagleEye'),i=b('ClickRefUtils'),j=b('collectDataAttributes'),k=b('copyProperties'),l=b('ge'),m=b('setUECookie'),n=b('$');function o(q){if(!l('content'))return [0,0,0,0];var r=n('content'),s=a.Vector2?a.Vector2.getEventPosition(q):{x:0,y:0};return [s.x,s.y,r.offsetLeft,r.clientWidth];}function p(q,r,event,s){var t=(!a.ArbiterMonitor)?'r':'a',u=[0,0,0,0],v,w,x;if(!!event){v=event.type;if(v=='click'&&l('content'))u=o(event);var y=0;event.ctrlKey&&(y+=1);event.shiftKey&&(y+=2);event.altKey&&(y+=4);event.metaKey&&(y+=8);if(y)v+=y;}if(!!r)w=i.get_href(r);var z=[];if(a.ArbiterMonitor){x=a.ArbiterMonitor.getInternRef(r);z=a.ArbiterMonitor.getActFields();}var aa=j(!!event?(event.target||event.srcElement):r,['ft','gt']);k(aa.ft,s.ft||{});k(aa.gt,s.gt||{});if(aa.gt.ua_id)q.set_ua_id(aa.gt.ua_id);if(typeof(aa.ft.ei)==='string')delete aa.ft.ei;var ba=[q._ue_ts,q._ue_count,w||'-',q._context,v||'-',x||i.get_intern_ref(r),t,a.URI?a.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,aa].concat(u).concat(z);return ba;}g.subscribe("UserAction/new",function(q,r){if(i.should_report(r.node,r.mode)){var s=p(r.ua,r.node,r.event,r.extra_data);m(r.ua.ue);h.log('act',s);}});});
__d("userAction",["Arbiter","EagleEye","copyProperties","debounce"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('EagleEye'),i=b('copyProperties'),j=b('debounce');function k(t,u,v){var w=t+'/'+u;i(this,{ue:w,_ua_id:null,_ts:t,_ns:null,_start_ts:t,_prev_event:'s',_ue_ts:t,_ue_count:u,_context:v,_data_version:1,_event_version:2,_info_version:1});this._log('uan',[1,w]);this._report=j(function x(){var y=[this._info_version,this.ue,this._ns,this._ua_id];this._log('uai',y);},100,this);}var l=[],m={},n={};i(k.prototype,{_log:function(t,u){var v=m[t]!==undefined?m[t]:true,w=n[t],x=w?w[this._ns]:{},y=x?x[this._ua_id]:undefined;if(y!==undefined?y:v)h.log(t,u);},coalesce_ua_id:function(t){if(this._ua_id===null)this.set_ua_id(t);return this;},set_ua_id:function(t){this._ua_id=t;this._report();return this;},coalesce_namespace:function(t){if(this._ns===null)this.set_namespace(t);return this;},set_namespace:function(t){this._ns=t;this._report();return this;},add_event:function(t,u,v){u=u||0;var w=(Date.now()-u),x=w-this._ts,y=w-(v?v:this._ue_ts),z=[this._event_version,this.ue,this._ns,this._ua_id,this._prev_event,t,x,y];if(!this._ua_id)return;this._log('uae',z);this._ts=w;this._prev_event=t;return this;},add_data:function(t){var u=[this._data_version,this.ue,t];this._log('uad',u);return this;}});var o=0,p=0,q=null,r=null;function s(t,u,event,v,w){var x=Date.now(),y=x+'/'+o;w=w||{};if(!u&&event)u=event.getTarget();var z=50;if(u&&q)if(x-p<z&&u==q&&v!="FORCE")return l[l.length-1];if(!window.addEventListener&&document.createEventObject)event=document.createEventObject(event);q=u;r=event;var aa=new k(x,o,t);l.push(aa);while(l.length>10)l.shift();g.inform("UserAction/new",{ua:aa,node:u,mode:v,event:event,extra_data:w});p=x;o++;return aa;}s.setUATypeConfig=function(t){i(m,t);};s.setCustomSampleConfig=function(t){i(n,t);};s.getCurrentUECount=function(){return o;};e.exports=a.userAction=s;});
__d("Primer",["ClickRef","function-extensions","Bootloader","CSS","Parent","trackReferrer","userAction"],function(a,b,c,d,e,f){b('ClickRef');b('function-extensions');var g=b('Bootloader'),h=b('CSS'),i=b('Parent'),j=b('trackReferrer'),k=b('userAction'),l=null,m=/async(?:-post)?|dialog(?:-post)?|theater|toggle/,n=document.documentElement;function o(r,s){r=i.byAttribute(r,s);if(!r)return;do{var t=r.getAttribute(s);JSON.parse(t).forEach(function(u){var v=r;g.loadModules.call(g,[u[0]],function(w){w[u[1]](v);});});}while(r=i.byAttribute(r.parentNode,s));return false;}n.onclick=function(r){r=r||window.event;l=r.target||r.srcElement;var s=o(l,'data-onclick'),t=i.byTag(l,'A');if(!t)return s;var u=t.getAttribute('ajaxify'),v=t.href,w=u||v;if(w){var x=k('a',t,r).coalesce_namespace('primer');if(a.ArbiterMonitor)a.ArbiterMonitor.initUA(x,[t]);}if(u&&v&&!(/#$/).test(v)){var y=r.which&&r.which===2,z=r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;if(y||z)return;}j(t,w);var aa=t.rel&&t.rel.match(m);aa=aa&&aa[0];switch(aa){case 'dialog':case 'dialog-post':g.loadModules(['AsyncDialog'],function(ba){ba.bootstrap(w,t,aa);});break;case 'async':case 'async-post':g.loadModules(['AsyncRequest'],function(ba){ba.bootstrap(w,t);});break;case 'theater':g.loadModules(['PhotoSnowlift'],function(ba){ba.bootstrap(w,t);});break;case 'toggle':h.toggleClass(t.parentNode,'openToggler');g.loadModules(['Toggler'],function(ba){ba.bootstrap(t);});break;default:return s;}return false;};n.onsubmit=function(r){r=r||window.event;var s=r.target||r.srcElement;if(s&&s.nodeName=='FORM'&&s.getAttribute('rel')=='async'){var t=k('f',s,r).coalesce_namespace('primer');if(a.ArbiterMonitor)a.ArbiterMonitor.initUA(t,[s]);var u=l;g.loadModules(['Form'],function(v){v.bootstrap(s,u);});return false;}};var p=null;function q(r,s){s=s||window.event;p=s.target||s.srcElement;o(p,'data-on'+r);var t=i.byAttribute(p,'data-hover');if(!t)return;switch(t.getAttribute('data-hover')){case 'tooltip':g.loadModules(['Tooltip'],function(u){u.process(t,p);});break;}}n.onmouseover=q.curry('mouseover');if(n.addEventListener){n.addEventListener('focus',q.curry('focus'),true);}else n.attachEvent('onfocusin',q.curry('focus'));});
__d("legacy:primer",["Primer"],function(a,b,c,d){b('Primer');},3);